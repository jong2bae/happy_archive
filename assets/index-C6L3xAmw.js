(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function YC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var hp={exports:{}},du={};var dT;function XC(){if(dT)return du;dT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:l}}return du.Fragment=e,du.jsx=t,du.jsxs=t,du}var mT;function KC(){return mT||(mT=1,hp.exports=XC()),hp.exports}var F=KC(),fp={exports:{}},Re={};var pT;function QC(){if(pT)return Re;pT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),b=Symbol.iterator;function D(x){return x===null||typeof x!="object"?null:(x=b&&x[b]||x["@@iterator"],typeof x=="function"?x:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,V={};function K(x,ee,ae){this.props=x,this.context=ee,this.refs=V,this.updater=ae||L}K.prototype.isReactComponent={},K.prototype.setState=function(x,ee){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,ee,"setState")},K.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function $(){}$.prototype=K.prototype;function Z(x,ee,ae){this.props=x,this.context=ee,this.refs=V,this.updater=ae||L}var ce=Z.prototype=new $;ce.constructor=Z,z(ce,K.prototype),ce.isPureReactComponent=!0;var me=Array.isArray;function ye(){}var C={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(x,ee,ae){var ue=ae.ref;return{$$typeof:n,type:x,key:ee,ref:ue!==void 0?ue:null,props:ae}}function k(x,ee){return R(x.type,ee,x.props)}function N(x){return typeof x=="object"&&x!==null&&x.$$typeof===n}function M(x){var ee={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(ae){return ee[ae]})}var I=/\/+/g;function We(x,ee){return typeof x=="object"&&x!==null&&x.key!=null?M(""+x.key):ee.toString(36)}function Xe(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(ye,ye):(x.status="pending",x.then(function(ee){x.status==="pending"&&(x.status="fulfilled",x.value=ee)},function(ee){x.status==="pending"&&(x.status="rejected",x.reason=ee)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function Q(x,ee,ae,ue,Ee){var Ae=typeof x;(Ae==="undefined"||Ae==="boolean")&&(x=null);var Pe=!1;if(x===null)Pe=!0;else switch(Ae){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(x.$$typeof){case n:case e:Pe=!0;break;case v:return Pe=x._init,Q(Pe(x._payload),ee,ae,ue,Ee)}}if(Pe)return Ee=Ee(x),Pe=ue===""?"."+We(x,0):ue,me(Ee)?(ae="",Pe!=null&&(ae=Pe.replace(I,"$&/")+"/"),Q(Ee,ee,ae,"",function(xe){return xe})):Ee!=null&&(N(Ee)&&(Ee=k(Ee,ae+(Ee.key==null||x&&x.key===Ee.key?"":(""+Ee.key).replace(I,"$&/")+"/")+Pe)),ee.push(Ee)),1;Pe=0;var le=ue===""?".":ue+":";if(me(x))for(var oe=0;oe<x.length;oe++)ue=x[oe],Ae=le+We(ue,oe),Pe+=Q(ue,ee,ae,Ae,Ee);else if(oe=D(x),typeof oe=="function")for(x=oe.call(x),oe=0;!(ue=x.next()).done;)ue=ue.value,Ae=le+We(ue,oe++),Pe+=Q(ue,ee,ae,Ae,Ee);else if(Ae==="object"){if(typeof x.then=="function")return Q(Xe(x),ee,ae,ue,Ee);throw ee=String(x),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function re(x,ee,ae){if(x==null)return x;var ue=[],Ee=0;return Q(x,ue,"","",function(Ae){return ee.call(ae,Ae,Ee++)}),ue}function pe(x){if(x._status===-1){var ee=x._result;ee=ee(),ee.then(function(ae){(x._status===0||x._status===-1)&&(x._status=1,x._result=ae)},function(ae){(x._status===0||x._status===-1)&&(x._status=2,x._result=ae)}),x._status===-1&&(x._status=0,x._result=ee)}if(x._status===1)return x._result.default;throw x._result}var ke=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},qe={map:re,forEach:function(x,ee,ae){re(x,function(){ee.apply(this,arguments)},ae)},count:function(x){var ee=0;return re(x,function(){ee++}),ee},toArray:function(x){return re(x,function(ee){return ee})||[]},only:function(x){if(!N(x))throw Error("React.Children.only expected to receive a single React element child.");return x}};return Re.Activity=E,Re.Children=qe,Re.Component=K,Re.Fragment=t,Re.Profiler=a,Re.PureComponent=Z,Re.StrictMode=r,Re.Suspense=p,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Re.__COMPILER_RUNTIME={__proto__:null,c:function(x){return C.H.useMemoCache(x)}},Re.cache=function(x){return function(){return x.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(x,ee,ae){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var ue=z({},x.props),Ee=x.key;if(ee!=null)for(Ae in ee.key!==void 0&&(Ee=""+ee.key),ee)!A.call(ee,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&ee.ref===void 0||(ue[Ae]=ee[Ae]);var Ae=arguments.length-2;if(Ae===1)ue.children=ae;else if(1<Ae){for(var Pe=Array(Ae),le=0;le<Ae;le++)Pe[le]=arguments[le+2];ue.children=Pe}return R(x.type,Ee,ue)},Re.createContext=function(x){return x={$$typeof:c,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:l,_context:x},x},Re.createElement=function(x,ee,ae){var ue,Ee={},Ae=null;if(ee!=null)for(ue in ee.key!==void 0&&(Ae=""+ee.key),ee)A.call(ee,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(Ee[ue]=ee[ue]);var Pe=arguments.length-2;if(Pe===1)Ee.children=ae;else if(1<Pe){for(var le=Array(Pe),oe=0;oe<Pe;oe++)le[oe]=arguments[oe+2];Ee.children=le}if(x&&x.defaultProps)for(ue in Pe=x.defaultProps,Pe)Ee[ue]===void 0&&(Ee[ue]=Pe[ue]);return R(x,Ae,Ee)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(x){return{$$typeof:d,render:x}},Re.isValidElement=N,Re.lazy=function(x){return{$$typeof:v,_payload:{_status:-1,_result:x},_init:pe}},Re.memo=function(x,ee){return{$$typeof:g,type:x,compare:ee===void 0?null:ee}},Re.startTransition=function(x){var ee=C.T,ae={};C.T=ae;try{var ue=x(),Ee=C.S;Ee!==null&&Ee(ae,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(ye,ke)}catch(Ae){ke(Ae)}finally{ee!==null&&ae.types!==null&&(ee.types=ae.types),C.T=ee}},Re.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Re.use=function(x){return C.H.use(x)},Re.useActionState=function(x,ee,ae){return C.H.useActionState(x,ee,ae)},Re.useCallback=function(x,ee){return C.H.useCallback(x,ee)},Re.useContext=function(x){return C.H.useContext(x)},Re.useDebugValue=function(){},Re.useDeferredValue=function(x,ee){return C.H.useDeferredValue(x,ee)},Re.useEffect=function(x,ee){return C.H.useEffect(x,ee)},Re.useEffectEvent=function(x){return C.H.useEffectEvent(x)},Re.useId=function(){return C.H.useId()},Re.useImperativeHandle=function(x,ee,ae){return C.H.useImperativeHandle(x,ee,ae)},Re.useInsertionEffect=function(x,ee){return C.H.useInsertionEffect(x,ee)},Re.useLayoutEffect=function(x,ee){return C.H.useLayoutEffect(x,ee)},Re.useMemo=function(x,ee){return C.H.useMemo(x,ee)},Re.useOptimistic=function(x,ee){return C.H.useOptimistic(x,ee)},Re.useReducer=function(x,ee,ae){return C.H.useReducer(x,ee,ae)},Re.useRef=function(x){return C.H.useRef(x)},Re.useState=function(x){return C.H.useState(x)},Re.useSyncExternalStore=function(x,ee,ae){return C.H.useSyncExternalStore(x,ee,ae)},Re.useTransition=function(){return C.H.useTransition()},Re.version="19.2.3",Re}var gT;function Cg(){return gT||(gT=1,fp.exports=QC()),fp.exports}var G=Cg();const Ra=YC(G);var dp={exports:{}},mu={},mp={exports:{}},pp={};var yT;function $C(){return yT||(yT=1,(function(n){function e(Q,re){var pe=Q.length;Q.push(re);e:for(;0<pe;){var ke=pe-1>>>1,qe=Q[ke];if(0<a(qe,re))Q[ke]=re,Q[pe]=qe,pe=ke;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var re=Q[0],pe=Q.pop();if(pe!==re){Q[0]=pe;e:for(var ke=0,qe=Q.length,x=qe>>>1;ke<x;){var ee=2*(ke+1)-1,ae=Q[ee],ue=ee+1,Ee=Q[ue];if(0>a(ae,pe))ue<qe&&0>a(Ee,ae)?(Q[ke]=Ee,Q[ue]=pe,ke=ue):(Q[ke]=ae,Q[ee]=pe,ke=ee);else if(ue<qe&&0>a(Ee,pe))Q[ke]=Ee,Q[ue]=pe,ke=ue;else break e}}return re}function a(Q,re){var pe=Q.sortIndex-re.sortIndex;return pe!==0?pe:Q.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],g=[],v=1,E=null,b=3,D=!1,L=!1,z=!1,V=!1,K=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function ce(Q){for(var re=t(g);re!==null;){if(re.callback===null)r(g);else if(re.startTime<=Q)r(g),re.sortIndex=re.expirationTime,e(p,re);else break;re=t(g)}}function me(Q){if(z=!1,ce(Q),!L)if(t(p)!==null)L=!0,ye||(ye=!0,M());else{var re=t(g);re!==null&&Xe(me,re.startTime-Q)}}var ye=!1,C=-1,A=5,R=-1;function k(){return V?!0:!(n.unstable_now()-R<A)}function N(){if(V=!1,ye){var Q=n.unstable_now();R=Q;var re=!0;try{e:{L=!1,z&&(z=!1,$(C),C=-1),D=!0;var pe=b;try{t:{for(ce(Q),E=t(p);E!==null&&!(E.expirationTime>Q&&k());){var ke=E.callback;if(typeof ke=="function"){E.callback=null,b=E.priorityLevel;var qe=ke(E.expirationTime<=Q);if(Q=n.unstable_now(),typeof qe=="function"){E.callback=qe,ce(Q),re=!0;break t}E===t(p)&&r(p),ce(Q)}else r(p);E=t(p)}if(E!==null)re=!0;else{var x=t(g);x!==null&&Xe(me,x.startTime-Q),re=!1}}break e}finally{E=null,b=pe,D=!1}re=void 0}}finally{re?M():ye=!1}}}var M;if(typeof Z=="function")M=function(){Z(N)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,We=I.port2;I.port1.onmessage=N,M=function(){We.postMessage(null)}}else M=function(){K(N,0)};function Xe(Q,re){C=K(function(){Q(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(Q){switch(b){case 1:case 2:case 3:var re=3;break;default:re=b}var pe=b;b=re;try{return Q()}finally{b=pe}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(Q,re){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var pe=b;b=Q;try{return re()}finally{b=pe}},n.unstable_scheduleCallback=function(Q,re,pe){var ke=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?ke+pe:ke):pe=ke,Q){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=pe+qe,Q={id:v++,callback:re,priorityLevel:Q,startTime:pe,expirationTime:qe,sortIndex:-1},pe>ke?(Q.sortIndex=pe,e(g,Q),t(p)===null&&Q===t(g)&&(z?($(C),C=-1):z=!0,Xe(me,pe-ke))):(Q.sortIndex=qe,e(p,Q),L||D||(L=!0,ye||(ye=!0,M()))),Q},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(Q){var re=b;return function(){var pe=b;b=re;try{return Q.apply(this,arguments)}finally{b=pe}}}})(pp)),pp}var vT;function WC(){return vT||(vT=1,mp.exports=$C()),mp.exports}var gp={exports:{}},cn={};var _T;function ZC(){if(_T)return cn;_T=1;var n=Cg();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:p,containerInfo:g,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,cn.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,v)},cn.flushSync=function(p){var g=c.T,v=r.p;try{if(c.T=null,r.p=2,p)return p()}finally{c.T=g,r.p=v,r.d.f()}},cn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(p,g))},cn.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},cn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,D=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?r.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:b,fetchPriority:D}):v==="script"&&r.d.X(p,{crossOrigin:E,integrity:b,fetchPriority:D,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},cn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=d(g.as,g.crossOrigin);r.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(p)},cn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin);r.d.L(p,v,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},cn.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=d(g.as,g.crossOrigin);r.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(p)},cn.requestFormReset=function(p){r.d.r(p)},cn.unstable_batchedUpdates=function(p,g){return p(g)},cn.useFormState=function(p,g,v){return c.H.useFormState(p,g,v)},cn.useFormStatus=function(){return c.H.useHostTransitionStatus()},cn.version="19.2.3",cn}var TT;function JC(){if(TT)return gp.exports;TT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gp.exports=ZC(),gp.exports}var ET;function e2(){if(ET)return mu;ET=1;var n=WC(),e=Cg(),t=JC();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function p(i){if(l(i)!==i)throw Error(r(188))}function g(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var o=i,u=s;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return p(f),i;if(m===u)return p(f),s;m=m.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=m;else{for(var _=!1,S=f.child;S;){if(S===o){_=!0,o=f,u=m;break}if(S===u){_=!0,u=f,o=m;break}S=S.sibling}if(!_){for(S=m.child;S;){if(S===o){_=!0,o=m,u=f;break}if(S===u){_=!0,u=m,o=f;break}S=S.sibling}if(!_)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:s}function v(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=v(i),s!==null)return s;i=i.sibling}return null}var E=Object.assign,b=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function M(i){return i===null||typeof i!="object"?null:(i=N&&i[N]||i["@@iterator"],typeof i=="function"?i:null)}var I=Symbol.for("react.client.reference");function We(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===I?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case z:return"Fragment";case K:return"Profiler";case V:return"StrictMode";case me:return"Suspense";case ye:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case L:return"Portal";case Z:return i.displayName||"Context";case $:return(i._context.displayName||"Context")+".Consumer";case ce:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case C:return s=i.displayName||null,s!==null?s:We(i.type)||"Memo";case A:s=i._payload,i=i._init;try{return We(i(s))}catch{}}return null}var Xe=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},ke=[],qe=-1;function x(i){return{current:i}}function ee(i){0>qe||(i.current=ke[qe],ke[qe]=null,qe--)}function ae(i,s){qe++,ke[qe]=i.current,i.current=s}var ue=x(null),Ee=x(null),Ae=x(null),Pe=x(null);function le(i,s){switch(ae(Ae,s),ae(Ee,i),ae(ue,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?V0(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=V0(s),i=L0(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ee(ue),ae(ue,i)}function oe(){ee(ue),ee(Ee),ee(Ae)}function xe(i){i.memoizedState!==null&&ae(Pe,i);var s=ue.current,o=L0(s,i.type);s!==o&&(ae(Ee,i),ae(ue,o))}function Ft(i){Ee.current===i&&(ee(ue),ee(Ee)),Pe.current===i&&(ee(Pe),uu._currentValue=pe)}var Et,Jt;function wi(i){if(Et===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Et=s&&s[1]||"",Jt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Et+i+Jt}var ul=!1;function Fs(i,s){if(!i||ul)return"";ul=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(X){var q=X}Reflect.construct(i,[],te)}else{try{te.call()}catch(X){q=X}i.call(te.prototype)}}else{try{throw Error()}catch(X){q=X}(te=i())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(X){if(X&&q&&typeof X.stack=="string")return[X.stack,q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),_=m[0],S=m[1];if(_&&S){var O=_.split(`
`),H=S.split(`
`);for(f=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(u===O.length||f===H.length)for(u=O.length-1,f=H.length-1;1<=u&&0<=f&&O[u]!==H[f];)f--;for(;1<=u&&0<=f;u--,f--)if(O[u]!==H[f]){if(u!==1||f!==1)do if(u--,f--,0>f||O[u]!==H[f]){var W=`
`+O[u].replace(" at new "," at ");return i.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",i.displayName)),W}while(1<=u&&0<=f);break}}}finally{ul=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?wi(o):""}function cl(i,s){switch(i.tag){case 26:case 27:case 5:return wi(i.type);case 16:return wi("Lazy");case 13:return i.child!==s&&s!==null?wi("Suspense Fallback"):wi("Suspense");case 19:return wi("SuspenseList");case 0:case 15:return Fs(i.type,!1);case 11:return Fs(i.type.render,!1);case 1:return Fs(i.type,!0);case 31:return wi("Activity");default:return""}}function hl(i){try{var s="",o=null;do s+=cl(i,o),o=i,i=i.return;while(i);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var It=Object.prototype.hasOwnProperty,Ht=n.unstable_scheduleCallback,Mr=n.unstable_cancelCallback,dd=n.unstable_shouldYield,ac=n.unstable_requestPaint,pn=n.unstable_now,Hs=n.unstable_getCurrentPriorityLevel,fl=n.unstable_ImmediatePriority,dl=n.unstable_UserBlockingPriority,Vr=n.unstable_NormalPriority,md=n.unstable_LowPriority,oc=n.unstable_IdlePriority,lc=n.log,uc=n.unstable_setDisableYieldValue,ii=null,en=null;function zn(i){if(typeof lc=="function"&&uc(i),en&&typeof en.setStrictMode=="function")try{en.setStrictMode(ii,i)}catch{}}var St=Math.clz32?Math.clz32:hc,cc=Math.log,Ya=Math.LN2;function hc(i){return i>>>=0,i===0?32:31-(cc(i)/Ya|0)|0}var Ai=256,qs=262144,Dt=4194304;function Ci(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ri(i,s,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,m=i.suspendedLanes,_=i.pingedLanes;i=i.warmLanes;var S=u&134217727;return S!==0?(u=S&~m,u!==0?f=Ci(u):(_&=S,_!==0?f=Ci(_):o||(o=S&~i,o!==0&&(f=Ci(o))))):(S=u&~m,S!==0?f=Ci(S):_!==0?f=Ci(_):o||(o=u&~i,o!==0&&(f=Ci(o)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:f}function ri(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function pd(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fc(){var i=Dt;return Dt<<=1,(Dt&62914560)===0&&(Dt=4194304),i}function Ii(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function Gs(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function gd(i,s,o,u,f,m){var _=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var S=i.entanglements,O=i.expirationTimes,H=i.hiddenUpdates;for(o=_&~o;0<o;){var W=31-St(o),te=1<<W;S[W]=0,O[W]=-1;var q=H[W];if(q!==null)for(H[W]=null,W=0;W<q.length;W++){var X=q[W];X!==null&&(X.lane&=-536870913)}o&=~te}u!==0&&Ys(i,u,0),m!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=m&~(_&~s))}function Ys(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-St(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|o&261930}function ml(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var u=31-St(o),f=1<<u;f&s|i[u]&s&&(i[u]|=s),o&=~f}}function pl(i,s){var o=s&-s;return o=(o&42)!==0?1:Xs(o),(o&(i.suspendedLanes|s))!==0?0:o}function Xs(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function sr(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function dc(){var i=re.p;return i!==0?i:(i=window.event,i===void 0?32:aT(i.type))}function si(i,s){var o=re.p;try{return re.p=i,s()}finally{re.p=o}}var ai=Math.random().toString(36).slice(2),Ot="__reactFiber$"+ai,Xt="__reactProps$"+ai,Di="__reactContainer$"+ai,Xa="__reactEvents$"+ai,yd="__reactListeners$"+ai,mc="__reactHandles$"+ai,pc="__reactResources$"+ai,Oi="__reactMarker$"+ai;function Ka(i){delete i[Ot],delete i[Xt],delete i[Xa],delete i[yd],delete i[mc]}function Ni(i){var s=i[Ot];if(s)return s;for(var o=i.parentNode;o;){if(s=o[Di]||o[Ot]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=q0(i);i!==null;){if(o=i[Ot])return o;i=q0(i)}return s}i=o,o=i.parentNode}return null}function Bn(i){if(i=i[Ot]||i[Di]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function Dn(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function xi(i){var s=i[pc];return s||(s=i[pc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Nt(i){i[Oi]=!0}var gl=new Set,yl={};function Pi(i,s){ki(i,s),ki(i+"Capture",s)}function ki(i,s){for(yl[i]=s,i=0;i<s.length;i++)gl.add(s[i])}var vl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_l={},Tl={};function gc(i){return It.call(Tl,i)?!0:It.call(_l,i)?!1:vl.test(i)?Tl[i]=!0:(_l[i]=!0,!1)}function Qa(i,s,o){if(gc(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function On(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function xt(i,s,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+u)}}function Kt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Lr(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function El(i,s,o){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(_){o=""+_,m.call(this,_)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Ze(i){if(!i._valueTracker){var s=Lr(i)?"checked":"value";i._valueTracker=El(i,s,""+i[s])}}function Ks(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return i&&(u=Lr(i)?i.checked?"true":"false":i.value),i=u,i!==o?(s.setValue(i),!0):!1}function Mi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Qs=/[\n"\\]/g;function Tn(i){return i.replace(Qs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function $a(i,s,o,u,f,m,_,S){i.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.type=_:i.removeAttribute("type"),s!=null?_==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Kt(s)):i.value!==""+Kt(s)&&(i.value=""+Kt(s)):_!=="submit"&&_!=="reset"||i.removeAttribute("value"),s!=null?Sl(i,_,Kt(s)):o!=null?Sl(i,_,Kt(o)):u!=null&&i.removeAttribute("value"),f==null&&m!=null&&(i.defaultChecked=!!m),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.name=""+Kt(S):i.removeAttribute("name")}function yc(i,s,o,u,f,m,_,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(i.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){Ze(i);return}o=o!=null?""+Kt(o):"",s=s!=null?""+Kt(s):o,S||s===i.value||(i.value=s),i.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=S?i.checked:!!u,i.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.name=_),Ze(i)}function Sl(i,s,o){s==="number"&&Mi(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function Ur(i,s,o,u){if(i=i.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=s.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&u&&(i[o].defaultSelected=!0)}else{for(o=""+Kt(o),s=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function vc(i,s,o){if(s!=null&&(s=""+Kt(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+Kt(o):""}function zr(i,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(Xe(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Kt(s),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u),Ze(i)}function En(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var _c=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bl(i,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,o):typeof o!="number"||o===0||_c.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function wl(i,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&bl(i,f,u)}else for(var m in s)s.hasOwnProperty(m)&&bl(i,m,s[m])}function Wa(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Br=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Za(i){return Br.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function oi(){}var Al=null;function jn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var jr=null,Vi=null;function $s(i){var s=Bn(i);if(s&&(i=s.stateNode)){var o=i[Xt]||null;e:switch(i=s.stateNode,s.type){case"input":if($a(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Tn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==i&&u.form===i.form){var f=u[Xt]||null;if(!f)throw Error(r(90));$a(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===i.form&&Ks(u)}break e;case"textarea":vc(i,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Ur(i,!!o.multiple,s,!1)}}}var Ja=!1;function Fr(i,s,o){if(Ja)return i(s,o);Ja=!0;try{var u=i(s);return u}finally{if(Ja=!1,(jr!==null||Vi!==null)&&(dh(),jr&&(s=jr,i=Vi,Vi=jr=null,$s(s),i)))for(s=0;s<i.length;s++)$s(i[s])}}function li(i,s){var o=i.stateNode;if(o===null)return null;var u=o[Xt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ws=!1;if(Fn)try{var tt={};Object.defineProperty(tt,"passive",{get:function(){Ws=!0}}),window.addEventListener("test",tt,tt),window.removeEventListener("test",tt,tt)}catch{Ws=!1}var Li=null,Cl=null,Zs=null;function Rl(){if(Zs)return Zs;var i,s=Cl,o=s.length,u,f="value"in Li?Li.value:Li.textContent,m=f.length;for(i=0;i<o&&s[i]===f[i];i++);var _=o-i;for(u=1;u<=_&&s[o-u]===f[m-u];u++);return Zs=f.slice(i,1<u?1-u:void 0)}function Js(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function ar(){return!0}function ui(){return!1}function tn(i){function s(o,u,f,m,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(o=i[S],this[S]=o?o(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ar:ui,this.isPropagationStopped=ui,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ar)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ar)},persist:function(){},isPersistent:ar}),s}var or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ui=tn(or),Hr=E({},or,{view:0,detail:0}),Il=tn(Hr),qr,eo,zi,to=E({},Hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==zi&&(zi&&i.type==="mousemove"?(qr=i.screenX-zi.screenX,eo=i.screenY-zi.screenY):eo=qr=0,zi=i),qr)},movementY:function(i){return"movementY"in i?i.movementY:eo}}),Dl=tn(to),ea=E({},to,{dataTransfer:0}),Ec=tn(ea),Sc=E({},Hr,{relatedTarget:0}),ta=tn(Sc),Ol=E({},or,{animationName:0,elapsedTime:0,pseudoElement:0}),bc=tn(Ol),no=E({},or,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),wc=tn(no),Ac=E({},or,{data:0}),Bi=tn(Ac),Cc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ic={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dc(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Ic[i])?!!s[i]:!1}function Gr(){return Dc}var gn=E({},Hr,{key:function(i){if(i.key){var s=Cc[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Js(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Rc[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gr,charCode:function(i){return i.type==="keypress"?Js(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Js(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Oc=tn(gn),Nc=E({},to,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lr=tn(Nc),h=E({},Hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gr}),y=tn(h),T=E({},or,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=tn(T),B=E({},to,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=tn(B),se=E({},or,{newState:0,oldState:0}),De=tn(se),bt=[9,13,27,32],Ke=Fn&&"CompositionEvent"in window,ht=null;Fn&&"documentMode"in document&&(ht=document.documentMode);var Hn=Fn&&"TextEvent"in window&&!ht,ji=Fn&&(!Ke||ht&&8<ht&&11>=ht),ci=" ",hi=!1;function na(i,s){switch(i){case"keyup":return bt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function io(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ro=!1;function gA(i,s){switch(i){case"compositionend":return io(s);case"keypress":return s.which!==32?null:(hi=!0,ci);case"textInput":return i=s.data,i===ci&&hi?null:i;default:return null}}function yA(i,s){if(ro)return i==="compositionend"||!Ke&&na(i,s)?(i=Rl(),Zs=Cl=Li=null,ro=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ji&&s.locale!=="ko"?null:s.data;default:return null}}var vA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xy(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!vA[i.type]:s==="textarea"}function Ky(i,s,o,u){jr?Vi?Vi.push(u):Vi=[u]:jr=u,s=Th(s,"onChange"),0<s.length&&(o=new Ui("onChange","change",null,o,u),i.push({event:o,listeners:s}))}var Nl=null,xl=null;function _A(i){O0(i,0)}function xc(i){var s=Dn(i);if(Ks(s))return i}function Qy(i,s){if(i==="change")return s}var $y=!1;if(Fn){var vd;if(Fn){var _d="oninput"in document;if(!_d){var Wy=document.createElement("div");Wy.setAttribute("oninput","return;"),_d=typeof Wy.oninput=="function"}vd=_d}else vd=!1;$y=vd&&(!document.documentMode||9<document.documentMode)}function Zy(){Nl&&(Nl.detachEvent("onpropertychange",Jy),xl=Nl=null)}function Jy(i){if(i.propertyName==="value"&&xc(xl)){var s=[];Ky(s,xl,i,jn(i)),Fr(_A,s)}}function TA(i,s,o){i==="focusin"?(Zy(),Nl=s,xl=o,Nl.attachEvent("onpropertychange",Jy)):i==="focusout"&&Zy()}function EA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return xc(xl)}function SA(i,s){if(i==="click")return xc(s)}function bA(i,s){if(i==="input"||i==="change")return xc(s)}function wA(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Nn=typeof Object.is=="function"?Object.is:wA;function Pl(i,s){if(Nn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!It.call(s,f)||!Nn(i[f],s[f]))return!1}return!0}function ev(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function tv(i,s){var o=ev(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=s&&u>=s)return{node:o,offset:s-i};i=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=ev(o)}}function nv(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?nv(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function iv(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Mi(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=Mi(i.document)}return s}function Td(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var AA=Fn&&"documentMode"in document&&11>=document.documentMode,so=null,Ed=null,kl=null,Sd=!1;function rv(i,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Sd||so==null||so!==Mi(u)||(u=so,"selectionStart"in u&&Td(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),kl&&Pl(kl,u)||(kl=u,u=Th(Ed,"onSelect"),0<u.length&&(s=new Ui("onSelect","select",null,s,o),i.push({event:s,listeners:u}),s.target=so)))}function ia(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var ao={animationend:ia("Animation","AnimationEnd"),animationiteration:ia("Animation","AnimationIteration"),animationstart:ia("Animation","AnimationStart"),transitionrun:ia("Transition","TransitionRun"),transitionstart:ia("Transition","TransitionStart"),transitioncancel:ia("Transition","TransitionCancel"),transitionend:ia("Transition","TransitionEnd")},bd={},sv={};Fn&&(sv=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function ra(i){if(bd[i])return bd[i];if(!ao[i])return i;var s=ao[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in sv)return bd[i]=s[o];return i}var av=ra("animationend"),ov=ra("animationiteration"),lv=ra("animationstart"),CA=ra("transitionrun"),RA=ra("transitionstart"),IA=ra("transitioncancel"),uv=ra("transitionend"),cv=new Map,wd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wd.push("scrollEnd");function fi(i,s){cv.set(i,s),Pi(s,[i])}var Pc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},qn=[],oo=0,Ad=0;function kc(){for(var i=oo,s=Ad=oo=0;s<i;){var o=qn[s];qn[s++]=null;var u=qn[s];qn[s++]=null;var f=qn[s];qn[s++]=null;var m=qn[s];if(qn[s++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}m!==0&&hv(o,f,m)}}function Mc(i,s,o,u){qn[oo++]=i,qn[oo++]=s,qn[oo++]=o,qn[oo++]=u,Ad|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Cd(i,s,o,u){return Mc(i,s,o,u),Vc(i)}function sa(i,s){return Mc(i,null,null,s),Vc(i)}function hv(i,s,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=i.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(i=m.stateNode,i===null||i._visibility&1||(f=!0)),i=m,m=m.return;return i.tag===3?(m=i.stateNode,f&&s!==null&&(f=31-St(o),i=m.hiddenUpdates,u=i[f],u===null?i[f]=[s]:u.push(s),s.lane=o|536870912),m):null}function Vc(i){if(50<nu)throw nu=0,Mm=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var lo={};function DA(i,s,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(i,s,o,u){return new DA(i,s,o,u)}function Rd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ur(i,s){var o=i.alternate;return o===null?(o=xn(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function fv(i,s){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Lc(i,s,o,u,f,m){var _=0;if(u=i,typeof i=="function")Rd(i)&&(_=1);else if(typeof i=="string")_=kC(i,o,ue.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case R:return i=xn(31,o,s,f),i.elementType=R,i.lanes=m,i;case z:return aa(o.children,f,m,s);case V:_=8,f|=24;break;case K:return i=xn(12,o,s,f|2),i.elementType=K,i.lanes=m,i;case me:return i=xn(13,o,s,f),i.elementType=me,i.lanes=m,i;case ye:return i=xn(19,o,s,f),i.elementType=ye,i.lanes=m,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Z:_=10;break e;case $:_=9;break e;case ce:_=11;break e;case C:_=14;break e;case A:_=16,u=null;break e}_=29,o=Error(r(130,i===null?"null":typeof i,"")),u=null}return s=xn(_,o,s,f),s.elementType=i,s.type=u,s.lanes=m,s}function aa(i,s,o,u){return i=xn(7,i,u,s),i.lanes=o,i}function Id(i,s,o){return i=xn(6,i,null,s),i.lanes=o,i}function dv(i){var s=xn(18,null,null,0);return s.stateNode=i,s}function Dd(i,s,o){return s=xn(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var mv=new WeakMap;function Gn(i,s){if(typeof i=="object"&&i!==null){var o=mv.get(i);return o!==void 0?o:(s={value:i,source:s,stack:hl(s)},mv.set(i,s),s)}return{value:i,source:s,stack:hl(s)}}var uo=[],co=0,Uc=null,Ml=0,Yn=[],Xn=0,Yr=null,Fi=1,Hi="";function cr(i,s){uo[co++]=Ml,uo[co++]=Uc,Uc=i,Ml=s}function pv(i,s,o){Yn[Xn++]=Fi,Yn[Xn++]=Hi,Yn[Xn++]=Yr,Yr=i;var u=Fi;i=Hi;var f=32-St(u)-1;u&=~(1<<f),o+=1;var m=32-St(s)+f;if(30<m){var _=f-f%5;m=(u&(1<<_)-1).toString(32),u>>=_,f-=_,Fi=1<<32-St(s)+f|o<<f|u,Hi=m+i}else Fi=1<<m|o<<f|u,Hi=i}function Od(i){i.return!==null&&(cr(i,1),pv(i,1,0))}function Nd(i){for(;i===Uc;)Uc=uo[--co],uo[co]=null,Ml=uo[--co],uo[co]=null;for(;i===Yr;)Yr=Yn[--Xn],Yn[Xn]=null,Hi=Yn[--Xn],Yn[Xn]=null,Fi=Yn[--Xn],Yn[Xn]=null}function gv(i,s){Yn[Xn++]=Fi,Yn[Xn++]=Hi,Yn[Xn++]=Yr,Fi=s.id,Hi=s.overflow,Yr=i}var nn=null,lt=null,Fe=!1,Xr=null,Kn=!1,xd=Error(r(519));function Kr(i){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Vl(Gn(s,i)),xd}function yv(i){var s=i.stateNode,o=i.type,u=i.memoizedProps;switch(s[Ot]=i,s[Xt]=u,o){case"dialog":Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":case"embed":Ve("load",s);break;case"video":case"audio":for(o=0;o<ru.length;o++)Ve(ru[o],s);break;case"source":Ve("error",s);break;case"img":case"image":case"link":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"input":Ve("invalid",s),yc(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ve("invalid",s);break;case"textarea":Ve("invalid",s),zr(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||k0(s.textContent,o)?(u.popover!=null&&(Ve("beforetoggle",s),Ve("toggle",s)),u.onScroll!=null&&Ve("scroll",s),u.onScrollEnd!=null&&Ve("scrollend",s),u.onClick!=null&&(s.onclick=oi),s=!0):s=!1,s||Kr(i,!0)}function vv(i){for(nn=i.return;nn;)switch(nn.tag){case 5:case 31:case 13:Kn=!1;return;case 27:case 3:Kn=!0;return;default:nn=nn.return}}function ho(i){if(i!==nn)return!1;if(!Fe)return vv(i),Fe=!0,!1;var s=i.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||$m(i.type,i.memoizedProps)),o=!o),o&&lt&&Kr(i),vv(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));lt=H0(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));lt=H0(i)}else s===27?(s=lt,ls(i.type)?(i=tp,tp=null,lt=i):lt=s):lt=nn?$n(i.stateNode.nextSibling):null;return!0}function oa(){lt=nn=null,Fe=!1}function Pd(){var i=Xr;return i!==null&&(An===null?An=i:An.push.apply(An,i),Xr=null),i}function Vl(i){Xr===null?Xr=[i]:Xr.push(i)}var kd=x(null),la=null,hr=null;function Qr(i,s,o){ae(kd,s._currentValue),s._currentValue=o}function fr(i){i._currentValue=kd.current,ee(kd)}function Md(i,s,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===o)break;i=i.return}}function Vd(i,s,o,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=f;for(var O=0;O<s.length;O++)if(S.context===s[O]){m.lanes|=o,S=m.alternate,S!==null&&(S.lanes|=o),Md(m.return,o,i),u||(_=null);break e}m=S.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=o,m=_.alternate,m!==null&&(m.lanes|=o),Md(_,o,i),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===i){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function fo(i,s,o,u){i=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var S=f.type;Nn(f.pendingProps.value,_.value)||(i!==null?i.push(S):i=[S])}}else if(f===Pe.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(uu):i=[uu])}f=f.return}i!==null&&Vd(s,i,o,u),s.flags|=262144}function zc(i){for(i=i.firstContext;i!==null;){if(!Nn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ua(i){la=i,hr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function rn(i){return _v(la,i)}function Bc(i,s){return la===null&&ua(i),_v(i,s)}function _v(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},hr===null){if(i===null)throw Error(r(308));hr=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else hr=hr.next=s;return o}var OA=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},NA=n.unstable_scheduleCallback,xA=n.unstable_NormalPriority,Pt={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ld(){return{controller:new OA,data:new Map,refCount:0}}function Ll(i){i.refCount--,i.refCount===0&&NA(xA,function(){i.controller.abort()})}var Ul=null,Ud=0,mo=0,po=null;function PA(i,s){if(Ul===null){var o=Ul=[];Ud=0,mo=jm(),po={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Ud++,s.then(Tv,Tv),s}function Tv(){if(--Ud===0&&Ul!==null){po!==null&&(po.status="fulfilled");var i=Ul;Ul=null,mo=0,po=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function kA(i,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Ev=Q.S;Q.S=function(i,s){r0=pn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&PA(i,s),Ev!==null&&Ev(i,s)};var ca=x(null);function zd(){var i=ca.current;return i!==null?i:st.pooledCache}function jc(i,s){s===null?ae(ca,ca.current):ae(ca,s.pool)}function Sv(){var i=zd();return i===null?null:{parent:Pt._currentValue,pool:i}}var go=Error(r(460)),Bd=Error(r(474)),Fc=Error(r(542)),Hc={then:function(){}};function bv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function wv(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(oi,oi),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Cv(i),i;default:if(typeof s.status=="string")s.then(oi,oi);else{if(i=st,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Cv(i),i}throw fa=s,go}}function ha(i){try{var s=i._init;return s(i._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(fa=o,go):o}}var fa=null;function Av(){if(fa===null)throw Error(r(459));var i=fa;return fa=null,i}function Cv(i){if(i===go||i===Fc)throw Error(r(483))}var yo=null,zl=0;function qc(i){var s=zl;return zl+=1,yo===null&&(yo=[]),wv(yo,i,s)}function Bl(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Gc(i,s){throw s.$$typeof===b?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function Rv(i){function s(U,P){if(i){var j=U.deletions;j===null?(U.deletions=[P],U.flags|=16):j.push(P)}}function o(U,P){if(!i)return null;for(;P!==null;)s(U,P),P=P.sibling;return null}function u(U){for(var P=new Map;U!==null;)U.key!==null?P.set(U.key,U):P.set(U.index,U),U=U.sibling;return P}function f(U,P){return U=ur(U,P),U.index=0,U.sibling=null,U}function m(U,P,j){return U.index=j,i?(j=U.alternate,j!==null?(j=j.index,j<P?(U.flags|=67108866,P):j):(U.flags|=67108866,P)):(U.flags|=1048576,P)}function _(U){return i&&U.alternate===null&&(U.flags|=67108866),U}function S(U,P,j,J){return P===null||P.tag!==6?(P=Id(j,U.mode,J),P.return=U,P):(P=f(P,j),P.return=U,P)}function O(U,P,j,J){var ve=j.type;return ve===z?W(U,P,j.props.children,J,j.key):P!==null&&(P.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===A&&ha(ve)===P.type)?(P=f(P,j.props),Bl(P,j),P.return=U,P):(P=Lc(j.type,j.key,j.props,null,U.mode,J),Bl(P,j),P.return=U,P)}function H(U,P,j,J){return P===null||P.tag!==4||P.stateNode.containerInfo!==j.containerInfo||P.stateNode.implementation!==j.implementation?(P=Dd(j,U.mode,J),P.return=U,P):(P=f(P,j.children||[]),P.return=U,P)}function W(U,P,j,J,ve){return P===null||P.tag!==7?(P=aa(j,U.mode,J,ve),P.return=U,P):(P=f(P,j),P.return=U,P)}function te(U,P,j){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Id(""+P,U.mode,j),P.return=U,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case D:return j=Lc(P.type,P.key,P.props,null,U.mode,j),Bl(j,P),j.return=U,j;case L:return P=Dd(P,U.mode,j),P.return=U,P;case A:return P=ha(P),te(U,P,j)}if(Xe(P)||M(P))return P=aa(P,U.mode,j,null),P.return=U,P;if(typeof P.then=="function")return te(U,qc(P),j);if(P.$$typeof===Z)return te(U,Bc(U,P),j);Gc(U,P)}return null}function q(U,P,j,J){var ve=P!==null?P.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return ve!==null?null:S(U,P,""+j,J);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case D:return j.key===ve?O(U,P,j,J):null;case L:return j.key===ve?H(U,P,j,J):null;case A:return j=ha(j),q(U,P,j,J)}if(Xe(j)||M(j))return ve!==null?null:W(U,P,j,J,null);if(typeof j.then=="function")return q(U,P,qc(j),J);if(j.$$typeof===Z)return q(U,P,Bc(U,j),J);Gc(U,j)}return null}function X(U,P,j,J,ve){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return U=U.get(j)||null,S(P,U,""+J,ve);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case D:return U=U.get(J.key===null?j:J.key)||null,O(P,U,J,ve);case L:return U=U.get(J.key===null?j:J.key)||null,H(P,U,J,ve);case A:return J=ha(J),X(U,P,j,J,ve)}if(Xe(J)||M(J))return U=U.get(j)||null,W(P,U,J,ve,null);if(typeof J.then=="function")return X(U,P,j,qc(J),ve);if(J.$$typeof===Z)return X(U,P,j,Bc(P,J),ve);Gc(P,J)}return null}function de(U,P,j,J){for(var ve=null,Ge=null,ge=P,Ne=P=0,Ue=null;ge!==null&&Ne<j.length;Ne++){ge.index>Ne?(Ue=ge,ge=null):Ue=ge.sibling;var Ye=q(U,ge,j[Ne],J);if(Ye===null){ge===null&&(ge=Ue);break}i&&ge&&Ye.alternate===null&&s(U,ge),P=m(Ye,P,Ne),Ge===null?ve=Ye:Ge.sibling=Ye,Ge=Ye,ge=Ue}if(Ne===j.length)return o(U,ge),Fe&&cr(U,Ne),ve;if(ge===null){for(;Ne<j.length;Ne++)ge=te(U,j[Ne],J),ge!==null&&(P=m(ge,P,Ne),Ge===null?ve=ge:Ge.sibling=ge,Ge=ge);return Fe&&cr(U,Ne),ve}for(ge=u(ge);Ne<j.length;Ne++)Ue=X(ge,U,Ne,j[Ne],J),Ue!==null&&(i&&Ue.alternate!==null&&ge.delete(Ue.key===null?Ne:Ue.key),P=m(Ue,P,Ne),Ge===null?ve=Ue:Ge.sibling=Ue,Ge=Ue);return i&&ge.forEach(function(ds){return s(U,ds)}),Fe&&cr(U,Ne),ve}function Te(U,P,j,J){if(j==null)throw Error(r(151));for(var ve=null,Ge=null,ge=P,Ne=P=0,Ue=null,Ye=j.next();ge!==null&&!Ye.done;Ne++,Ye=j.next()){ge.index>Ne?(Ue=ge,ge=null):Ue=ge.sibling;var ds=q(U,ge,Ye.value,J);if(ds===null){ge===null&&(ge=Ue);break}i&&ge&&ds.alternate===null&&s(U,ge),P=m(ds,P,Ne),Ge===null?ve=ds:Ge.sibling=ds,Ge=ds,ge=Ue}if(Ye.done)return o(U,ge),Fe&&cr(U,Ne),ve;if(ge===null){for(;!Ye.done;Ne++,Ye=j.next())Ye=te(U,Ye.value,J),Ye!==null&&(P=m(Ye,P,Ne),Ge===null?ve=Ye:Ge.sibling=Ye,Ge=Ye);return Fe&&cr(U,Ne),ve}for(ge=u(ge);!Ye.done;Ne++,Ye=j.next())Ye=X(ge,U,Ne,Ye.value,J),Ye!==null&&(i&&Ye.alternate!==null&&ge.delete(Ye.key===null?Ne:Ye.key),P=m(Ye,P,Ne),Ge===null?ve=Ye:Ge.sibling=Ye,Ge=Ye);return i&&ge.forEach(function(GC){return s(U,GC)}),Fe&&cr(U,Ne),ve}function rt(U,P,j,J){if(typeof j=="object"&&j!==null&&j.type===z&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case D:e:{for(var ve=j.key;P!==null;){if(P.key===ve){if(ve=j.type,ve===z){if(P.tag===7){o(U,P.sibling),J=f(P,j.props.children),J.return=U,U=J;break e}}else if(P.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===A&&ha(ve)===P.type){o(U,P.sibling),J=f(P,j.props),Bl(J,j),J.return=U,U=J;break e}o(U,P);break}else s(U,P);P=P.sibling}j.type===z?(J=aa(j.props.children,U.mode,J,j.key),J.return=U,U=J):(J=Lc(j.type,j.key,j.props,null,U.mode,J),Bl(J,j),J.return=U,U=J)}return _(U);case L:e:{for(ve=j.key;P!==null;){if(P.key===ve)if(P.tag===4&&P.stateNode.containerInfo===j.containerInfo&&P.stateNode.implementation===j.implementation){o(U,P.sibling),J=f(P,j.children||[]),J.return=U,U=J;break e}else{o(U,P);break}else s(U,P);P=P.sibling}J=Dd(j,U.mode,J),J.return=U,U=J}return _(U);case A:return j=ha(j),rt(U,P,j,J)}if(Xe(j))return de(U,P,j,J);if(M(j)){if(ve=M(j),typeof ve!="function")throw Error(r(150));return j=ve.call(j),Te(U,P,j,J)}if(typeof j.then=="function")return rt(U,P,qc(j),J);if(j.$$typeof===Z)return rt(U,P,Bc(U,j),J);Gc(U,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,P!==null&&P.tag===6?(o(U,P.sibling),J=f(P,j),J.return=U,U=J):(o(U,P),J=Id(j,U.mode,J),J.return=U,U=J),_(U)):o(U,P)}return function(U,P,j,J){try{zl=0;var ve=rt(U,P,j,J);return yo=null,ve}catch(ge){if(ge===go||ge===Fc)throw ge;var Ge=xn(29,ge,null,U.mode);return Ge.lanes=J,Ge.return=U,Ge}}}var da=Rv(!0),Iv=Rv(!1),$r=!1;function jd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fd(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Wr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Zr(i,s,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Qe&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Vc(i),hv(i,null,o),s}return Mc(i,u,s,o),Vc(i)}function jl(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,ml(i,o)}}function Hd(i,s){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?f=m=s:m=m.next=s}else f=m=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var qd=!1;function Fl(){if(qd){var i=po;if(i!==null)throw i}}function Hl(i,s,o,u){qd=!1;var f=i.updateQueue;$r=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var O=S,H=O.next;O.next=null,_===null?m=H:_.next=H,_=O;var W=i.alternate;W!==null&&(W=W.updateQueue,S=W.lastBaseUpdate,S!==_&&(S===null?W.firstBaseUpdate=H:S.next=H,W.lastBaseUpdate=O))}if(m!==null){var te=f.baseState;_=0,W=H=O=null,S=m;do{var q=S.lane&-536870913,X=q!==S.lane;if(X?(Le&q)===q:(u&q)===q){q!==0&&q===mo&&(qd=!0),W!==null&&(W=W.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var de=i,Te=S;q=s;var rt=o;switch(Te.tag){case 1:if(de=Te.payload,typeof de=="function"){te=de.call(rt,te,q);break e}te=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=Te.payload,q=typeof de=="function"?de.call(rt,te,q):de,q==null)break e;te=E({},te,q);break e;case 2:$r=!0}}q=S.callback,q!==null&&(i.flags|=64,X&&(i.flags|=8192),X=f.callbacks,X===null?f.callbacks=[q]:X.push(q))}else X={lane:q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},W===null?(H=W=X,O=te):W=W.next=X,_|=q;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;X=S,S=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);W===null&&(O=te),f.baseState=O,f.firstBaseUpdate=H,f.lastBaseUpdate=W,m===null&&(f.shared.lanes=0),is|=_,i.lanes=_,i.memoizedState=te}}function Dv(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function Ov(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)Dv(o[i],s)}var vo=x(null),Yc=x(0);function Nv(i,s){i=Er,ae(Yc,i),ae(vo,s),Er=i|s.baseLanes}function Gd(){ae(Yc,Er),ae(vo,vo.current)}function Yd(){Er=Yc.current,ee(vo),ee(Yc)}var Pn=x(null),Qn=null;function Jr(i){var s=i.alternate;ae(wt,wt.current&1),ae(Pn,i),Qn===null&&(s===null||vo.current!==null||s.memoizedState!==null)&&(Qn=i)}function Xd(i){ae(wt,wt.current),ae(Pn,i),Qn===null&&(Qn=i)}function xv(i){i.tag===22?(ae(wt,wt.current),ae(Pn,i),Qn===null&&(Qn=i)):es()}function es(){ae(wt,wt.current),ae(Pn,Pn.current)}function kn(i){ee(Pn),Qn===i&&(Qn=null),ee(wt)}var wt=x(0);function Xc(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Jm(o)||ep(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var dr=0,Oe=null,nt=null,kt=null,Kc=!1,_o=!1,ma=!1,Qc=0,ql=0,To=null,MA=0;function gt(){throw Error(r(321))}function Kd(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!Nn(i[o],s[o]))return!1;return!0}function Qd(i,s,o,u,f,m){return dr=m,Oe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Q.H=i===null||i.memoizedState===null?p_:cm,ma=!1,m=o(u,f),ma=!1,_o&&(m=kv(s,o,u,f)),Pv(i),m}function Pv(i){Q.H=Xl;var s=nt!==null&&nt.next!==null;if(dr=0,kt=nt=Oe=null,Kc=!1,ql=0,To=null,s)throw Error(r(300));i===null||Mt||(i=i.dependencies,i!==null&&zc(i)&&(Mt=!0))}function kv(i,s,o,u){Oe=i;var f=0;do{if(_o&&(To=null),ql=0,_o=!1,25<=f)throw Error(r(301));if(f+=1,kt=nt=null,i.updateQueue!=null){var m=i.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Q.H=g_,m=s(o,u)}while(_o);return m}function VA(){var i=Q.H,s=i.useState()[0];return s=typeof s.then=="function"?Gl(s):s,i=i.useState()[0],(nt!==null?nt.memoizedState:null)!==i&&(Oe.flags|=1024),s}function $d(){var i=Qc!==0;return Qc=0,i}function Wd(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function Zd(i){if(Kc){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Kc=!1}dr=0,kt=nt=Oe=null,_o=!1,ql=Qc=0,To=null}function yn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Oe.memoizedState=kt=i:kt=kt.next=i,kt}function At(){if(nt===null){var i=Oe.alternate;i=i!==null?i.memoizedState:null}else i=nt.next;var s=kt===null?Oe.memoizedState:kt.next;if(s!==null)kt=s,nt=i;else{if(i===null)throw Oe.alternate===null?Error(r(467)):Error(r(310));nt=i,i={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},kt===null?Oe.memoizedState=kt=i:kt=kt.next=i}return kt}function $c(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gl(i){var s=ql;return ql+=1,To===null&&(To=[]),i=wv(To,i,s),s=Oe,(kt===null?s.memoizedState:kt.next)===null&&(s=s.alternate,Q.H=s===null||s.memoizedState===null?p_:cm),i}function Wc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Gl(i);if(i.$$typeof===Z)return rn(i)}throw Error(r(438,String(i)))}function Jd(i){var s=null,o=Oe.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Oe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=$c(),Oe.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),u=0;u<i;u++)o[u]=k;return s.index++,o}function mr(i,s){return typeof s=="function"?s(i):s}function Zc(i){var s=At();return em(s,nt,i)}function em(i,s,o){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=i.baseQueue,m=u.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}s.baseQueue=f=m,u.pending=null}if(m=i.baseState,f===null)i.memoizedState=m;else{s=f.next;var S=_=null,O=null,H=s,W=!1;do{var te=H.lane&-536870913;if(te!==H.lane?(Le&te)===te:(dr&te)===te){var q=H.revertLane;if(q===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),te===mo&&(W=!0);else if((dr&q)===q){H=H.next,q===mo&&(W=!0);continue}else te={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(S=O=te,_=m):O=O.next=te,Oe.lanes|=q,is|=q;te=H.action,ma&&o(m,te),m=H.hasEagerState?H.eagerState:o(m,te)}else q={lane:te,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(S=O=q,_=m):O=O.next=q,Oe.lanes|=te,is|=te;H=H.next}while(H!==null&&H!==s);if(O===null?_=m:O.next=S,!Nn(m,i.memoizedState)&&(Mt=!0,W&&(o=po,o!==null)))throw o;i.memoizedState=m,i.baseState=_,i.baseQueue=O,u.lastRenderedState=m}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function tm(i){var s=At(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var u=o.dispatch,f=o.pending,m=s.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do m=i(m,_.action),_=_.next;while(_!==f);Nn(m,s.memoizedState)||(Mt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function Mv(i,s,o){var u=Oe,f=At(),m=Fe;if(m){if(o===void 0)throw Error(r(407));o=o()}else o=s();var _=!Nn((nt||f).memoizedState,o);if(_&&(f.memoizedState=o,Mt=!0),f=f.queue,rm(Uv.bind(null,u,f,i),[i]),f.getSnapshot!==s||_||kt!==null&&kt.memoizedState.tag&1){if(u.flags|=2048,Eo(9,{destroy:void 0},Lv.bind(null,u,f,o,s),null),st===null)throw Error(r(349));m||(dr&127)!==0||Vv(u,s,o)}return o}function Vv(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=Oe.updateQueue,s===null?(s=$c(),Oe.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function Lv(i,s,o,u){s.value=o,s.getSnapshot=u,zv(s)&&Bv(i)}function Uv(i,s,o){return o(function(){zv(s)&&Bv(i)})}function zv(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!Nn(i,o)}catch{return!0}}function Bv(i){var s=sa(i,2);s!==null&&Cn(s,i,2)}function nm(i){var s=yn();if(typeof i=="function"){var o=i;if(i=o(),ma){zn(!0);try{o()}finally{zn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:i},s}function jv(i,s,o,u){return i.baseState=o,em(i,nt,typeof u=="function"?u:mr)}function LA(i,s,o,u,f){if(th(i))throw Error(r(485));if(i=s.action,i!==null){var m={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};Q.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,Fv(s,m)):(m.next=o.next,s.pending=o.next=m)}}function Fv(i,s){var o=s.action,u=s.payload,f=i.state;if(s.isTransition){var m=Q.T,_={};Q.T=_;try{var S=o(f,u),O=Q.S;O!==null&&O(_,S),Hv(i,s,S)}catch(H){im(i,s,H)}finally{m!==null&&_.types!==null&&(m.types=_.types),Q.T=m}}else try{m=o(f,u),Hv(i,s,m)}catch(H){im(i,s,H)}}function Hv(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){qv(i,s,u)},function(u){return im(i,s,u)}):qv(i,s,o)}function qv(i,s,o){s.status="fulfilled",s.value=o,Gv(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,Fv(i,o)))}function im(i,s,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,Gv(s),s=s.next;while(s!==u)}i.action=null}function Gv(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Yv(i,s){return s}function Xv(i,s){if(Fe){var o=st.formState;if(o!==null){e:{var u=Oe;if(Fe){if(lt){t:{for(var f=lt,m=Kn;f.nodeType!==8;){if(!m){f=null;break t}if(f=$n(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){lt=$n(f.nextSibling),u=f.data==="F!";break e}}Kr(u)}u=!1}u&&(s=o[0])}}return o=yn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yv,lastRenderedState:s},o.queue=u,o=f_.bind(null,Oe,u),u.dispatch=o,u=nm(!1),m=um.bind(null,Oe,!1,u.queue),u=yn(),f={state:s,dispatch:null,action:i,pending:null},u.queue=f,o=LA.bind(null,Oe,f,m,o),f.dispatch=o,u.memoizedState=i,[s,o,!1]}function Kv(i){var s=At();return Qv(s,nt,i)}function Qv(i,s,o){if(s=em(i,s,Yv)[0],i=Zc(mr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Gl(s)}catch(_){throw _===go?Fc:_}else u=s;s=At();var f=s.queue,m=f.dispatch;return o!==s.memoizedState&&(Oe.flags|=2048,Eo(9,{destroy:void 0},UA.bind(null,f,o),null)),[u,m,i]}function UA(i,s){i.action=s}function $v(i){var s=At(),o=nt;if(o!==null)return Qv(s,o,i);At(),s=s.memoizedState,o=At();var u=o.queue.dispatch;return o.memoizedState=i,[s,u,!1]}function Eo(i,s,o,u){return i={tag:i,create:o,deps:u,inst:s,next:null},s=Oe.updateQueue,s===null&&(s=$c(),Oe.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,s.lastEffect=i),i}function Wv(){return At().memoizedState}function Jc(i,s,o,u){var f=yn();Oe.flags|=i,f.memoizedState=Eo(1|s,{destroy:void 0},o,u===void 0?null:u)}function eh(i,s,o,u){var f=At();u=u===void 0?null:u;var m=f.memoizedState.inst;nt!==null&&u!==null&&Kd(u,nt.memoizedState.deps)?f.memoizedState=Eo(s,m,o,u):(Oe.flags|=i,f.memoizedState=Eo(1|s,m,o,u))}function Zv(i,s){Jc(8390656,8,i,s)}function rm(i,s){eh(2048,8,i,s)}function zA(i){Oe.flags|=4;var s=Oe.updateQueue;if(s===null)s=$c(),Oe.updateQueue=s,s.events=[i];else{var o=s.events;o===null?s.events=[i]:o.push(i)}}function Jv(i){var s=At().memoizedState;return zA({ref:s,nextImpl:i}),function(){if((Qe&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function e_(i,s){return eh(4,2,i,s)}function t_(i,s){return eh(4,4,i,s)}function n_(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function i_(i,s,o){o=o!=null?o.concat([i]):null,eh(4,4,n_.bind(null,s,i),o)}function sm(){}function r_(i,s){var o=At();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Kd(s,u[1])?u[0]:(o.memoizedState=[i,s],i)}function s_(i,s){var o=At();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Kd(s,u[1]))return u[0];if(u=i(),ma){zn(!0);try{i()}finally{zn(!1)}}return o.memoizedState=[u,s],u}function am(i,s,o){return o===void 0||(dr&1073741824)!==0&&(Le&261930)===0?i.memoizedState=s:(i.memoizedState=o,i=a0(),Oe.lanes|=i,is|=i,o)}function a_(i,s,o,u){return Nn(o,s)?o:vo.current!==null?(i=am(i,o,u),Nn(i,s)||(Mt=!0),i):(dr&42)===0||(dr&1073741824)!==0&&(Le&261930)===0?(Mt=!0,i.memoizedState=o):(i=a0(),Oe.lanes|=i,is|=i,s)}function o_(i,s,o,u,f){var m=re.p;re.p=m!==0&&8>m?m:8;var _=Q.T,S={};Q.T=S,um(i,!1,s,o);try{var O=f(),H=Q.S;if(H!==null&&H(S,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var W=kA(O,u);Yl(i,s,W,Ln(i))}else Yl(i,s,u,Ln(i))}catch(te){Yl(i,s,{then:function(){},status:"rejected",reason:te},Ln())}finally{re.p=m,_!==null&&S.types!==null&&(_.types=S.types),Q.T=_}}function BA(){}function om(i,s,o,u){if(i.tag!==5)throw Error(r(476));var f=l_(i).queue;o_(i,f,s,pe,o===null?BA:function(){return u_(i),o(u)})}function l_(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:pe},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function u_(i){var s=l_(i);s.next===null&&(s=i.alternate.memoizedState),Yl(i,s.next.queue,{},Ln())}function lm(){return rn(uu)}function c_(){return At().memoizedState}function h_(){return At().memoizedState}function jA(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=Ln();i=Wr(o);var u=Zr(s,i,o);u!==null&&(Cn(u,s,o),jl(u,s,o)),s={cache:Ld()},i.payload=s;return}s=s.return}}function FA(i,s,o){var u=Ln();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},th(i)?d_(s,o):(o=Cd(i,s,o,u),o!==null&&(Cn(o,i,u),m_(o,s,u)))}function f_(i,s,o){var u=Ln();Yl(i,s,o,u)}function Yl(i,s,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(th(i))d_(s,f);else{var m=i.alternate;if(i.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,S=m(_,o);if(f.hasEagerState=!0,f.eagerState=S,Nn(S,_))return Mc(i,s,f,0),st===null&&kc(),!1}catch{}if(o=Cd(i,s,f,u),o!==null)return Cn(o,i,u),m_(o,s,u),!0}return!1}function um(i,s,o,u){if(u={lane:2,revertLane:jm(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},th(i)){if(s)throw Error(r(479))}else s=Cd(i,o,u,2),s!==null&&Cn(s,i,2)}function th(i){var s=i.alternate;return i===Oe||s!==null&&s===Oe}function d_(i,s){_o=Kc=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function m_(i,s,o){if((o&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,ml(i,o)}}var Xl={readContext:rn,use:Wc,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};Xl.useEffectEvent=gt;var p_={readContext:rn,use:Wc,useCallback:function(i,s){return yn().memoizedState=[i,s===void 0?null:s],i},useContext:rn,useEffect:Zv,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,Jc(4194308,4,n_.bind(null,s,i),o)},useLayoutEffect:function(i,s){return Jc(4194308,4,i,s)},useInsertionEffect:function(i,s){Jc(4,2,i,s)},useMemo:function(i,s){var o=yn();s=s===void 0?null:s;var u=i();if(ma){zn(!0);try{i()}finally{zn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(i,s,o){var u=yn();if(o!==void 0){var f=o(s);if(ma){zn(!0);try{o(s)}finally{zn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=FA.bind(null,Oe,i),[u.memoizedState,i]},useRef:function(i){var s=yn();return i={current:i},s.memoizedState=i},useState:function(i){i=nm(i);var s=i.queue,o=f_.bind(null,Oe,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:sm,useDeferredValue:function(i,s){var o=yn();return am(o,i,s)},useTransition:function(){var i=nm(!1);return i=o_.bind(null,Oe,i.queue,!0,!1),yn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var u=Oe,f=yn();if(Fe){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),st===null)throw Error(r(349));(Le&127)!==0||Vv(u,s,o)}f.memoizedState=o;var m={value:o,getSnapshot:s};return f.queue=m,Zv(Uv.bind(null,u,m,i),[i]),u.flags|=2048,Eo(9,{destroy:void 0},Lv.bind(null,u,m,o,s),null),o},useId:function(){var i=yn(),s=st.identifierPrefix;if(Fe){var o=Hi,u=Fi;o=(u&~(1<<32-St(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Qc++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=MA++,s="_"+s+"r_"+o.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:lm,useFormState:Xv,useActionState:Xv,useOptimistic:function(i){var s=yn();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=um.bind(null,Oe,!0,o),o.dispatch=s,[i,s]},useMemoCache:Jd,useCacheRefresh:function(){return yn().memoizedState=jA.bind(null,Oe)},useEffectEvent:function(i){var s=yn(),o={impl:i};return s.memoizedState=o,function(){if((Qe&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},cm={readContext:rn,use:Wc,useCallback:r_,useContext:rn,useEffect:rm,useImperativeHandle:i_,useInsertionEffect:e_,useLayoutEffect:t_,useMemo:s_,useReducer:Zc,useRef:Wv,useState:function(){return Zc(mr)},useDebugValue:sm,useDeferredValue:function(i,s){var o=At();return a_(o,nt.memoizedState,i,s)},useTransition:function(){var i=Zc(mr)[0],s=At().memoizedState;return[typeof i=="boolean"?i:Gl(i),s]},useSyncExternalStore:Mv,useId:c_,useHostTransitionStatus:lm,useFormState:Kv,useActionState:Kv,useOptimistic:function(i,s){var o=At();return jv(o,nt,i,s)},useMemoCache:Jd,useCacheRefresh:h_};cm.useEffectEvent=Jv;var g_={readContext:rn,use:Wc,useCallback:r_,useContext:rn,useEffect:rm,useImperativeHandle:i_,useInsertionEffect:e_,useLayoutEffect:t_,useMemo:s_,useReducer:tm,useRef:Wv,useState:function(){return tm(mr)},useDebugValue:sm,useDeferredValue:function(i,s){var o=At();return nt===null?am(o,i,s):a_(o,nt.memoizedState,i,s)},useTransition:function(){var i=tm(mr)[0],s=At().memoizedState;return[typeof i=="boolean"?i:Gl(i),s]},useSyncExternalStore:Mv,useId:c_,useHostTransitionStatus:lm,useFormState:$v,useActionState:$v,useOptimistic:function(i,s){var o=At();return nt!==null?jv(o,nt,i,s):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:Jd,useCacheRefresh:h_};g_.useEffectEvent=Jv;function hm(i,s,o,u){s=i.memoizedState,o=o(u,s),o=o==null?s:E({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var fm={enqueueSetState:function(i,s,o){i=i._reactInternals;var u=Ln(),f=Wr(u);f.payload=s,o!=null&&(f.callback=o),s=Zr(i,f,u),s!==null&&(Cn(s,i,u),jl(s,i,u))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var u=Ln(),f=Wr(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Zr(i,f,u),s!==null&&(Cn(s,i,u),jl(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=Ln(),u=Wr(o);u.tag=2,s!=null&&(u.callback=s),s=Zr(i,u,o),s!==null&&(Cn(s,i,o),jl(s,i,o))}};function y_(i,s,o,u,f,m,_){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,m,_):s.prototype&&s.prototype.isPureReactComponent?!Pl(o,u)||!Pl(f,m):!0}function v_(i,s,o,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==i&&fm.enqueueReplaceState(s,s.state,null)}function pa(i,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(i=i.defaultProps){o===s&&(o=E({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}function __(i){Pc(i)}function T_(i){console.error(i)}function E_(i){Pc(i)}function nh(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function S_(i,s,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function dm(i,s,o){return o=Wr(o),o.tag=3,o.payload={element:null},o.callback=function(){nh(i,s)},o}function b_(i){return i=Wr(i),i.tag=3,i}function w_(i,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;i.payload=function(){return f(m)},i.callback=function(){S_(s,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(i.callback=function(){S_(s,o,u),typeof f!="function"&&(rs===null?rs=new Set([this]):rs.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function HA(i,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&fo(s,o,f,!0),o=Pn.current,o!==null){switch(o.tag){case 31:case 13:return Qn===null?mh():o.alternate===null&&yt===0&&(yt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Hc?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Um(i,u,f)),!1;case 22:return o.flags|=65536,u===Hc?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Um(i,u,f)),!1}throw Error(r(435,o.tag))}return Um(i,u,f),mh(),!1}if(Fe)return s=Pn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==xd&&(i=Error(r(422),{cause:u}),Vl(Gn(i,o)))):(u!==xd&&(s=Error(r(423),{cause:u}),Vl(Gn(s,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=Gn(u,o),f=dm(i.stateNode,u,f),Hd(i,f),yt!==4&&(yt=2)),!1;var m=Error(r(520),{cause:u});if(m=Gn(m,o),tu===null?tu=[m]:tu.push(m),yt!==4&&(yt=2),s===null)return!0;u=Gn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=dm(o.stateNode,u,i),Hd(o,i),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(rs===null||!rs.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=b_(f),w_(f,i,o,u),Hd(o,f),!1}o=o.return}while(o!==null);return!1}var mm=Error(r(461)),Mt=!1;function sn(i,s,o,u){s.child=i===null?Iv(s,null,o,u):da(s,i.child,o,u)}function A_(i,s,o,u,f){o=o.render;var m=s.ref;if("ref"in u){var _={};for(var S in u)S!=="ref"&&(_[S]=u[S])}else _=u;return ua(s),u=Qd(i,s,o,_,m,f),S=$d(),i!==null&&!Mt?(Wd(i,s,f),pr(i,s,f)):(Fe&&S&&Od(s),s.flags|=1,sn(i,s,u,f),s.child)}function C_(i,s,o,u,f){if(i===null){var m=o.type;return typeof m=="function"&&!Rd(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,R_(i,s,m,u,f)):(i=Lc(o.type,null,u,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(m=i.child,!Sm(i,f)){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:Pl,o(_,u)&&i.ref===s.ref)return pr(i,s,f)}return s.flags|=1,i=ur(m,u),i.ref=s.ref,i.return=s,s.child=i}function R_(i,s,o,u,f){if(i!==null){var m=i.memoizedProps;if(Pl(m,u)&&i.ref===s.ref)if(Mt=!1,s.pendingProps=u=m,Sm(i,f))(i.flags&131072)!==0&&(Mt=!0);else return s.lanes=i.lanes,pr(i,s,f)}return pm(i,s,o,u,f)}function I_(i,s,o,u){var f=u.children,m=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,i!==null){for(u=s.child=i.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,s.child=null;return D_(i,s,m,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&jc(s,m!==null?m.cachePool:null),m!==null?Nv(s,m):Gd(),xv(s);else return u=s.lanes=536870912,D_(i,s,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(jc(s,m.cachePool),Nv(s,m),es(),s.memoizedState=null):(i!==null&&jc(s,null),Gd(),es());return sn(i,s,f,o),s.child}function Kl(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function D_(i,s,o,u,f){var m=zd();return m=m===null?null:{parent:Pt._currentValue,pool:m},s.memoizedState={baseLanes:o,cachePool:m},i!==null&&jc(s,null),Gd(),xv(s),i!==null&&fo(i,s,u,!0),s.childLanes=f,null}function ih(i,s){return s=sh({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function O_(i,s,o){return da(s,i.child,null,o),i=ih(s,s.pendingProps),i.flags|=2,kn(s),s.memoizedState=null,i}function qA(i,s,o){var u=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Fe){if(u.mode==="hidden")return i=ih(s,u),s.lanes=536870912,Kl(null,i);if(Xd(s),(i=lt)?(i=F0(i,Kn),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Yr!==null?{id:Fi,overflow:Hi}:null,retryLane:536870912,hydrationErrors:null},o=dv(i),o.return=s,s.child=o,nn=s,lt=null)):i=null,i===null)throw Kr(s);return s.lanes=536870912,null}return ih(s,u)}var m=i.memoizedState;if(m!==null){var _=m.dehydrated;if(Xd(s),f)if(s.flags&256)s.flags&=-257,s=O_(i,s,o);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(r(558));else if(Mt||fo(i,s,o,!1),f=(o&i.childLanes)!==0,Mt||f){if(u=st,u!==null&&(_=pl(u,o),_!==0&&_!==m.retryLane))throw m.retryLane=_,sa(i,_),Cn(u,i,_),mm;mh(),s=O_(i,s,o)}else i=m.treeContext,lt=$n(_.nextSibling),nn=s,Fe=!0,Xr=null,Kn=!1,i!==null&&gv(s,i),s=ih(s,u),s.flags|=4096;return s}return i=ur(i.child,{mode:u.mode,children:u.children}),i.ref=s.ref,s.child=i,i.return=s,i}function rh(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(s.flags|=4194816)}}function pm(i,s,o,u,f){return ua(s),o=Qd(i,s,o,u,void 0,f),u=$d(),i!==null&&!Mt?(Wd(i,s,f),pr(i,s,f)):(Fe&&u&&Od(s),s.flags|=1,sn(i,s,o,f),s.child)}function N_(i,s,o,u,f,m){return ua(s),s.updateQueue=null,o=kv(s,u,o,f),Pv(i),u=$d(),i!==null&&!Mt?(Wd(i,s,m),pr(i,s,m)):(Fe&&u&&Od(s),s.flags|=1,sn(i,s,o,m),s.child)}function x_(i,s,o,u,f){if(ua(s),s.stateNode===null){var m=lo,_=o.contextType;typeof _=="object"&&_!==null&&(m=rn(_)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=fm,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},jd(s),_=o.contextType,m.context=typeof _=="object"&&_!==null?rn(_):lo,m.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(hm(s,o,_,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&fm.enqueueReplaceState(m,m.state,null),Hl(s,u,m,f),Fl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){m=s.stateNode;var S=s.memoizedProps,O=pa(o,S);m.props=O;var H=m.context,W=o.contextType;_=lo,typeof W=="object"&&W!==null&&(_=rn(W));var te=o.getDerivedStateFromProps;W=typeof te=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,W||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||H!==_)&&v_(s,m,u,_),$r=!1;var q=s.memoizedState;m.state=q,Hl(s,u,m,f),Fl(),H=s.memoizedState,S||q!==H||$r?(typeof te=="function"&&(hm(s,o,te,u),H=s.memoizedState),(O=$r||y_(s,o,O,u,q,H,_))?(W||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=H),m.props=u,m.state=H,m.context=_,u=O):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,Fd(i,s),_=s.memoizedProps,W=pa(o,_),m.props=W,te=s.pendingProps,q=m.context,H=o.contextType,O=lo,typeof H=="object"&&H!==null&&(O=rn(H)),S=o.getDerivedStateFromProps,(H=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==te||q!==O)&&v_(s,m,u,O),$r=!1,q=s.memoizedState,m.state=q,Hl(s,u,m,f),Fl();var X=s.memoizedState;_!==te||q!==X||$r||i!==null&&i.dependencies!==null&&zc(i.dependencies)?(typeof S=="function"&&(hm(s,o,S,u),X=s.memoizedState),(W=$r||y_(s,o,W,u,q,X,O)||i!==null&&i.dependencies!==null&&zc(i.dependencies))?(H||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,X,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,X,O)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===i.memoizedProps&&q===i.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&q===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=X),m.props=u,m.state=X,m.context=O,u=W):(typeof m.componentDidUpdate!="function"||_===i.memoizedProps&&q===i.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&q===i.memoizedState||(s.flags|=1024),u=!1)}return m=u,rh(i,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,i!==null&&u?(s.child=da(s,i.child,null,f),s.child=da(s,null,o,f)):sn(i,s,o,f),s.memoizedState=m.state,i=s.child):i=pr(i,s,f),i}function P_(i,s,o,u){return oa(),s.flags|=256,sn(i,s,o,u),s.child}var gm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ym(i){return{baseLanes:i,cachePool:Sv()}}function vm(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=Vn),i}function k_(i,s,o){var u=s.pendingProps,f=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=i!==null&&i.memoizedState===null?!1:(wt.current&2)!==0),_&&(f=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,i===null){if(Fe){if(f?Jr(s):es(),(i=lt)?(i=F0(i,Kn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Yr!==null?{id:Fi,overflow:Hi}:null,retryLane:536870912,hydrationErrors:null},o=dv(i),o.return=s,s.child=o,nn=s,lt=null)):i=null,i===null)throw Kr(s);return ep(i)?s.lanes=32:s.lanes=536870912,null}var S=u.children;return u=u.fallback,f?(es(),f=s.mode,S=sh({mode:"hidden",children:S},f),u=aa(u,f,o,null),S.return=s,u.return=s,S.sibling=u,s.child=S,u=s.child,u.memoizedState=ym(o),u.childLanes=vm(i,_,o),s.memoizedState=gm,Kl(null,u)):(Jr(s),_m(s,S))}var O=i.memoizedState;if(O!==null&&(S=O.dehydrated,S!==null)){if(m)s.flags&256?(Jr(s),s.flags&=-257,s=Tm(i,s,o)):s.memoizedState!==null?(es(),s.child=i.child,s.flags|=128,s=null):(es(),S=u.fallback,f=s.mode,u=sh({mode:"visible",children:u.children},f),S=aa(S,f,o,null),S.flags|=2,u.return=s,S.return=s,u.sibling=S,s.child=u,da(s,i.child,null,o),u=s.child,u.memoizedState=ym(o),u.childLanes=vm(i,_,o),s.memoizedState=gm,s=Kl(null,u));else if(Jr(s),ep(S)){if(_=S.nextSibling&&S.nextSibling.dataset,_)var H=_.dgst;_=H,u=Error(r(419)),u.stack="",u.digest=_,Vl({value:u,source:null,stack:null}),s=Tm(i,s,o)}else if(Mt||fo(i,s,o,!1),_=(o&i.childLanes)!==0,Mt||_){if(_=st,_!==null&&(u=pl(_,o),u!==0&&u!==O.retryLane))throw O.retryLane=u,sa(i,u),Cn(_,i,u),mm;Jm(S)||mh(),s=Tm(i,s,o)}else Jm(S)?(s.flags|=192,s.child=i.child,s=null):(i=O.treeContext,lt=$n(S.nextSibling),nn=s,Fe=!0,Xr=null,Kn=!1,i!==null&&gv(s,i),s=_m(s,u.children),s.flags|=4096);return s}return f?(es(),S=u.fallback,f=s.mode,O=i.child,H=O.sibling,u=ur(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,H!==null?S=ur(H,S):(S=aa(S,f,o,null),S.flags|=2),S.return=s,u.return=s,u.sibling=S,s.child=u,Kl(null,u),u=s.child,S=i.child.memoizedState,S===null?S=ym(o):(f=S.cachePool,f!==null?(O=Pt._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=Sv(),S={baseLanes:S.baseLanes|o,cachePool:f}),u.memoizedState=S,u.childLanes=vm(i,_,o),s.memoizedState=gm,Kl(i.child,u)):(Jr(s),o=i.child,i=o.sibling,o=ur(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,i!==null&&(_=s.deletions,_===null?(s.deletions=[i],s.flags|=16):_.push(i)),s.child=o,s.memoizedState=null,o)}function _m(i,s){return s=sh({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function sh(i,s){return i=xn(22,i,null,s),i.lanes=0,i}function Tm(i,s,o){return da(s,i.child,null,o),i=_m(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function M_(i,s,o){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),Md(i.return,s,o)}function Em(i,s,o,u,f,m){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:m}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=f,_.treeForkCount=m)}function V_(i,s,o){var u=s.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var _=wt.current,S=(_&2)!==0;if(S?(_=_&1|2,s.flags|=128):_&=1,ae(wt,_),sn(i,s,u,o),u=Fe?Ml:0,!S&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&M_(i,o,s);else if(i.tag===19)M_(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(f){case"forwards":for(o=s.child,f=null;o!==null;)i=o.alternate,i!==null&&Xc(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Em(s,!1,f,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&Xc(i)===null){s.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}Em(s,!0,o,null,m,u);break;case"together":Em(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function pr(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),is|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(fo(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,o=ur(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=ur(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function Sm(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&zc(i)))}function GA(i,s,o){switch(s.tag){case 3:le(s,s.stateNode.containerInfo),Qr(s,Pt,i.memoizedState.cache),oa();break;case 27:case 5:xe(s);break;case 4:le(s,s.stateNode.containerInfo);break;case 10:Qr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Xd(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Jr(s),s.flags|=128,null):(o&s.child.childLanes)!==0?k_(i,s,o):(Jr(s),i=pr(i,s,o),i!==null?i.sibling:null);Jr(s);break;case 19:var f=(i.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(fo(i,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return V_(i,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ae(wt,wt.current),u)break;return null;case 22:return s.lanes=0,I_(i,s,o,s.pendingProps);case 24:Qr(s,Pt,i.memoizedState.cache)}return pr(i,s,o)}function L_(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)Mt=!0;else{if(!Sm(i,o)&&(s.flags&128)===0)return Mt=!1,GA(i,s,o);Mt=(i.flags&131072)!==0}else Mt=!1,Fe&&(s.flags&1048576)!==0&&pv(s,Ml,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(i=ha(s.elementType),s.type=i,typeof i=="function")Rd(i)?(u=pa(i,u),s.tag=1,s=x_(null,s,i,u,o)):(s.tag=0,s=pm(null,s,i,u,o));else{if(i!=null){var f=i.$$typeof;if(f===ce){s.tag=11,s=A_(null,s,i,u,o);break e}else if(f===C){s.tag=14,s=C_(null,s,i,u,o);break e}}throw s=We(i)||i,Error(r(306,s,""))}}return s;case 0:return pm(i,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=pa(u,s.pendingProps),x_(i,s,u,f,o);case 3:e:{if(le(s,s.stateNode.containerInfo),i===null)throw Error(r(387));u=s.pendingProps;var m=s.memoizedState;f=m.element,Fd(i,s),Hl(s,u,null,o);var _=s.memoizedState;if(u=_.cache,Qr(s,Pt,u),u!==m.cache&&Vd(s,[Pt],o,!0),Fl(),u=_.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=P_(i,s,u,o);break e}else if(u!==f){f=Gn(Error(r(424)),s),Vl(f),s=P_(i,s,u,o);break e}else for(i=s.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,lt=$n(i.firstChild),nn=s,Fe=!0,Xr=null,Kn=!0,o=Iv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(oa(),u===f){s=pr(i,s,o);break e}sn(i,s,u,o)}s=s.child}return s;case 26:return rh(i,s),i===null?(o=K0(s.type,null,s.pendingProps,null))?s.memoizedState=o:Fe||(o=s.type,i=s.pendingProps,u=Eh(Ae.current).createElement(o),u[Ot]=s,u[Xt]=i,an(u,o,i),Nt(u),s.stateNode=u):s.memoizedState=K0(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return xe(s),i===null&&Fe&&(u=s.stateNode=G0(s.type,s.pendingProps,Ae.current),nn=s,Kn=!0,f=lt,ls(s.type)?(tp=f,lt=$n(u.firstChild)):lt=f),sn(i,s,s.pendingProps.children,o),rh(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Fe&&((f=u=lt)&&(u=EC(u,s.type,s.pendingProps,Kn),u!==null?(s.stateNode=u,nn=s,lt=$n(u.firstChild),Kn=!1,f=!0):f=!1),f||Kr(s)),xe(s),f=s.type,m=s.pendingProps,_=i!==null?i.memoizedProps:null,u=m.children,$m(f,m)?u=null:_!==null&&$m(f,_)&&(s.flags|=32),s.memoizedState!==null&&(f=Qd(i,s,VA,null,null,o),uu._currentValue=f),rh(i,s),sn(i,s,u,o),s.child;case 6:return i===null&&Fe&&((i=o=lt)&&(o=SC(o,s.pendingProps,Kn),o!==null?(s.stateNode=o,nn=s,lt=null,i=!0):i=!1),i||Kr(s)),null;case 13:return k_(i,s,o);case 4:return le(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=da(s,null,u,o):sn(i,s,u,o),s.child;case 11:return A_(i,s,s.type,s.pendingProps,o);case 7:return sn(i,s,s.pendingProps,o),s.child;case 8:return sn(i,s,s.pendingProps.children,o),s.child;case 12:return sn(i,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Qr(s,s.type,u.value),sn(i,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,ua(s),f=rn(f),u=u(f),s.flags|=1,sn(i,s,u,o),s.child;case 14:return C_(i,s,s.type,s.pendingProps,o);case 15:return R_(i,s,s.type,s.pendingProps,o);case 19:return V_(i,s,o);case 31:return qA(i,s,o);case 22:return I_(i,s,o,s.pendingProps);case 24:return ua(s),u=rn(Pt),i===null?(f=zd(),f===null&&(f=st,m=Ld(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),s.memoizedState={parent:u,cache:f},jd(s),Qr(s,Pt,f)):((i.lanes&o)!==0&&(Fd(i,s),Hl(s,null,null,o),Fl()),f=i.memoizedState,m=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Qr(s,Pt,u)):(u=m.cache,Qr(s,Pt,u),u!==f.cache&&Vd(s,[Pt],o,!0))),sn(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function gr(i){i.flags|=4}function bm(i,s,o,u,f){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(f&335544128)===f)if(i.stateNode.complete)i.flags|=8192;else if(c0())i.flags|=8192;else throw fa=Hc,Bd}else i.flags&=-16777217}function U_(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!J0(s))if(c0())i.flags|=8192;else throw fa=Hc,Bd}function ah(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?fc():536870912,i.lanes|=s,Ao|=s)}function Ql(i,s){if(!Fe)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function ut(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(s)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=o,s}function YA(i,s,o){var u=s.pendingProps;switch(Nd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(s),null;case 1:return ut(s),null;case 3:return o=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),fr(Pt),oe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(ho(s)?gr(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Pd())),ut(s),null;case 26:var f=s.type,m=s.memoizedState;return i===null?(gr(s),m!==null?(ut(s),U_(s,m)):(ut(s),bm(s,f,null,u,o))):m?m!==i.memoizedState?(gr(s),ut(s),U_(s,m)):(ut(s),s.flags&=-16777217):(i=i.memoizedProps,i!==u&&gr(s),ut(s),bm(s,f,i,u,o)),null;case 27:if(Ft(s),o=Ae.current,f=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&gr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return ut(s),null}i=ue.current,ho(s)?yv(s):(i=G0(f,u,o),s.stateNode=i,gr(s))}return ut(s),null;case 5:if(Ft(s),f=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&gr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return ut(s),null}if(m=ue.current,ho(s))yv(s);else{var _=Eh(Ae.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?_.createElement(f,{is:u.is}):_.createElement(f)}}m[Ot]=s,m[Xt]=u;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=m;e:switch(an(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&gr(s)}}return ut(s),bm(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,o),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&gr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(i=Ae.current,ho(s)){if(i=s.stateNode,o=s.memoizedProps,u=null,f=nn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[Ot]=s,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||k0(i.nodeValue,o)),i||Kr(s,!0)}else i=Eh(i).createTextNode(u),i[Ot]=s,s.stateNode=i}return ut(s),null;case 31:if(o=s.memoizedState,i===null||i.memoizedState!==null){if(u=ho(s),o!==null){if(i===null){if(!u)throw Error(r(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[Ot]=s}else oa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ut(s),i=!1}else o=Pd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=o),i=!0;if(!i)return s.flags&256?(kn(s),s):(kn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return ut(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=ho(s),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ot]=s}else oa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ut(s),f=!1}else f=Pd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(kn(s),s):(kn(s),null)}return kn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,i=i!==null&&i.memoizedState!==null,o&&(u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),o!==i&&o&&(s.child.flags|=8192),ah(s,s.updateQueue),ut(s),null);case 4:return oe(),i===null&&Gm(s.stateNode.containerInfo),ut(s),null;case 10:return fr(s.type),ut(s),null;case 19:if(ee(wt),u=s.memoizedState,u===null)return ut(s),null;if(f=(s.flags&128)!==0,m=u.rendering,m===null)if(f)Ql(u,!1);else{if(yt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(m=Xc(i),m!==null){for(s.flags|=128,Ql(u,!1),i=m.updateQueue,s.updateQueue=i,ah(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)fv(o,i),o=o.sibling;return ae(wt,wt.current&1|2),Fe&&cr(s,u.treeForkCount),s.child}i=i.sibling}u.tail!==null&&pn()>hh&&(s.flags|=128,f=!0,Ql(u,!1),s.lanes=4194304)}else{if(!f)if(i=Xc(m),i!==null){if(s.flags|=128,f=!0,i=i.updateQueue,s.updateQueue=i,ah(s,i),Ql(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!Fe)return ut(s),null}else 2*pn()-u.renderingStartTime>hh&&o!==536870912&&(s.flags|=128,f=!0,Ql(u,!1),s.lanes=4194304);u.isBackwards?(m.sibling=s.child,s.child=m):(i=u.last,i!==null?i.sibling=m:s.child=m,u.last=m)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=pn(),i.sibling=null,o=wt.current,ae(wt,f?o&1|2:o&1),Fe&&cr(s,u.treeForkCount),i):(ut(s),null);case 22:case 23:return kn(s),Yd(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(ut(s),s.subtreeFlags&6&&(s.flags|=8192)):ut(s),o=s.updateQueue,o!==null&&ah(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),i!==null&&ee(ca),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),fr(Pt),ut(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function XA(i,s){switch(Nd(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return fr(Pt),oe(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Ft(s),null;case 31:if(s.memoizedState!==null){if(kn(s),s.alternate===null)throw Error(r(340));oa()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(kn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));oa()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return ee(wt),null;case 4:return oe(),null;case 10:return fr(s.type),null;case 22:case 23:return kn(s),Yd(),i!==null&&ee(ca),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return fr(Pt),null;case 25:return null;default:return null}}function z_(i,s){switch(Nd(s),s.tag){case 3:fr(Pt),oe();break;case 26:case 27:case 5:Ft(s);break;case 4:oe();break;case 31:s.memoizedState!==null&&kn(s);break;case 13:kn(s);break;case 19:ee(wt);break;case 10:fr(s.type);break;case 22:case 23:kn(s),Yd(),i!==null&&ee(ca);break;case 24:fr(Pt)}}function $l(i,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&i)===i){u=void 0;var m=o.create,_=o.inst;u=m(),_.destroy=u}o=o.next}while(o!==f)}}catch(S){et(s,s.return,S)}}function ts(i,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&i)===i){var _=u.inst,S=_.destroy;if(S!==void 0){_.destroy=void 0,f=s;var O=o,H=S;try{H()}catch(W){et(f,O,W)}}}u=u.next}while(u!==m)}}catch(W){et(s,s.return,W)}}function B_(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{Ov(s,o)}catch(u){et(i,i.return,u)}}}function j_(i,s,o){o.props=pa(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){et(i,s,u)}}function Wl(i,s){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(f){et(i,s,f)}}function qi(i,s){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){et(i,s,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){et(i,s,f)}else o.current=null}function F_(i){var s=i.type,o=i.memoizedProps,u=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){et(i,i.return,f)}}function wm(i,s,o){try{var u=i.stateNode;pC(u,i.type,o,s),u[Xt]=s}catch(f){et(i,i.return,f)}}function H_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ls(i.type)||i.tag===4}function Am(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||H_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ls(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Cm(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(i),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=oi));else if(u!==4&&(u===27&&ls(i.type)&&(o=i.stateNode,s=null),i=i.child,i!==null))for(Cm(i,s,o),i=i.sibling;i!==null;)Cm(i,s,o),i=i.sibling}function oh(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(u!==4&&(u===27&&ls(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(oh(i,s,o),i=i.sibling;i!==null;)oh(i,s,o),i=i.sibling}function q_(i){var s=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);an(s,u,o),s[Ot]=i,s[Xt]=o}catch(m){et(i,i.return,m)}}var yr=!1,Vt=!1,Rm=!1,G_=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function KA(i,s){if(i=i.containerInfo,Km=Ih,i=iv(i),Td(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,S=-1,O=-1,H=0,W=0,te=i,q=null;t:for(;;){for(var X;te!==o||f!==0&&te.nodeType!==3||(S=_+f),te!==m||u!==0&&te.nodeType!==3||(O=_+u),te.nodeType===3&&(_+=te.nodeValue.length),(X=te.firstChild)!==null;)q=te,te=X;for(;;){if(te===i)break t;if(q===o&&++H===f&&(S=_),q===m&&++W===u&&(O=_),(X=te.nextSibling)!==null)break;te=q,q=te.parentNode}te=X}o=S===-1||O===-1?null:{start:S,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(Qm={focusedElem:i,selectionRange:o},Ih=!1,Qt=s;Qt!==null;)if(s=Qt,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,Qt=i;else for(;Qt!==null;){switch(s=Qt,m=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(o=0;o<i.length;o++)f=i[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&m!==null){i=void 0,o=s,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var de=pa(o.type,f);i=u.getSnapshotBeforeUpdate(de,m),u.__reactInternalSnapshotBeforeUpdate=i}catch(Te){et(o,o.return,Te)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)Zm(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Zm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,Qt=i;break}Qt=s.return}}function Y_(i,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:_r(i,o),u&4&&$l(5,o);break;case 1:if(_r(i,o),u&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(_){et(o,o.return,_)}else{var f=pa(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(f,s,i.__reactInternalSnapshotBeforeUpdate)}catch(_){et(o,o.return,_)}}u&64&&B_(o),u&512&&Wl(o,o.return);break;case 3:if(_r(i,o),u&64&&(i=o.updateQueue,i!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Ov(i,s)}catch(_){et(o,o.return,_)}}break;case 27:s===null&&u&4&&q_(o);case 26:case 5:_r(i,o),s===null&&u&4&&F_(o),u&512&&Wl(o,o.return);break;case 12:_r(i,o);break;case 31:_r(i,o),u&4&&Q_(i,o);break;case 13:_r(i,o),u&4&&$_(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=iC.bind(null,o),bC(i,o))));break;case 22:if(u=o.memoizedState!==null||yr,!u){s=s!==null&&s.memoizedState!==null||Vt,f=yr;var m=Vt;yr=u,(Vt=s)&&!m?Tr(i,o,(o.subtreeFlags&8772)!==0):_r(i,o),yr=f,Vt=m}break;case 30:break;default:_r(i,o)}}function X_(i){var s=i.alternate;s!==null&&(i.alternate=null,X_(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Ka(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ft=null,Sn=!1;function vr(i,s,o){for(o=o.child;o!==null;)K_(i,s,o),o=o.sibling}function K_(i,s,o){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(ii,o)}catch{}switch(o.tag){case 26:Vt||qi(o,s),vr(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Vt||qi(o,s);var u=ft,f=Sn;ls(o.type)&&(ft=o.stateNode,Sn=!1),vr(i,s,o),au(o.stateNode),ft=u,Sn=f;break;case 5:Vt||qi(o,s);case 6:if(u=ft,f=Sn,ft=null,vr(i,s,o),ft=u,Sn=f,ft!==null)if(Sn)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(o.stateNode)}catch(m){et(o,s,m)}else try{ft.removeChild(o.stateNode)}catch(m){et(o,s,m)}break;case 18:ft!==null&&(Sn?(i=ft,B0(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),Po(i)):B0(ft,o.stateNode));break;case 4:u=ft,f=Sn,ft=o.stateNode.containerInfo,Sn=!0,vr(i,s,o),ft=u,Sn=f;break;case 0:case 11:case 14:case 15:ts(2,o,s),Vt||ts(4,o,s),vr(i,s,o);break;case 1:Vt||(qi(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&j_(o,s,u)),vr(i,s,o);break;case 21:vr(i,s,o);break;case 22:Vt=(u=Vt)||o.memoizedState!==null,vr(i,s,o),Vt=u;break;default:vr(i,s,o)}}function Q_(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Po(i)}catch(o){et(s,s.return,o)}}}function $_(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Po(i)}catch(o){et(s,s.return,o)}}function QA(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new G_),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new G_),s;default:throw Error(r(435,i.tag))}}function lh(i,s){var o=QA(i);s.forEach(function(u){if(!o.has(u)){o.add(u);var f=rC.bind(null,i,u);u.then(f,f)}})}function bn(i,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=i,_=s,S=_;e:for(;S!==null;){switch(S.tag){case 27:if(ls(S.type)){ft=S.stateNode,Sn=!1;break e}break;case 5:ft=S.stateNode,Sn=!1;break e;case 3:case 4:ft=S.stateNode.containerInfo,Sn=!0;break e}S=S.return}if(ft===null)throw Error(r(160));K_(m,_,f),ft=null,Sn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)W_(s,i),s=s.sibling}var di=null;function W_(i,s){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:bn(s,i),wn(i),u&4&&(ts(3,i,i.return),$l(3,i),ts(5,i,i.return));break;case 1:bn(s,i),wn(i),u&512&&(Vt||o===null||qi(o,o.return)),u&64&&yr&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=di;if(bn(s,i),wn(i),u&512&&(Vt||o===null||qi(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){e:{u=i.type,o=i.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Oi]||m[Ot]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),an(m,u,o),m[Ot]=i,Nt(m),u=m;break e;case"link":var _=W0("link","href",f).get(u+(o.href||""));if(_){for(var S=0;S<_.length;S++)if(m=_[S],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(S,1);break t}}m=f.createElement(u),an(m,u,o),f.head.appendChild(m);break;case"meta":if(_=W0("meta","content",f).get(u+(o.content||""))){for(S=0;S<_.length;S++)if(m=_[S],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(S,1);break t}}m=f.createElement(u),an(m,u,o),f.head.appendChild(m);break;default:throw Error(r(468,u))}m[Ot]=i,Nt(m),u=m}i.stateNode=u}else Z0(f,i.type,i.stateNode);else i.stateNode=$0(f,u,i.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?Z0(f,i.type,i.stateNode):$0(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&wm(i,i.memoizedProps,o.memoizedProps)}break;case 27:bn(s,i),wn(i),u&512&&(Vt||o===null||qi(o,o.return)),o!==null&&u&4&&wm(i,i.memoizedProps,o.memoizedProps);break;case 5:if(bn(s,i),wn(i),u&512&&(Vt||o===null||qi(o,o.return)),i.flags&32){f=i.stateNode;try{En(f,"")}catch(de){et(i,i.return,de)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,wm(i,f,o!==null?o.memoizedProps:f)),u&1024&&(Rm=!0);break;case 6:if(bn(s,i),wn(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(de){et(i,i.return,de)}}break;case 3:if(wh=null,f=di,di=Sh(s.containerInfo),bn(s,i),di=f,wn(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Po(s.containerInfo)}catch(de){et(i,i.return,de)}Rm&&(Rm=!1,Z_(i));break;case 4:u=di,di=Sh(i.stateNode.containerInfo),bn(s,i),wn(i),di=u;break;case 12:bn(s,i),wn(i);break;case 31:bn(s,i),wn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,lh(i,u)));break;case 13:bn(s,i),wn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(ch=pn()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,lh(i,u)));break;case 22:f=i.memoizedState!==null;var O=o!==null&&o.memoizedState!==null,H=yr,W=Vt;if(yr=H||f,Vt=W||O,bn(s,i),Vt=W,yr=H,wn(i),u&8192)e:for(s=i.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||O||yr||Vt||ga(i)),o=null,s=i;;){if(s.tag===5||s.tag===26){if(o===null){O=o=s;try{if(m=O.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{S=O.stateNode;var te=O.memoizedProps.style,q=te!=null&&te.hasOwnProperty("display")?te.display:null;S.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(de){et(O,O.return,de)}}}else if(s.tag===6){if(o===null){O=s;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(de){et(O,O.return,de)}}}else if(s.tag===18){if(o===null){O=s;try{var X=O.stateNode;f?j0(X,!0):j0(O.stateNode,!1)}catch(de){et(O,O.return,de)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,lh(i,o))));break;case 19:bn(s,i),wn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,lh(i,u)));break;case 30:break;case 21:break;default:bn(s,i),wn(i)}}function wn(i){var s=i.flags;if(s&2){try{for(var o,u=i.return;u!==null;){if(H_(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,m=Am(i);oh(i,m,f);break;case 5:var _=o.stateNode;o.flags&32&&(En(_,""),o.flags&=-33);var S=Am(i);oh(i,S,_);break;case 3:case 4:var O=o.stateNode.containerInfo,H=Am(i);Cm(i,H,O);break;default:throw Error(r(161))}}catch(W){et(i,i.return,W)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Z_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Z_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function _r(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Y_(i,s.alternate,s),s=s.sibling}function ga(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:ts(4,s,s.return),ga(s);break;case 1:qi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&j_(s,s.return,o),ga(s);break;case 27:au(s.stateNode);case 26:case 5:qi(s,s.return),ga(s);break;case 22:s.memoizedState===null&&ga(s);break;case 30:ga(s);break;default:ga(s)}i=i.sibling}}function Tr(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=i,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:Tr(f,m,o),$l(4,m);break;case 1:if(Tr(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){et(u,u.return,H)}if(u=m,f=u.updateQueue,f!==null){var S=u.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)Dv(O[f],S)}catch(H){et(u,u.return,H)}}o&&_&64&&B_(m),Wl(m,m.return);break;case 27:q_(m);case 26:case 5:Tr(f,m,o),o&&u===null&&_&4&&F_(m),Wl(m,m.return);break;case 12:Tr(f,m,o);break;case 31:Tr(f,m,o),o&&_&4&&Q_(f,m);break;case 13:Tr(f,m,o),o&&_&4&&$_(f,m);break;case 22:m.memoizedState===null&&Tr(f,m,o),Wl(m,m.return);break;case 30:break;default:Tr(f,m,o)}s=s.sibling}}function Im(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&Ll(o))}function Dm(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Ll(i))}function mi(i,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)J_(i,s,o,u),s=s.sibling}function J_(i,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:mi(i,s,o,u),f&2048&&$l(9,s);break;case 1:mi(i,s,o,u);break;case 3:mi(i,s,o,u),f&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Ll(i)));break;case 12:if(f&2048){mi(i,s,o,u),i=s.stateNode;try{var m=s.memoizedProps,_=m.id,S=m.onPostCommit;typeof S=="function"&&S(_,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(O){et(s,s.return,O)}}else mi(i,s,o,u);break;case 31:mi(i,s,o,u);break;case 13:mi(i,s,o,u);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?mi(i,s,o,u):Zl(i,s):m._visibility&2?mi(i,s,o,u):(m._visibility|=2,So(i,s,o,u,(s.subtreeFlags&10256)!==0||!1)),f&2048&&Im(_,s);break;case 24:mi(i,s,o,u),f&2048&&Dm(s.alternate,s);break;default:mi(i,s,o,u)}}function So(i,s,o,u,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=i,_=s,S=o,O=u,H=_.flags;switch(_.tag){case 0:case 11:case 15:So(m,_,S,O,f),$l(8,_);break;case 23:break;case 22:var W=_.stateNode;_.memoizedState!==null?W._visibility&2?So(m,_,S,O,f):Zl(m,_):(W._visibility|=2,So(m,_,S,O,f)),f&&H&2048&&Im(_.alternate,_);break;case 24:So(m,_,S,O,f),f&&H&2048&&Dm(_.alternate,_);break;default:So(m,_,S,O,f)}s=s.sibling}}function Zl(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,u=s,f=u.flags;switch(u.tag){case 22:Zl(o,u),f&2048&&Im(u.alternate,u);break;case 24:Zl(o,u),f&2048&&Dm(u.alternate,u);break;default:Zl(o,u)}s=s.sibling}}var Jl=8192;function bo(i,s,o){if(i.subtreeFlags&Jl)for(i=i.child;i!==null;)e0(i,s,o),i=i.sibling}function e0(i,s,o){switch(i.tag){case 26:bo(i,s,o),i.flags&Jl&&i.memoizedState!==null&&MC(o,di,i.memoizedState,i.memoizedProps);break;case 5:bo(i,s,o);break;case 3:case 4:var u=di;di=Sh(i.stateNode.containerInfo),bo(i,s,o),di=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Jl,Jl=16777216,bo(i,s,o),Jl=u):bo(i,s,o));break;default:bo(i,s,o)}}function t0(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function eu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Qt=u,i0(u,i)}t0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)n0(i),i=i.sibling}function n0(i){switch(i.tag){case 0:case 11:case 15:eu(i),i.flags&2048&&ts(9,i,i.return);break;case 3:eu(i);break;case 12:eu(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,uh(i)):eu(i);break;default:eu(i)}}function uh(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Qt=u,i0(u,i)}t0(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:ts(8,s,s.return),uh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,uh(s));break;default:uh(s)}i=i.sibling}}function i0(i,s){for(;Qt!==null;){var o=Qt;switch(o.tag){case 0:case 11:case 15:ts(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ll(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Qt=u;else e:for(o=i;Qt!==null;){u=Qt;var f=u.sibling,m=u.return;if(X_(u),u===o){Qt=null;break e}if(f!==null){f.return=m,Qt=f;break e}Qt=m}}}var $A={getCacheForType:function(i){var s=rn(Pt),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o},cacheSignal:function(){return rn(Pt).controller.signal}},WA=typeof WeakMap=="function"?WeakMap:Map,Qe=0,st=null,Me=null,Le=0,Je=0,Mn=null,ns=!1,wo=!1,Om=!1,Er=0,yt=0,is=0,ya=0,Nm=0,Vn=0,Ao=0,tu=null,An=null,xm=!1,ch=0,r0=0,hh=1/0,fh=null,rs=null,qt=0,ss=null,Co=null,Sr=0,Pm=0,km=null,s0=null,nu=0,Mm=null;function Ln(){return(Qe&2)!==0&&Le!==0?Le&-Le:Q.T!==null?jm():dc()}function a0(){if(Vn===0)if((Le&536870912)===0||Fe){var i=qs;qs<<=1,(qs&3932160)===0&&(qs=262144),Vn=i}else Vn=536870912;return i=Pn.current,i!==null&&(i.flags|=32),Vn}function Cn(i,s,o){(i===st&&(Je===2||Je===9)||i.cancelPendingCommit!==null)&&(Ro(i,0),as(i,Le,Vn,!1)),Gs(i,o),((Qe&2)===0||i!==st)&&(i===st&&((Qe&2)===0&&(ya|=o),yt===4&&as(i,Le,Vn,!1)),Gi(i))}function o0(i,s,o){if((Qe&6)!==0)throw Error(r(327));var u=!o&&(s&127)===0&&(s&i.expiredLanes)===0||ri(i,s),f=u?eC(i,s):Lm(i,s,!0),m=u;do{if(f===0){wo&&!u&&as(i,s,0,!1);break}else{if(o=i.current.alternate,m&&!ZA(o)){f=Lm(i,s,!1),m=!1;continue}if(f===2){if(m=s,i.errorRecoveryDisabledLanes&m)var _=0;else _=i.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var S=i;f=tu;var O=S.current.memoizedState.isDehydrated;if(O&&(Ro(S,_).flags|=256),_=Lm(S,_,!1),_!==2){if(Om&&!O){S.errorRecoveryDisabledLanes|=m,ya|=m,f=4;break e}m=An,An=f,m!==null&&(An===null?An=m:An.push.apply(An,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){Ro(i,0),as(i,s,0,!0);break}e:{switch(u=i,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:as(u,s,Vn,!ns);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=ch+300-pn(),10<f)){if(as(u,s,Vn,!ns),Ri(u,0,!0)!==0)break e;Sr=s,u.timeoutHandle=U0(l0.bind(null,u,o,An,fh,xm,s,Vn,ya,Ao,ns,m,"Throttled",-0,0),f);break e}l0(u,o,An,fh,xm,s,Vn,ya,Ao,ns,m,null,-0,0)}}break}while(!0);Gi(i)}function l0(i,s,o,u,f,m,_,S,O,H,W,te,q,X){if(i.timeoutHandle=-1,te=s.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:oi},e0(s,m,te);var de=(m&62914560)===m?ch-pn():(m&4194048)===m?r0-pn():0;if(de=VC(te,de),de!==null){Sr=m,i.cancelPendingCommit=de(g0.bind(null,i,s,m,o,u,f,_,S,O,W,te,null,q,X)),as(i,m,_,!H);return}}g0(i,s,m,o,u,f,_,S,O)}function ZA(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!Nn(m(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function as(i,s,o,u){s&=~Nm,s&=~ya,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var f=s;0<f;){var m=31-St(f),_=1<<m;u[m]=-1,f&=~_}o!==0&&Ys(i,o,s)}function dh(){return(Qe&6)===0?(iu(0),!1):!0}function Vm(){if(Me!==null){if(Je===0)var i=Me.return;else i=Me,hr=la=null,Zd(i),yo=null,zl=0,i=Me;for(;i!==null;)z_(i.alternate,i),i=i.return;Me=null}}function Ro(i,s){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,vC(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Sr=0,Vm(),st=i,Me=o=ur(i.current,null),Le=s,Je=0,Mn=null,ns=!1,wo=ri(i,s),Om=!1,Ao=Vn=Nm=ya=is=yt=0,An=tu=null,xm=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var f=31-St(u),m=1<<f;s|=i[f],u&=~m}return Er=s,kc(),o}function u0(i,s){Oe=null,Q.H=Xl,s===go||s===Fc?(s=Av(),Je=3):s===Bd?(s=Av(),Je=4):Je=s===mm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Mn=s,Me===null&&(yt=1,nh(i,Gn(s,i.current)))}function c0(){var i=Pn.current;return i===null?!0:(Le&4194048)===Le?Qn===null:(Le&62914560)===Le||(Le&536870912)!==0?i===Qn:!1}function h0(){var i=Q.H;return Q.H=Xl,i===null?Xl:i}function f0(){var i=Q.A;return Q.A=$A,i}function mh(){yt=4,ns||(Le&4194048)!==Le&&Pn.current!==null||(wo=!0),(is&134217727)===0&&(ya&134217727)===0||st===null||as(st,Le,Vn,!1)}function Lm(i,s,o){var u=Qe;Qe|=2;var f=h0(),m=f0();(st!==i||Le!==s)&&(fh=null,Ro(i,s)),s=!1;var _=yt;e:do try{if(Je!==0&&Me!==null){var S=Me,O=Mn;switch(Je){case 8:Vm(),_=6;break e;case 3:case 2:case 9:case 6:Pn.current===null&&(s=!0);var H=Je;if(Je=0,Mn=null,Io(i,S,O,H),o&&wo){_=0;break e}break;default:H=Je,Je=0,Mn=null,Io(i,S,O,H)}}JA(),_=yt;break}catch(W){u0(i,W)}while(!0);return s&&i.shellSuspendCounter++,hr=la=null,Qe=u,Q.H=f,Q.A=m,Me===null&&(st=null,Le=0,kc()),_}function JA(){for(;Me!==null;)d0(Me)}function eC(i,s){var o=Qe;Qe|=2;var u=h0(),f=f0();st!==i||Le!==s?(fh=null,hh=pn()+500,Ro(i,s)):wo=ri(i,s);e:do try{if(Je!==0&&Me!==null){s=Me;var m=Mn;t:switch(Je){case 1:Je=0,Mn=null,Io(i,s,m,1);break;case 2:case 9:if(bv(m)){Je=0,Mn=null,m0(s);break}s=function(){Je!==2&&Je!==9||st!==i||(Je=7),Gi(i)},m.then(s,s);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:bv(m)?(Je=0,Mn=null,m0(s)):(Je=0,Mn=null,Io(i,s,m,7));break;case 5:var _=null;switch(Me.tag){case 26:_=Me.memoizedState;case 5:case 27:var S=Me;if(_?J0(_):S.stateNode.complete){Je=0,Mn=null;var O=S.sibling;if(O!==null)Me=O;else{var H=S.return;H!==null?(Me=H,ph(H)):Me=null}break t}}Je=0,Mn=null,Io(i,s,m,5);break;case 6:Je=0,Mn=null,Io(i,s,m,6);break;case 8:Vm(),yt=6;break e;default:throw Error(r(462))}}tC();break}catch(W){u0(i,W)}while(!0);return hr=la=null,Q.H=u,Q.A=f,Qe=o,Me!==null?0:(st=null,Le=0,kc(),yt)}function tC(){for(;Me!==null&&!dd();)d0(Me)}function d0(i){var s=L_(i.alternate,i,Er);i.memoizedProps=i.pendingProps,s===null?ph(i):Me=s}function m0(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=N_(o,s,s.pendingProps,s.type,void 0,Le);break;case 11:s=N_(o,s,s.pendingProps,s.type.render,s.ref,Le);break;case 5:Zd(s);default:z_(o,s),s=Me=fv(s,Er),s=L_(o,s,Er)}i.memoizedProps=i.pendingProps,s===null?ph(i):Me=s}function Io(i,s,o,u){hr=la=null,Zd(s),yo=null,zl=0;var f=s.return;try{if(HA(i,f,s,o,Le)){yt=1,nh(i,Gn(o,i.current)),Me=null;return}}catch(m){if(f!==null)throw Me=f,m;yt=1,nh(i,Gn(o,i.current)),Me=null;return}s.flags&32768?(Fe||u===1?i=!0:wo||(Le&536870912)!==0?i=!1:(ns=i=!0,(u===2||u===9||u===3||u===6)&&(u=Pn.current,u!==null&&u.tag===13&&(u.flags|=16384))),p0(s,i)):ph(s)}function ph(i){var s=i;do{if((s.flags&32768)!==0){p0(s,ns);return}i=s.return;var o=YA(s.alternate,s,Er);if(o!==null){Me=o;return}if(s=s.sibling,s!==null){Me=s;return}Me=s=i}while(s!==null);yt===0&&(yt=5)}function p0(i,s){do{var o=XA(i.alternate,i);if(o!==null){o.flags&=32767,Me=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){Me=i;return}Me=i=o}while(i!==null);yt=6,Me=null}function g0(i,s,o,u,f,m,_,S,O){i.cancelPendingCommit=null;do gh();while(qt!==0);if((Qe&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=Ad,gd(i,o,m,_,S,O),i===st&&(Me=st=null,Le=0),Co=s,ss=i,Sr=o,Pm=m,km=f,s0=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,sC(Vr,function(){return E0(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null,f=re.p,re.p=2,_=Qe,Qe|=4;try{KA(i,s,o)}finally{Qe=_,re.p=f,Q.T=u}}qt=1,y0(),v0(),_0()}}function y0(){if(qt===1){qt=0;var i=ss,s=Co,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=Q.T,Q.T=null;var u=re.p;re.p=2;var f=Qe;Qe|=4;try{W_(s,i);var m=Qm,_=iv(i.containerInfo),S=m.focusedElem,O=m.selectionRange;if(_!==S&&S&&S.ownerDocument&&nv(S.ownerDocument.documentElement,S)){if(O!==null&&Td(S)){var H=O.start,W=O.end;if(W===void 0&&(W=H),"selectionStart"in S)S.selectionStart=H,S.selectionEnd=Math.min(W,S.value.length);else{var te=S.ownerDocument||document,q=te&&te.defaultView||window;if(q.getSelection){var X=q.getSelection(),de=S.textContent.length,Te=Math.min(O.start,de),rt=O.end===void 0?Te:Math.min(O.end,de);!X.extend&&Te>rt&&(_=rt,rt=Te,Te=_);var U=tv(S,Te),P=tv(S,rt);if(U&&P&&(X.rangeCount!==1||X.anchorNode!==U.node||X.anchorOffset!==U.offset||X.focusNode!==P.node||X.focusOffset!==P.offset)){var j=te.createRange();j.setStart(U.node,U.offset),X.removeAllRanges(),Te>rt?(X.addRange(j),X.extend(P.node,P.offset)):(j.setEnd(P.node,P.offset),X.addRange(j))}}}}for(te=[],X=S;X=X.parentNode;)X.nodeType===1&&te.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<te.length;S++){var J=te[S];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Ih=!!Km,Qm=Km=null}finally{Qe=f,re.p=u,Q.T=o}}i.current=s,qt=2}}function v0(){if(qt===2){qt=0;var i=ss,s=Co,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=Q.T,Q.T=null;var u=re.p;re.p=2;var f=Qe;Qe|=4;try{Y_(i,s.alternate,s)}finally{Qe=f,re.p=u,Q.T=o}}qt=3}}function _0(){if(qt===4||qt===3){qt=0,ac();var i=ss,s=Co,o=Sr,u=s0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?qt=5:(qt=0,Co=ss=null,T0(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(rs=null),sr(o),s=s.stateNode,en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(ii,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=Q.T,f=re.p,re.p=2,Q.T=null;try{for(var m=i.onRecoverableError,_=0;_<u.length;_++){var S=u[_];m(S.value,{componentStack:S.stack})}}finally{Q.T=s,re.p=f}}(Sr&3)!==0&&gh(),Gi(i),f=i.pendingLanes,(o&261930)!==0&&(f&42)!==0?i===Mm?nu++:(nu=0,Mm=i):nu=0,iu(0)}}function T0(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Ll(s)))}function gh(){return y0(),v0(),_0(),E0()}function E0(){if(qt!==5)return!1;var i=ss,s=Pm;Pm=0;var o=sr(Sr),u=Q.T,f=re.p;try{re.p=32>o?32:o,Q.T=null,o=km,km=null;var m=ss,_=Sr;if(qt=0,Co=ss=null,Sr=0,(Qe&6)!==0)throw Error(r(331));var S=Qe;if(Qe|=4,n0(m.current),J_(m,m.current,_,o),Qe=S,iu(0,!1),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(ii,m)}catch{}return!0}finally{re.p=f,Q.T=u,T0(i,s)}}function S0(i,s,o){s=Gn(o,s),s=dm(i.stateNode,s,2),i=Zr(i,s,2),i!==null&&(Gs(i,2),Gi(i))}function et(i,s,o){if(i.tag===3)S0(i,i,o);else for(;s!==null;){if(s.tag===3){S0(s,i,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(rs===null||!rs.has(u))){i=Gn(o,i),o=b_(2),u=Zr(s,o,2),u!==null&&(w_(o,u,s,i),Gs(u,2),Gi(u));break}}s=s.return}}function Um(i,s,o){var u=i.pingCache;if(u===null){u=i.pingCache=new WA;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(Om=!0,f.add(o),i=nC.bind(null,i,s,o),s.then(i,i))}function nC(i,s,o){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,st===i&&(Le&o)===o&&(yt===4||yt===3&&(Le&62914560)===Le&&300>pn()-ch?(Qe&2)===0&&Ro(i,0):Nm|=o,Ao===Le&&(Ao=0)),Gi(i)}function b0(i,s){s===0&&(s=fc()),i=sa(i,s),i!==null&&(Gs(i,s),Gi(i))}function iC(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),b0(i,o)}function rC(i,s){var o=0;switch(i.tag){case 31:case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),b0(i,o)}function sC(i,s){return Ht(i,s)}var yh=null,Do=null,zm=!1,vh=!1,Bm=!1,os=0;function Gi(i){i!==Do&&i.next===null&&(Do===null?yh=Do=i:Do=Do.next=i),vh=!0,zm||(zm=!0,oC())}function iu(i,s){if(!Bm&&vh){Bm=!0;do for(var o=!1,u=yh;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var _=u.suspendedLanes,S=u.pingedLanes;m=(1<<31-St(42|i)+1)-1,m&=f&~(_&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,R0(u,m))}else m=Le,m=Ri(u,u===st?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||ri(u,m)||(o=!0,R0(u,m));u=u.next}while(o);Bm=!1}}function aC(){w0()}function w0(){vh=zm=!1;var i=0;os!==0&&yC()&&(i=os);for(var s=pn(),o=null,u=yh;u!==null;){var f=u.next,m=A0(u,s);m===0?(u.next=null,o===null?yh=f:o.next=f,f===null&&(Do=o)):(o=u,(i!==0||(m&3)!==0)&&(vh=!0)),u=f}qt!==0&&qt!==5||iu(i),os!==0&&(os=0)}function A0(i,s){for(var o=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,m=i.pendingLanes&-62914561;0<m;){var _=31-St(m),S=1<<_,O=f[_];O===-1?((S&o)===0||(S&u)!==0)&&(f[_]=pd(S,s)):O<=s&&(i.expiredLanes|=S),m&=~S}if(s=st,o=Le,o=Ri(i,i===s?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===s&&(Je===2||Je===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Mr(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||ri(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(u!==null&&Mr(u),sr(o)){case 2:case 8:o=dl;break;case 32:o=Vr;break;case 268435456:o=oc;break;default:o=Vr}return u=C0.bind(null,i),o=Ht(o,u),i.callbackPriority=s,i.callbackNode=o,s}return u!==null&&u!==null&&Mr(u),i.callbackPriority=2,i.callbackNode=null,2}function C0(i,s){if(qt!==0&&qt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(gh()&&i.callbackNode!==o)return null;var u=Le;return u=Ri(i,i===st?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(o0(i,u,s),A0(i,pn()),i.callbackNode!=null&&i.callbackNode===o?C0.bind(null,i):null)}function R0(i,s){if(gh())return null;o0(i,s,!0)}function oC(){_C(function(){(Qe&6)!==0?Ht(fl,aC):w0()})}function jm(){if(os===0){var i=mo;i===0&&(i=Ai,Ai<<=1,(Ai&261888)===0&&(Ai=256)),os=i}return os}function I0(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Za(""+i)}function D0(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function lC(i,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var m=I0((f[Xt]||null).action),_=u.submitter;_&&(s=(s=_[Xt]||null)?I0(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var S=new Ui("action","action",null,u,f);i.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(os!==0){var O=_?D0(f,_):new FormData(f);om(o,{pending:!0,data:O,method:f.method,action:m},null,O)}}else typeof m=="function"&&(S.preventDefault(),O=_?D0(f,_):new FormData(f),om(o,{pending:!0,data:O,method:f.method,action:m},m,O))},currentTarget:f}]})}}for(var Fm=0;Fm<wd.length;Fm++){var Hm=wd[Fm],uC=Hm.toLowerCase(),cC=Hm[0].toUpperCase()+Hm.slice(1);fi(uC,"on"+cC)}fi(av,"onAnimationEnd"),fi(ov,"onAnimationIteration"),fi(lv,"onAnimationStart"),fi("dblclick","onDoubleClick"),fi("focusin","onFocus"),fi("focusout","onBlur"),fi(CA,"onTransitionRun"),fi(RA,"onTransitionStart"),fi(IA,"onTransitionCancel"),fi(uv,"onTransitionEnd"),ki("onMouseEnter",["mouseout","mouseover"]),ki("onMouseLeave",["mouseout","mouseover"]),ki("onPointerEnter",["pointerout","pointerover"]),ki("onPointerLeave",["pointerout","pointerover"]),Pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ru));function O0(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],f=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var _=u.length-1;0<=_;_--){var S=u[_],O=S.instance,H=S.currentTarget;if(S=S.listener,O!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=H;try{m(f)}catch(W){Pc(W)}f.currentTarget=null,m=O}else for(_=0;_<u.length;_++){if(S=u[_],O=S.instance,H=S.currentTarget,S=S.listener,O!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=H;try{m(f)}catch(W){Pc(W)}f.currentTarget=null,m=O}}}}function Ve(i,s){var o=s[Xa];o===void 0&&(o=s[Xa]=new Set);var u=i+"__bubble";o.has(u)||(N0(s,i,2,!1),o.add(u))}function qm(i,s,o){var u=0;s&&(u|=4),N0(o,i,u,s)}var _h="_reactListening"+Math.random().toString(36).slice(2);function Gm(i){if(!i[_h]){i[_h]=!0,gl.forEach(function(o){o!=="selectionchange"&&(hC.has(o)||qm(o,!1,i),qm(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[_h]||(s[_h]=!0,qm("selectionchange",!1,s))}}function N0(i,s,o,u){switch(aT(s)){case 2:var f=zC;break;case 8:f=BC;break;default:f=ap}o=f.bind(null,s,o,i),f=void 0,!Ws||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(s,o,{capture:!0,passive:f}):i.addEventListener(s,o,!0):f!==void 0?i.addEventListener(s,o,{passive:f}):i.addEventListener(s,o,!1)}function Ym(i,s,o,u,f){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var S=u.stateNode.containerInfo;if(S===f)break;if(_===4)for(_=u.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;S!==null;){if(_=Ni(S),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){u=m=_;continue e}S=S.parentNode}}u=u.return}Fr(function(){var H=m,W=jn(o),te=[];e:{var q=cv.get(i);if(q!==void 0){var X=Ui,de=i;switch(i){case"keypress":if(Js(o)===0)break e;case"keydown":case"keyup":X=Oc;break;case"focusin":de="focus",X=ta;break;case"focusout":de="blur",X=ta;break;case"beforeblur":case"afterblur":X=ta;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Dl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Ec;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=y;break;case av:case ov:case lv:X=bc;break;case uv:X=w;break;case"scroll":case"scrollend":X=Il;break;case"wheel":X=Y;break;case"copy":case"cut":case"paste":X=wc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=lr;break;case"toggle":case"beforetoggle":X=De}var Te=(s&4)!==0,rt=!Te&&(i==="scroll"||i==="scrollend"),U=Te?q!==null?q+"Capture":null:q;Te=[];for(var P=H,j;P!==null;){var J=P;if(j=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||j===null||U===null||(J=li(P,U),J!=null&&Te.push(su(P,J,j))),rt)break;P=P.return}0<Te.length&&(q=new X(q,de,null,o,W),te.push({event:q,listeners:Te}))}}if((s&7)===0){e:{if(q=i==="mouseover"||i==="pointerover",X=i==="mouseout"||i==="pointerout",q&&o!==Al&&(de=o.relatedTarget||o.fromElement)&&(Ni(de)||de[Di]))break e;if((X||q)&&(q=W.window===W?W:(q=W.ownerDocument)?q.defaultView||q.parentWindow:window,X?(de=o.relatedTarget||o.toElement,X=H,de=de?Ni(de):null,de!==null&&(rt=l(de),Te=de.tag,de!==rt||Te!==5&&Te!==27&&Te!==6)&&(de=null)):(X=null,de=H),X!==de)){if(Te=Dl,J="onMouseLeave",U="onMouseEnter",P="mouse",(i==="pointerout"||i==="pointerover")&&(Te=lr,J="onPointerLeave",U="onPointerEnter",P="pointer"),rt=X==null?q:Dn(X),j=de==null?q:Dn(de),q=new Te(J,P+"leave",X,o,W),q.target=rt,q.relatedTarget=j,J=null,Ni(W)===H&&(Te=new Te(U,P+"enter",de,o,W),Te.target=j,Te.relatedTarget=rt,J=Te),rt=J,X&&de)t:{for(Te=fC,U=X,P=de,j=0,J=U;J;J=Te(J))j++;J=0;for(var ve=P;ve;ve=Te(ve))J++;for(;0<j-J;)U=Te(U),j--;for(;0<J-j;)P=Te(P),J--;for(;j--;){if(U===P||P!==null&&U===P.alternate){Te=U;break t}U=Te(U),P=Te(P)}Te=null}else Te=null;X!==null&&x0(te,q,X,Te,!1),de!==null&&rt!==null&&x0(te,rt,de,Te,!0)}}e:{if(q=H?Dn(H):window,X=q.nodeName&&q.nodeName.toLowerCase(),X==="select"||X==="input"&&q.type==="file")var Ge=Qy;else if(Xy(q))if($y)Ge=bA;else{Ge=EA;var ge=TA}else X=q.nodeName,!X||X.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?H&&Wa(H.elementType)&&(Ge=Qy):Ge=SA;if(Ge&&(Ge=Ge(i,H))){Ky(te,Ge,o,W);break e}ge&&ge(i,q,H),i==="focusout"&&H&&q.type==="number"&&H.memoizedProps.value!=null&&Sl(q,"number",q.value)}switch(ge=H?Dn(H):window,i){case"focusin":(Xy(ge)||ge.contentEditable==="true")&&(so=ge,Ed=H,kl=null);break;case"focusout":kl=Ed=so=null;break;case"mousedown":Sd=!0;break;case"contextmenu":case"mouseup":case"dragend":Sd=!1,rv(te,o,W);break;case"selectionchange":if(AA)break;case"keydown":case"keyup":rv(te,o,W)}var Ne;if(Ke)e:{switch(i){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else ro?na(i,o)&&(Ue="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Ue="onCompositionStart");Ue&&(ji&&o.locale!=="ko"&&(ro||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&ro&&(Ne=Rl()):(Li=W,Cl="value"in Li?Li.value:Li.textContent,ro=!0)),ge=Th(H,Ue),0<ge.length&&(Ue=new Bi(Ue,i,null,o,W),te.push({event:Ue,listeners:ge}),Ne?Ue.data=Ne:(Ne=io(o),Ne!==null&&(Ue.data=Ne)))),(Ne=Hn?gA(i,o):yA(i,o))&&(Ue=Th(H,"onBeforeInput"),0<Ue.length&&(ge=new Bi("onBeforeInput","beforeinput",null,o,W),te.push({event:ge,listeners:Ue}),ge.data=Ne)),lC(te,i,H,o,W)}O0(te,s)})}function su(i,s,o){return{instance:i,listener:s,currentTarget:o}}function Th(i,s){for(var o=s+"Capture",u=[];i!==null;){var f=i,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=li(i,o),f!=null&&u.unshift(su(i,f,m)),f=li(i,s),f!=null&&u.push(su(i,f,m))),i.tag===3)return u;i=i.return}return[]}function fC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function x0(i,s,o,u,f){for(var m=s._reactName,_=[];o!==null&&o!==u;){var S=o,O=S.alternate,H=S.stateNode;if(S=S.tag,O!==null&&O===u)break;S!==5&&S!==26&&S!==27||H===null||(O=H,f?(H=li(o,m),H!=null&&_.unshift(su(o,H,O))):f||(H=li(o,m),H!=null&&_.push(su(o,H,O)))),o=o.return}_.length!==0&&i.push({event:s,listeners:_})}var dC=/\r\n?/g,mC=/\u0000|\uFFFD/g;function P0(i){return(typeof i=="string"?i:""+i).replace(dC,`
`).replace(mC,"")}function k0(i,s){return s=P0(s),P0(i)===s}function it(i,s,o,u,f,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||En(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&En(i,""+u);break;case"className":On(i,"class",u);break;case"tabIndex":On(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":On(i,o,u);break;case"style":wl(i,u,m);break;case"data":if(s!=="object"){On(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Za(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&it(i,s,"name",f.name,f,null),it(i,s,"formEncType",f.formEncType,f,null),it(i,s,"formMethod",f.formMethod,f,null),it(i,s,"formTarget",f.formTarget,f,null)):(it(i,s,"encType",f.encType,f,null),it(i,s,"method",f.method,f,null),it(i,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Za(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=oi);break;case"onScroll":u!=null&&Ve("scroll",i);break;case"onScrollEnd":u!=null&&Ve("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Za(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":Ve("beforetoggle",i),Ve("toggle",i),Qa(i,"popover",u);break;case"xlinkActuate":xt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":xt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":xt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":xt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":xt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":xt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":xt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":xt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":xt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Qa(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Tc.get(o)||o,Qa(i,o,u))}}function Xm(i,s,o,u,f,m){switch(o){case"style":wl(i,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof u=="string"?En(i,u):(typeof u=="number"||typeof u=="bigint")&&En(i,""+u);break;case"onScroll":u!=null&&Ve("scroll",i);break;case"onScrollEnd":u!=null&&Ve("scrollend",i);break;case"onClick":u!=null&&(i.onclick=oi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),m=i[Xt]||null,m=m!=null?m[o]:null,typeof m=="function"&&i.removeEventListener(s,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,u,f);break e}o in i?i[o]=u:u===!0?i.setAttribute(o,""):Qa(i,o,u)}}}function an(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",i),Ve("load",i);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var _=o[m];if(_!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:it(i,s,m,_,o,null)}}f&&it(i,s,"srcSet",o.srcSet,o,null),u&&it(i,s,"src",o.src,o,null);return;case"input":Ve("invalid",i);var S=m=_=f=null,O=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var W=o[u];if(W!=null)switch(u){case"name":f=W;break;case"type":_=W;break;case"checked":O=W;break;case"defaultChecked":H=W;break;case"value":m=W;break;case"defaultValue":S=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,s));break;default:it(i,s,u,W,o,null)}}yc(i,m,S,O,H,_,f,!1);return;case"select":Ve("invalid",i),u=_=m=null;for(f in o)if(o.hasOwnProperty(f)&&(S=o[f],S!=null))switch(f){case"value":m=S;break;case"defaultValue":_=S;break;case"multiple":u=S;default:it(i,s,f,S,o,null)}s=m,o=_,i.multiple=!!u,s!=null?Ur(i,!!u,s,!1):o!=null&&Ur(i,!!u,o,!0);return;case"textarea":Ve("invalid",i),m=f=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(S=o[_],S!=null))switch(_){case"value":u=S;break;case"defaultValue":f=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:it(i,s,_,S,o,null)}zr(i,u,f,m);return;case"option":for(O in o)o.hasOwnProperty(O)&&(u=o[O],u!=null)&&(O==="selected"?i.selected=u&&typeof u!="function"&&typeof u!="symbol":it(i,s,O,u,o,null));return;case"dialog":Ve("beforetoggle",i),Ve("toggle",i),Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":Ve("load",i);break;case"video":case"audio":for(u=0;u<ru.length;u++)Ve(ru[u],i);break;case"image":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"embed":case"source":case"link":Ve("error",i),Ve("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:it(i,s,H,u,o,null)}return;default:if(Wa(s)){for(W in o)o.hasOwnProperty(W)&&(u=o[W],u!==void 0&&Xm(i,s,W,u,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(u=o[S],u!=null&&it(i,s,S,u,o,null))}function pC(i,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,S=null,O=null,H=null,W=null;for(X in o){var te=o[X];if(o.hasOwnProperty(X)&&te!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":O=te;default:u.hasOwnProperty(X)||it(i,s,X,null,u,te)}}for(var q in u){var X=u[q];if(te=o[q],u.hasOwnProperty(q)&&(X!=null||te!=null))switch(q){case"type":m=X;break;case"name":f=X;break;case"checked":H=X;break;case"defaultChecked":W=X;break;case"value":_=X;break;case"defaultValue":S=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,s));break;default:X!==te&&it(i,s,q,X,u,te)}}$a(i,_,S,O,H,W,m,f);return;case"select":X=_=S=q=null;for(m in o)if(O=o[m],o.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":X=O;default:u.hasOwnProperty(m)||it(i,s,m,null,u,O)}for(f in u)if(m=u[f],O=o[f],u.hasOwnProperty(f)&&(m!=null||O!=null))switch(f){case"value":q=m;break;case"defaultValue":S=m;break;case"multiple":_=m;default:m!==O&&it(i,s,f,m,u,O)}s=S,o=_,u=X,q!=null?Ur(i,!!o,q,!1):!!u!=!!o&&(s!=null?Ur(i,!!o,s,!0):Ur(i,!!o,o?[]:"",!1));return;case"textarea":X=q=null;for(S in o)if(f=o[S],o.hasOwnProperty(S)&&f!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:it(i,s,S,null,u,f)}for(_ in u)if(f=u[_],m=o[_],u.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":q=f;break;case"defaultValue":X=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&it(i,s,_,f,u,m)}vc(i,q,X);return;case"option":for(var de in o)q=o[de],o.hasOwnProperty(de)&&q!=null&&!u.hasOwnProperty(de)&&(de==="selected"?i.selected=!1:it(i,s,de,null,u,q));for(O in u)q=u[O],X=o[O],u.hasOwnProperty(O)&&q!==X&&(q!=null||X!=null)&&(O==="selected"?i.selected=q&&typeof q!="function"&&typeof q!="symbol":it(i,s,O,q,u,X));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in o)q=o[Te],o.hasOwnProperty(Te)&&q!=null&&!u.hasOwnProperty(Te)&&it(i,s,Te,null,u,q);for(H in u)if(q=u[H],X=o[H],u.hasOwnProperty(H)&&q!==X&&(q!=null||X!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,s));break;default:it(i,s,H,q,u,X)}return;default:if(Wa(s)){for(var rt in o)q=o[rt],o.hasOwnProperty(rt)&&q!==void 0&&!u.hasOwnProperty(rt)&&Xm(i,s,rt,void 0,u,q);for(W in u)q=u[W],X=o[W],!u.hasOwnProperty(W)||q===X||q===void 0&&X===void 0||Xm(i,s,W,q,u,X);return}}for(var U in o)q=o[U],o.hasOwnProperty(U)&&q!=null&&!u.hasOwnProperty(U)&&it(i,s,U,null,u,q);for(te in u)q=u[te],X=o[te],!u.hasOwnProperty(te)||q===X||q==null&&X==null||it(i,s,te,q,u,X)}function M0(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function gC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],m=f.transferSize,_=f.initiatorType,S=f.duration;if(m&&S&&M0(_)){for(_=0,S=f.responseEnd,u+=1;u<o.length;u++){var O=o[u],H=O.startTime;if(H>S)break;var W=O.transferSize,te=O.initiatorType;W&&M0(te)&&(O=O.responseEnd,_+=W*(O<S?1:(S-H)/(O-H)))}if(--u,s+=8*(m+_)/(f.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Km=null,Qm=null;function Eh(i){return i.nodeType===9?i:i.ownerDocument}function V0(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function L0(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function $m(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Wm=null;function yC(){var i=window.event;return i&&i.type==="popstate"?i===Wm?!1:(Wm=i,!0):(Wm=null,!1)}var U0=typeof setTimeout=="function"?setTimeout:void 0,vC=typeof clearTimeout=="function"?clearTimeout:void 0,z0=typeof Promise=="function"?Promise:void 0,_C=typeof queueMicrotask=="function"?queueMicrotask:typeof z0<"u"?function(i){return z0.resolve(null).then(i).catch(TC)}:U0;function TC(i){setTimeout(function(){throw i})}function ls(i){return i==="head"}function B0(i,s){var o=s,u=0;do{var f=o.nextSibling;if(i.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){i.removeChild(f),Po(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")au(i.ownerDocument.documentElement);else if(o==="head"){o=i.ownerDocument.head,au(o);for(var m=o.firstChild;m;){var _=m.nextSibling,S=m.nodeName;m[Oi]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=_}}else o==="body"&&au(i.ownerDocument.body);o=f}while(o);Po(s)}function j0(i,s){var o=i;i=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(i===0)break;i--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||i++;o=u}while(o)}function Zm(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Zm(o),Ka(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function EC(i,s,o,u){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Oi])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(m=i.getAttribute("rel"),m==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(m!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(m=i.getAttribute("src"),(m!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===m)return i}else return i;if(i=$n(i.nextSibling),i===null)break}return null}function SC(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=$n(i.nextSibling),i===null))return null;return i}function F0(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=$n(i.nextSibling),i===null))return null;return i}function Jm(i){return i.data==="$?"||i.data==="$~"}function ep(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function bC(i,s){var o=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function $n(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var tp=null;function H0(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"||o==="/&"){if(s===0)return $n(i.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}i=i.nextSibling}return null}function q0(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return i;s--}else o!=="/$"&&o!=="/&"||s++}i=i.previousSibling}return null}function G0(i,s,o){switch(s=Eh(o),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function au(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Ka(i)}var Wn=new Map,Y0=new Set;function Sh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var br=re.d;re.d={f:wC,r:AC,D:CC,C:RC,L:IC,m:DC,X:NC,S:OC,M:xC};function wC(){var i=br.f(),s=dh();return i||s}function AC(i){var s=Bn(i);s!==null&&s.tag===5&&s.type==="form"?u_(s):br.r(i)}var Oo=typeof document>"u"?null:document;function X0(i,s,o){var u=Oo;if(u&&typeof s=="string"&&s){var f=Tn(s);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Y0.has(f)||(Y0.add(f),i={rel:i,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),an(s,"link",i),Nt(s),u.head.appendChild(s)))}}function CC(i){br.D(i),X0("dns-prefetch",i,null)}function RC(i,s){br.C(i,s),X0("preconnect",i,s)}function IC(i,s,o){br.L(i,s,o);var u=Oo;if(u&&i&&s){var f='link[rel="preload"][as="'+Tn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Tn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Tn(o.imageSizes)+'"]')):f+='[href="'+Tn(i)+'"]';var m=f;switch(s){case"style":m=No(i);break;case"script":m=xo(i)}Wn.has(m)||(i=E({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),Wn.set(m,i),u.querySelector(f)!==null||s==="style"&&u.querySelector(ou(m))||s==="script"&&u.querySelector(lu(m))||(s=u.createElement("link"),an(s,"link",i),Nt(s),u.head.appendChild(s)))}}function DC(i,s){br.m(i,s);var o=Oo;if(o&&i){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Tn(u)+'"][href="'+Tn(i)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=xo(i)}if(!Wn.has(m)&&(i=E({rel:"modulepreload",href:i},s),Wn.set(m,i),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(lu(m)))return}u=o.createElement("link"),an(u,"link",i),Nt(u),o.head.appendChild(u)}}}function OC(i,s,o){br.S(i,s,o);var u=Oo;if(u&&i){var f=xi(u).hoistableStyles,m=No(i);s=s||"default";var _=f.get(m);if(!_){var S={loading:0,preload:null};if(_=u.querySelector(ou(m)))S.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":s},o),(o=Wn.get(m))&&np(i,o);var O=_=u.createElement("link");Nt(O),an(O,"link",i),O._p=new Promise(function(H,W){O.onload=H,O.onerror=W}),O.addEventListener("load",function(){S.loading|=1}),O.addEventListener("error",function(){S.loading|=2}),S.loading|=4,bh(_,s,u)}_={type:"stylesheet",instance:_,count:1,state:S},f.set(m,_)}}}function NC(i,s){br.X(i,s);var o=Oo;if(o&&i){var u=xi(o).hoistableScripts,f=xo(i),m=u.get(f);m||(m=o.querySelector(lu(f)),m||(i=E({src:i,async:!0},s),(s=Wn.get(f))&&ip(i,s),m=o.createElement("script"),Nt(m),an(m,"link",i),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function xC(i,s){br.M(i,s);var o=Oo;if(o&&i){var u=xi(o).hoistableScripts,f=xo(i),m=u.get(f);m||(m=o.querySelector(lu(f)),m||(i=E({src:i,async:!0,type:"module"},s),(s=Wn.get(f))&&ip(i,s),m=o.createElement("script"),Nt(m),an(m,"link",i),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function K0(i,s,o,u){var f=(f=Ae.current)?Sh(f):null;if(!f)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=No(o.href),o=xi(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=No(o.href);var m=xi(f).hoistableStyles,_=m.get(i);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(i,_),(m=f.querySelector(ou(i)))&&!m._p&&(_.instance=m,_.state.loading=5),Wn.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Wn.set(i,o),m||PC(f,i,o,_.state))),s&&u===null)throw Error(r(528,""));return _}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=xo(o),o=xi(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function No(i){return'href="'+Tn(i)+'"'}function ou(i){return'link[rel="stylesheet"]['+i+"]"}function Q0(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function PC(i,s,o,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),an(s,"link",o),Nt(s),i.head.appendChild(s))}function xo(i){return'[src="'+Tn(i)+'"]'}function lu(i){return"script[async]"+i}function $0(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+Tn(o.href)+'"]');if(u)return s.instance=u,Nt(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Nt(u),an(u,"style",f),bh(u,o.precedence,i),s.instance=u;case"stylesheet":f=No(o.href);var m=i.querySelector(ou(f));if(m)return s.state.loading|=4,s.instance=m,Nt(m),m;u=Q0(o),(f=Wn.get(f))&&np(u,f),m=(i.ownerDocument||i).createElement("link"),Nt(m);var _=m;return _._p=new Promise(function(S,O){_.onload=S,_.onerror=O}),an(m,"link",u),s.state.loading|=4,bh(m,o.precedence,i),s.instance=m;case"script":return m=xo(o.src),(f=i.querySelector(lu(m)))?(s.instance=f,Nt(f),f):(u=o,(f=Wn.get(m))&&(u=E({},o),ip(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),Nt(f),an(f,"link",u),i.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,bh(u,o.precedence,i));return s.instance}function bh(i,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,_=0;_<u.length;_++){var S=u[_];if(S.dataset.precedence===s)m=S;else if(m!==f)break}m?m.parentNode.insertBefore(i,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function np(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function ip(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var wh=null;function W0(i,s,o){if(wh===null){var u=new Map,f=wh=new Map;f.set(o,u)}else f=wh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var m=o[f];if(!(m[Oi]||m[Ot]||i==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=i+_;var S=u.get(_);S?S.push(m):u.set(_,[m])}}return u}function Z0(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function kC(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(i=s.disabled,typeof s.precedence=="string"&&i==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function J0(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function MC(i,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=No(u.href),m=s.querySelector(ou(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=Ah.bind(i),s.then(i,i)),o.state.loading|=4,o.instance=m,Nt(m);return}m=s.ownerDocument||s,u=Q0(u),(f=Wn.get(f))&&np(u,f),m=m.createElement("link"),Nt(m);var _=m;_._p=new Promise(function(S,O){_.onload=S,_.onerror=O}),an(m,"link",u),o.instance=m}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(i.count++,o=Ah.bind(i),s.addEventListener("load",o),s.addEventListener("error",o))}}var rp=0;function VC(i,s){return i.stylesheets&&i.count===0&&Rh(i,i.stylesheets),0<i.count||0<i.imgCount?function(o){var u=setTimeout(function(){if(i.stylesheets&&Rh(i,i.stylesheets),i.unsuspend){var m=i.unsuspend;i.unsuspend=null,m()}},6e4+s);0<i.imgBytes&&rp===0&&(rp=62500*gC());var f=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Rh(i,i.stylesheets),i.unsuspend)){var m=i.unsuspend;i.unsuspend=null,m()}},(i.imgBytes>rp?50:800)+s);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Ah(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rh(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Ch=null;function Rh(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Ch=new Map,s.forEach(LC,i),Ch=null,Ah.call(i))}function LC(i,s){if(!(s.state.loading&4)){var o=Ch.get(i);if(o)var u=o.get(null);else{o=new Map,Ch.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}f=s.instance,_=f.getAttribute("data-precedence"),m=o.get(_)||u,m===u&&o.set(null,f),o.set(_,f),this.count++,u=Ah.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),s.state.loading|=4}}var uu={$$typeof:Z,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function UC(i,s,o,u,f,m,_,S,O){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ii(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.hiddenUpdates=Ii(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function eT(i,s,o,u,f,m,_,S,O,H,W,te){return i=new UC(i,s,o,_,O,H,W,te,S),s=1,m===!0&&(s|=24),m=xn(3,null,null,s),i.current=m,m.stateNode=i,s=Ld(),s.refCount++,i.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},jd(m),i}function tT(i){return i?(i=lo,i):lo}function nT(i,s,o,u,f,m){f=tT(f),u.context===null?u.context=f:u.pendingContext=f,u=Wr(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Zr(i,u,s),o!==null&&(Cn(o,i,s),jl(o,i,s))}function iT(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function sp(i,s){iT(i,s),(i=i.alternate)&&iT(i,s)}function rT(i){if(i.tag===13||i.tag===31){var s=sa(i,67108864);s!==null&&Cn(s,i,67108864),sp(i,67108864)}}function sT(i){if(i.tag===13||i.tag===31){var s=Ln();s=Xs(s);var o=sa(i,s);o!==null&&Cn(o,i,s),sp(i,s)}}var Ih=!0;function zC(i,s,o,u){var f=Q.T;Q.T=null;var m=re.p;try{re.p=2,ap(i,s,o,u)}finally{re.p=m,Q.T=f}}function BC(i,s,o,u){var f=Q.T;Q.T=null;var m=re.p;try{re.p=8,ap(i,s,o,u)}finally{re.p=m,Q.T=f}}function ap(i,s,o,u){if(Ih){var f=op(u);if(f===null)Ym(i,s,u,Dh,o),oT(i,u);else if(FC(f,i,s,o,u))u.stopPropagation();else if(oT(i,u),s&4&&-1<jC.indexOf(i)){for(;f!==null;){var m=Bn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Ci(m.pendingLanes);if(_!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;_;){var O=1<<31-St(_);S.entanglements[1]|=O,_&=~O}Gi(m),(Qe&6)===0&&(hh=pn()+500,iu(0))}}break;case 31:case 13:S=sa(m,2),S!==null&&Cn(S,m,2),dh(),sp(m,2)}if(m=op(u),m===null&&Ym(i,s,u,Dh,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else Ym(i,s,u,null,o)}}function op(i){return i=jn(i),lp(i)}var Dh=null;function lp(i){if(Dh=null,i=Ni(i),i!==null){var s=l(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=c(s),i!==null)return i;i=null}else if(o===31){if(i=d(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Dh=i,null}function aT(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Hs()){case fl:return 2;case dl:return 8;case Vr:case md:return 32;case oc:return 268435456;default:return 32}default:return 32}}var up=!1,us=null,cs=null,hs=null,cu=new Map,hu=new Map,fs=[],jC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function oT(i,s){switch(i){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":cs=null;break;case"mouseover":case"mouseout":hs=null;break;case"pointerover":case"pointerout":cu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":hu.delete(s.pointerId)}}function fu(i,s,o,u,f,m){return i===null||i.nativeEvent!==m?(i={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Bn(s),s!==null&&rT(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function FC(i,s,o,u,f){switch(s){case"focusin":return us=fu(us,i,s,o,u,f),!0;case"dragenter":return cs=fu(cs,i,s,o,u,f),!0;case"mouseover":return hs=fu(hs,i,s,o,u,f),!0;case"pointerover":var m=f.pointerId;return cu.set(m,fu(cu.get(m)||null,i,s,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,hu.set(m,fu(hu.get(m)||null,i,s,o,u,f)),!0}return!1}function lT(i){var s=Ni(i.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){i.blockedOn=s,si(i.priority,function(){sT(o)});return}}else if(s===31){if(s=d(o),s!==null){i.blockedOn=s,si(i.priority,function(){sT(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Oh(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=op(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);Al=u,o.target.dispatchEvent(u),Al=null}else return s=Bn(o),s!==null&&rT(s),i.blockedOn=o,!1;s.shift()}return!0}function uT(i,s,o){Oh(i)&&o.delete(s)}function HC(){up=!1,us!==null&&Oh(us)&&(us=null),cs!==null&&Oh(cs)&&(cs=null),hs!==null&&Oh(hs)&&(hs=null),cu.forEach(uT),hu.forEach(uT)}function Nh(i,s){i.blockedOn===s&&(i.blockedOn=null,up||(up=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,HC)))}var xh=null;function cT(i){xh!==i&&(xh=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){xh===i&&(xh=null);for(var s=0;s<i.length;s+=3){var o=i[s],u=i[s+1],f=i[s+2];if(typeof u!="function"){if(lp(u||o)===null)continue;break}var m=Bn(o);m!==null&&(i.splice(s,3),s-=3,om(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Po(i){function s(O){return Nh(O,i)}us!==null&&Nh(us,i),cs!==null&&Nh(cs,i),hs!==null&&Nh(hs,i),cu.forEach(s),hu.forEach(s);for(var o=0;o<fs.length;o++){var u=fs[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<fs.length&&(o=fs[0],o.blockedOn===null);)lT(o),o.blockedOn===null&&fs.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],_=f[Xt]||null;if(typeof m=="function")_||cT(o);else if(_){var S=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[Xt]||null)S=_.formAction;else if(lp(f)!==null)continue}else S=_.action;typeof S=="function"?o[u+1]=S:(o.splice(u,3),u-=3),cT(o)}}}function hT(){function i(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function cp(i){this._internalRoot=i}Ph.prototype.render=cp.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=Ln();nT(o,u,i,s,null,null)},Ph.prototype.unmount=cp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;nT(i.current,2,null,i,null,null),dh(),s[Di]=null}};function Ph(i){this._internalRoot=i}Ph.prototype.unstable_scheduleHydration=function(i){if(i){var s=dc();i={blockedOn:null,target:i,priority:s};for(var o=0;o<fs.length&&s!==0&&s<fs[o].priority;o++);fs.splice(o,0,i),o===0&&lT(i)}};var fT=e.version;if(fT!=="19.2.3")throw Error(r(527,fT,"19.2.3"));re.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=g(s),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var qC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kh.isDisabled&&kh.supportsFiber)try{ii=kh.inject(qC),en=kh}catch{}}return mu.createRoot=function(i,s){if(!a(i))throw Error(r(299));var o=!1,u="",f=__,m=T_,_=E_;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=eT(i,1,!1,null,null,o,u,null,f,m,_,hT),i[Di]=s.current,Gm(i),new cp(s)},mu.hydrateRoot=function(i,s,o){if(!a(i))throw Error(r(299));var u=!1,f="",m=__,_=T_,S=E_,O=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(O=o.formState)),s=eT(i,1,!0,s,o??null,u,f,O,m,_,S,hT),s.context=tT(null),o=s.current,u=Ln(),u=Xs(u),f=Wr(u),f.callback=null,Zr(o,f,u),o=u,s.current.lanes=o,Gs(s,o),Gi(s),i[Di]=s.current,Gm(i),new Ph(s)},mu.version="19.2.3",mu}var ST;function t2(){if(ST)return dp.exports;ST=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),dp.exports=e2(),dp.exports}var n2=t2();var bT="popstate";function i2(n={}){function e(r,a){let{pathname:l,search:c,hash:d}=r.location;return Fp("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:Pu(a)}return s2(e,t,null,n)}function mt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ei(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function r2(){return Math.random().toString(36).substring(2,10)}function wT(n,e){return{usr:n.state,key:n.key,idx:e}}function Fp(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Jo(e):e,state:t,key:e&&e.key||r||r2()}}function Pu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Jo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function s2(n,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,d="POP",p=null,g=v();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function v(){return(c.state||{idx:null}).idx}function E(){d="POP";let V=v(),K=V==null?null:V-g;g=V,p&&p({action:d,location:z.location,delta:K})}function b(V,K){d="PUSH";let $=Fp(z.location,V,K);g=v()+1;let Z=wT($,g),ce=z.createHref($);try{c.pushState(Z,"",ce)}catch(me){if(me instanceof DOMException&&me.name==="DataCloneError")throw me;a.location.assign(ce)}l&&p&&p({action:d,location:z.location,delta:1})}function D(V,K){d="REPLACE";let $=Fp(z.location,V,K);g=v();let Z=wT($,g),ce=z.createHref($);c.replaceState(Z,"",ce),l&&p&&p({action:d,location:z.location,delta:0})}function L(V){return a2(V)}let z={get action(){return d},get location(){return n(a,c)},listen(V){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(bT,E),p=V,()=>{a.removeEventListener(bT,E),p=null}},createHref(V){return e(a,V)},createURL:L,encodeLocation(V){let K=L(V);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:b,replace:D,go(V){return c.go(V)}};return z}function a2(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),mt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Pu(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function MS(n,e,t="/"){return o2(n,e,t,!1)}function o2(n,e,t,r){let a=typeof e=="string"?Jo(e):e,l=Dr(a.pathname||"/",t);if(l==null)return null;let c=VS(n);l2(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=_2(l);d=y2(c[p],g,r)}return d}function VS(n,e=[],t=[],r="",a=!1){let l=(c,d,p=a,g)=>{let v={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(r)&&p)return;mt(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length)}let E=Ir([r,v.relativePath]),b=t.concat(v);c.children&&c.children.length>0&&(mt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),VS(c.children,e,b,E,p)),!(c.path==null&&!c.index)&&e.push({path:E,score:p2(E,c.index),routesMeta:b})};return n.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let p of LS(c.path))l(c,d,!0,p)}),e}function LS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=LS(r.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),a&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function l2(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:g2(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var u2=/^:[\w-]+$/,c2=3,h2=2,f2=1,d2=10,m2=-2,AT=n=>n==="*";function p2(n,e){let t=n.split("/"),r=t.length;return t.some(AT)&&(r+=m2),e&&(r+=h2),t.filter(a=>!AT(a)).reduce((a,l)=>a+(u2.test(l)?c2:l===""?f2:d2),r)}function g2(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function y2(n,e,t=!1){let{routesMeta:r}=n,a={},l="/",c=[];for(let d=0;d<r.length;++d){let p=r[d],g=d===r.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=cf({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),b=p.route;if(!E&&g&&t&&!r[r.length-1].route.index&&(E=cf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!E)return null;Object.assign(a,E.params),c.push({params:a,pathname:Ir([l,E.pathname]),pathnameBase:b2(Ir([l,E.pathnameBase])),route:b}),E.pathnameBase!=="/"&&(l=Ir([l,E.pathnameBase]))}return c}function cf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=v2(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((g,{paramName:v,isOptional:E},b)=>{if(v==="*"){let L=d[b]||"";c=l.slice(0,l.length-L.length).replace(/(.)\/+$/,"$1")}const D=d[b];return E&&!D?g[v]=void 0:g[v]=(D||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function v2(n,e=!1,t=!0){Ei(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(r.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function _2(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ei(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Dr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var US=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,T2=n=>US.test(n);function E2(n,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?Jo(n):n,l;if(t)if(T2(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Ei(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?l=CT(t.substring(1),"/"):l=CT(t,e)}else l=e;return{pathname:l,search:w2(r),hash:A2(a)}}function CT(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function yp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function S2(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function zS(n){let e=S2(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function BS(n,e,t,r=!1){let a;typeof n=="string"?a=Jo(n):(a={...n},mt(!a.pathname||!a.pathname.includes("?"),yp("?","pathname","search",a)),mt(!a.pathname||!a.pathname.includes("#"),yp("#","pathname","hash",a)),mt(!a.search||!a.search.includes("#"),yp("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!r&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),E-=1;a.pathname=b.join("/")}d=E>=0?e[E]:"/"}let p=E2(a,d),g=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var Ir=n=>n.join("/").replace(/\/\/+/g,"/"),b2=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),w2=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,A2=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,C2=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function R2(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function I2(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var jS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function FS(n,e){let t=n;if(typeof t!="string"||!US.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,a=!1;if(jS)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=Dr(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:a=!0}catch{Ei(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:a,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var HS=["POST","PUT","PATCH","DELETE"];new Set(HS);var D2=["GET",...HS];new Set(D2);var el=G.createContext(null);el.displayName="DataRouter";var Vf=G.createContext(null);Vf.displayName="DataRouterState";var O2=G.createContext(!1),qS=G.createContext({isTransitioning:!1});qS.displayName="ViewTransition";var N2=G.createContext(new Map);N2.displayName="Fetchers";var x2=G.createContext(null);x2.displayName="Await";var ni=G.createContext(null);ni.displayName="Navigation";var Gu=G.createContext(null);Gu.displayName="Location";var kr=G.createContext({outlet:null,matches:[],isDataRoute:!1});kr.displayName="Route";var Rg=G.createContext(null);Rg.displayName="RouteError";var GS="REACT_ROUTER_ERROR",P2="REDIRECT",k2="ROUTE_ERROR_RESPONSE";function M2(n){if(n.startsWith(`${GS}:${P2}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function V2(n){if(n.startsWith(`${GS}:${k2}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new C2(e.status,e.statusText,e.data)}catch{}}function L2(n,{relative:e}={}){mt(Yu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=G.useContext(ni),{hash:a,pathname:l,search:c}=Xu(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Ir([t,l])),r.createHref({pathname:d,search:c,hash:a})}function Yu(){return G.useContext(Gu)!=null}function Ua(){return mt(Yu(),"useLocation() may be used only in the context of a <Router> component."),G.useContext(Gu).location}var YS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function XS(n){G.useContext(ni).static||G.useLayoutEffect(n)}function KS(){let{isDataRoute:n}=G.useContext(kr);return n?$2():U2()}function U2(){mt(Yu(),"useNavigate() may be used only in the context of a <Router> component.");let n=G.useContext(el),{basename:e,navigator:t}=G.useContext(ni),{matches:r}=G.useContext(kr),{pathname:a}=Ua(),l=JSON.stringify(zS(r)),c=G.useRef(!1);return XS(()=>{c.current=!0}),G.useCallback((p,g={})=>{if(Ei(c.current,YS),!c.current)return;if(typeof p=="number"){t.go(p);return}let v=BS(p,JSON.parse(l),a,g.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Ir([e,v.pathname])),(g.replace?t.replace:t.push)(v,g.state,g)},[e,t,l,a,n])}G.createContext(null);function Xu(n,{relative:e}={}){let{matches:t}=G.useContext(kr),{pathname:r}=Ua(),a=JSON.stringify(zS(t));return G.useMemo(()=>BS(n,JSON.parse(a),r,e==="path"),[n,a,r,e])}function z2(n,e){return QS(n,e)}function QS(n,e,t,r,a){mt(Yu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=G.useContext(ni),{matches:c}=G.useContext(kr),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",v=d?d.pathnameBase:"/",E=d&&d.route;{let $=E&&E.path||"";WS(g,!E||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let b=Ua(),D;if(e){let $=typeof e=="string"?Jo(e):e;mt(v==="/"||$.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${$.pathname}" was given in the \`location\` prop.`),D=$}else D=b;let L=D.pathname||"/",z=L;if(v!=="/"){let $=v.replace(/^\//,"").split("/");z="/"+L.replace(/^\//,"").split("/").slice($.length).join("/")}let V=MS(n,{pathname:z});Ei(E||V!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),Ei(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let K=q2(V&&V.map($=>Object.assign({},$,{params:Object.assign({},p,$.params),pathname:Ir([v,l.encodeLocation?l.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?v:Ir([v,l.encodeLocation?l.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),c,t,r,a);return e&&K?G.createElement(Gu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...D},navigationType:"POP"}},K):K}function B2(){let n=Q2(),e=R2(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=G.createElement(G.Fragment,null,G.createElement("p",null," Hey developer "),G.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",G.createElement("code",{style:l},"ErrorBoundary")," or"," ",G.createElement("code",{style:l},"errorElement")," prop on your route.")),G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),t?G.createElement("pre",{style:a},t):null,c)}var j2=G.createElement(B2,null),$S=class extends G.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=V2(n.digest);t&&(n=t)}let e=n!==void 0?G.createElement(kr.Provider,{value:this.props.routeContext},G.createElement(Rg.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?G.createElement(F2,{error:n},e):e}};$S.contextType=O2;var vp=new WeakMap;function F2({children:n,error:e}){let{basename:t}=G.useContext(ni);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=M2(e.digest);if(r){let a=vp.get(e);if(a)throw a;let l=FS(r.location,t);if(jS&&!vp.get(e))if(l.isExternal||r.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:r.replace}));throw vp.set(e,c),c}return G.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function H2({routeContext:n,match:e,children:t}){let r=G.useContext(el);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),G.createElement(kr.Provider,{value:n},t)}function q2(n,e=[],t=null,r=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t?.errors;if(c!=null){let v=l.findIndex(E=>E.route.id&&c?.[E.route.id]!==void 0);mt(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let d=!1,p=-1;if(t)for(let v=0;v<l.length;v++){let E=l[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(p=v),E.route.id){let{loaderData:b,errors:D}=t,L=E.route.loader&&!b.hasOwnProperty(E.route.id)&&(!D||D[E.route.id]===void 0);if(E.route.lazy||L){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let g=t&&r?(v,E)=>{r(v,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:I2(t.matches),errorInfo:E})}:void 0;return l.reduceRight((v,E,b)=>{let D,L=!1,z=null,V=null;t&&(D=c&&E.route.id?c[E.route.id]:void 0,z=E.route.errorElement||j2,d&&(p<0&&b===0?(WS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,V=null):p===b&&(L=!0,V=E.route.hydrateFallbackElement||null)));let K=e.concat(l.slice(0,b+1)),$=()=>{let Z;return D?Z=z:L?Z=V:E.route.Component?Z=G.createElement(E.route.Component,null):E.route.element?Z=E.route.element:Z=v,G.createElement(H2,{match:E,routeContext:{outlet:v,matches:K,isDataRoute:t!=null},children:Z})};return t&&(E.route.ErrorBoundary||E.route.errorElement||b===0)?G.createElement($S,{location:t.location,revalidation:t.revalidation,component:z,error:D,children:$(),routeContext:{outlet:null,matches:K,isDataRoute:!0},onError:g}):$()},null)}function Ig(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function G2(n){let e=G.useContext(el);return mt(e,Ig(n)),e}function Y2(n){let e=G.useContext(Vf);return mt(e,Ig(n)),e}function X2(n){let e=G.useContext(kr);return mt(e,Ig(n)),e}function Dg(n){let e=X2(n),t=e.matches[e.matches.length-1];return mt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function K2(){return Dg("useRouteId")}function Q2(){let n=G.useContext(Rg),e=Y2("useRouteError"),t=Dg("useRouteError");return n!==void 0?n:e.errors?.[t]}function $2(){let{router:n}=G2("useNavigate"),e=Dg("useNavigate"),t=G.useRef(!1);return XS(()=>{t.current=!0}),G.useCallback(async(a,l={})=>{Ei(t.current,YS),t.current&&(typeof a=="number"?await n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var RT={};function WS(n,e,t){!e&&!RT[n]&&(RT[n]=!0,Ei(!1,t))}G.memo(W2);function W2({routes:n,future:e,state:t,onError:r}){return QS(n,void 0,t,r,e)}function Hp(n){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Z2({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){mt(!Yu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),p=G.useMemo(()=>({basename:d,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[d,a,l,c]);typeof t=="string"&&(t=Jo(t));let{pathname:g="/",search:v="",hash:E="",state:b=null,key:D="default"}=t,L=G.useMemo(()=>{let z=Dr(g,d);return z==null?null:{location:{pathname:z,search:v,hash:E,state:b,key:D},navigationType:r}},[d,g,v,E,b,D,r]);return Ei(L!=null,`<Router basename="${d}"> is not able to match the URL "${g}${v}${E}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:G.createElement(ni.Provider,{value:p},G.createElement(Gu.Provider,{children:e,value:L}))}function J2({children:n,location:e}){return z2(qp(n),e)}function qp(n,e=[]){let t=[];return G.Children.forEach(n,(r,a)=>{if(!G.isValidElement(r))return;let l=[...e,a];if(r.type===G.Fragment){t.push.apply(t,qp(r.props.children,l));return}mt(r.type===Hp,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=qp(r.props.children,l)),t.push(c)}),t}var $h="get",Wh="application/x-www-form-urlencoded";function Lf(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function eR(n){return Lf(n)&&n.tagName.toLowerCase()==="button"}function tR(n){return Lf(n)&&n.tagName.toLowerCase()==="form"}function nR(n){return Lf(n)&&n.tagName.toLowerCase()==="input"}function iR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function rR(n,e){return n.button===0&&(!e||e==="_self")&&!iR(n)}var Mh=null;function sR(){if(Mh===null)try{new FormData(document.createElement("form"),0),Mh=!1}catch{Mh=!0}return Mh}var aR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _p(n){return n!=null&&!aR.has(n)?(Ei(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wh}"`),null):n}function oR(n,e){let t,r,a,l,c;if(tR(n)){let d=n.getAttribute("action");r=d?Dr(d,e):null,t=n.getAttribute("method")||$h,a=_p(n.getAttribute("enctype"))||Wh,l=new FormData(n)}else if(eR(n)||nR(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||d.getAttribute("action");if(r=p?Dr(p,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||$h,a=_p(n.getAttribute("formenctype"))||_p(d.getAttribute("enctype"))||Wh,l=new FormData(d,n),!sR()){let{name:g,type:v,value:E}=n;if(v==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,E)}}else{if(Lf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=$h,r=null,a=Wh,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Og(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function lR(n,e,t,r){let a=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${r}`:a.pathname=`${a.pathname}.${r}`:a.pathname==="/"?a.pathname=`_root.${r}`:e&&Dr(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function uR(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cR(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function hR(n,e,t){let r=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await uR(l,t);return c.links?c.links():[]}return[]}));return pR(r.flat(1).filter(cR).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function IT(n,e,t,r,a,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>t[g].pathname!==p.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{let v=r.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let E=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function fR(n,e,{includeHydrateFallback:t}={}){return dR(n.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function dR(n){return[...new Set(n)]}function mR(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function pR(n,e){let t=new Set;return new Set(e),n.reduce((r,a)=>{let l=JSON.stringify(mR(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}function ZS(){let n=G.useContext(el);return Og(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function gR(){let n=G.useContext(Vf);return Og(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ng=G.createContext(void 0);Ng.displayName="FrameworkContext";function JS(){let n=G.useContext(Ng);return Og(n,"You must render this element inside a <HydratedRouter> element"),n}function yR(n,e){let t=G.useContext(Ng),[r,a]=G.useState(!1),[l,c]=G.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:E}=e,b=G.useRef(null);G.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let z=K=>{K.forEach($=>{c($.isIntersecting)})},V=new IntersectionObserver(z,{threshold:.5});return b.current&&V.observe(b.current),()=>{V.disconnect()}}},[n]),G.useEffect(()=>{if(r){let z=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(z)}}},[r]);let D=()=>{a(!0)},L=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,b,{}]:[l,b,{onFocus:pu(d,D),onBlur:pu(p,L),onMouseEnter:pu(g,D),onMouseLeave:pu(v,L),onTouchStart:pu(E,D)}]:[!1,b,{}]}function pu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function vR({page:n,...e}){let{router:t}=ZS(),r=G.useMemo(()=>MS(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?G.createElement(TR,{page:n,matches:r,...e}):null}function _R(n){let{manifest:e,routeModules:t}=JS(),[r,a]=G.useState([]);return G.useEffect(()=>{let l=!1;return hR(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),r}function TR({page:n,matches:e,...t}){let r=Ua(),{future:a,manifest:l,routeModules:c}=JS(),{basename:d}=ZS(),{loaderData:p,matches:g}=gR(),v=G.useMemo(()=>IT(n,e,g,l,r,"data"),[n,e,g,l,r]),E=G.useMemo(()=>IT(n,e,g,l,r,"assets"),[n,e,g,l,r]),b=G.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let z=new Set,V=!1;if(e.forEach($=>{let Z=l.routes[$.route.id];!Z||!Z.hasLoader||(!v.some(ce=>ce.route.id===$.route.id)&&$.route.id in p&&c[$.route.id]?.shouldRevalidate||Z.hasClientLoader?V=!0:z.add($.route.id))}),z.size===0)return[];let K=lR(n,d,a.unstable_trailingSlashAwareDataRequests,"data");return V&&z.size>0&&K.searchParams.set("_routes",e.filter($=>z.has($.route.id)).map($=>$.route.id).join(",")),[K.pathname+K.search]},[d,a.unstable_trailingSlashAwareDataRequests,p,r,l,v,e,n,c]),D=G.useMemo(()=>fR(E,l),[E,l]),L=_R(E);return G.createElement(G.Fragment,null,b.map(z=>G.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...t})),D.map(z=>G.createElement("link",{key:z,rel:"modulepreload",href:z,...t})),L.map(({key:z,link:V})=>G.createElement("link",{key:z,nonce:t.nonce,...V})))}function ER(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var SR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{SR&&(window.__reactRouterVersion="7.12.0")}catch{}function bR({basename:n,children:e,unstable_useTransitions:t,window:r}){let a=G.useRef();a.current==null&&(a.current=i2({window:r,v5Compat:!0}));let l=a.current,[c,d]=G.useState({action:l.action,location:l.location}),p=G.useCallback(g=>{t===!1?d(g):G.startTransition(()=>d(g))},[t]);return G.useLayoutEffect(()=>l.listen(p),[l,p]),G.createElement(Z2,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t})}var eb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wu=G.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:b,...D},L){let{basename:z,unstable_useTransitions:V}=G.useContext(ni),K=typeof g=="string"&&eb.test(g),$=FS(g,z);g=$.to;let Z=L2(g,{relative:a}),[ce,me,ye]=yR(r,D),C=RR(g,{replace:c,state:d,target:p,preventScrollReset:v,relative:a,viewTransition:E,unstable_defaultShouldRevalidate:b,unstable_useTransitions:V});function A(k){e&&e(k),k.defaultPrevented||C(k)}let R=G.createElement("a",{...D,...ye,href:$.absoluteURL||Z,onClick:$.isExternal||l?e:A,ref:ER(L,me),target:p,"data-discover":!K&&t==="render"?"true":void 0});return ce&&!K?G.createElement(G.Fragment,null,R,G.createElement(vR,{page:Z})):R});wu.displayName="Link";var wR=G.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:d,children:p,...g},v){let E=Xu(c,{relative:g.relative}),b=Ua(),D=G.useContext(Vf),{navigator:L,basename:z}=G.useContext(ni),V=D!=null&&xR(E)&&d===!0,K=L.encodeLocation?L.encodeLocation(E).pathname:E.pathname,$=b.pathname,Z=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;t||($=$.toLowerCase(),Z=Z?Z.toLowerCase():null,K=K.toLowerCase()),Z&&z&&(Z=Dr(Z,z)||Z);const ce=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let me=$===K||!a&&$.startsWith(K)&&$.charAt(ce)==="/",ye=Z!=null&&(Z===K||!a&&Z.startsWith(K)&&Z.charAt(K.length)==="/"),C={isActive:me,isPending:ye,isTransitioning:V},A=me?e:void 0,R;typeof r=="function"?R=r(C):R=[r,me?"active":null,ye?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let k=typeof l=="function"?l(C):l;return G.createElement(wu,{...g,"aria-current":A,className:R,ref:v,style:k,to:c,viewTransition:d},typeof p=="function"?p(C):p)});wR.displayName="NavLink";var AR=G.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=$h,action:d,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:b,...D},L)=>{let{unstable_useTransitions:z}=G.useContext(ni),V=OR(),K=NR(d,{relative:g}),$=c.toLowerCase()==="get"?"get":"post",Z=typeof d=="string"&&eb.test(d),ce=me=>{if(p&&p(me),me.defaultPrevented)return;me.preventDefault();let ye=me.nativeEvent.submitter,C=ye?.getAttribute("formmethod")||c,A=()=>V(ye||me.currentTarget,{fetcherKey:e,method:C,navigate:t,replace:a,state:l,relative:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:b});z&&t!==!1?G.startTransition(()=>A()):A()};return G.createElement("form",{ref:L,method:$,action:K,onSubmit:r?p:ce,...D,"data-discover":!Z&&n==="render"?"true":void 0})});AR.displayName="Form";function CR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tb(n){let e=G.useContext(el);return mt(e,CR(n)),e}function RR(n,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:p}={}){let g=KS(),v=Ua(),E=Xu(n,{relative:l});return G.useCallback(b=>{if(rR(b,e)){b.preventDefault();let D=t!==void 0?t:Pu(v)===Pu(E),L=()=>g(n,{replace:D,state:r,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});p?G.startTransition(()=>L()):L()}},[v,g,E,t,r,e,n,a,l,c,d,p])}var IR=0,DR=()=>`__${String(++IR)}__`;function OR(){let{router:n}=tb("useSubmit"),{basename:e}=G.useContext(ni),t=K2(),r=n.fetch,a=n.navigate;return G.useCallback(async(l,c={})=>{let{action:d,method:p,encType:g,formData:v,body:E}=oR(l,e);if(c.navigate===!1){let b=c.fetcherKey||DR();await r(b,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:E,formMethod:c.method||p,formEncType:c.encType||g,flushSync:c.flushSync})}else await a(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:E,formMethod:c.method||p,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,a,e,t])}function NR(n,{relative:e}={}){let{basename:t}=G.useContext(ni),r=G.useContext(kr);mt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...Xu(n||".",{relative:e})},c=Ua();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(v=>v==="")){d.delete("index"),p.filter(E=>E).forEach(E=>d.append("index",E));let v=d.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ir([t,l.pathname])),Pu(l)}function xR(n,{relative:e}={}){let t=G.useContext(qS);mt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=tb("useViewTransitionState"),a=Xu(n,{relative:e});if(!t.isTransitioning)return!1;let l=Dr(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Dr(t.nextLocation.pathname,r)||t.nextLocation.pathname;return cf(a.pathname,c)!=null||cf(a.pathname,l)!=null}const PR=()=>{};var DT={};const nb=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},kR=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],d=n[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},ib={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,d=c?n[a+1]:0,p=a+2<n.length,g=p?n[a+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let b=(d&15)<<2|g>>6,D=g&63;p||(D=64,c||(b=64)),r.push(t[v],t[E],t[b],t[D])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(nb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):kR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const E=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||g==null||E==null)throw new MR;const b=l<<2|d>>4;if(r.push(b),g!==64){const D=d<<4&240|g>>2;if(r.push(D),E!==64){const L=g<<6&192|E;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class MR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VR=function(n){const e=nb(n);return ib.encodeByteArray(e,!0)},hf=function(n){return VR(n).replace(/\./g,"")},rb=function(n){try{return ib.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function LR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const UR=()=>LR().__FIREBASE_DEFAULTS__,zR=()=>{if(typeof process>"u"||typeof DT>"u")return;const n=DT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},BR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&rb(n[1]);return e&&JSON.parse(e)},Uf=()=>{try{return PR()||UR()||zR()||BR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},sb=n=>Uf()?.emulatorHosts?.[n],ab=n=>{const e=sb(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ob=()=>Uf()?.config,lb=n=>Uf()?.[`_${n}`];class jR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function zs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xg(n){return(await fetch(n,{credentials:"include"})).ok}function ub(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[hf(JSON.stringify(t)),hf(JSON.stringify(c)),""].join(".")}const Au={};function FR(){const n={prod:[],emulator:[]};for(const e of Object.keys(Au))Au[e]?n.emulator.push(e):n.prod.push(e);return n}function HR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let OT=!1;function Pg(n,e){if(typeof window>"u"||typeof document>"u"||!zs(window.location.host)||Au[n]===e||Au[n]||OT)return;Au[n]=e;function t(b){return`__firebase__banner__${b}`}const r="__firebase__banner",l=FR().prod.length>0;function c(){const b=document.getElementById(r);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function p(b,D){b.setAttribute("width","24"),b.setAttribute("id",D),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{OT=!0,c()},b}function v(b,D){b.setAttribute("id",D),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function E(){const b=HR(r),D=t("text"),L=document.getElementById(D)||document.createElement("span"),z=t("learnmore"),V=document.getElementById(z)||document.createElement("a"),K=t("preprendIcon"),$=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const Z=b.element;d(Z),v(V,z);const ce=g();p($,K),Z.append($,L,V,ce),document.body.appendChild(Z)}l?(L.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function GR(){const n=Uf()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function KR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QR(){const n=mn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function $R(){return!GR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WR(){try{return typeof indexedDB=="object"}catch{return!1}}function ZR(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const JR="FirebaseError";class ir extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=JR,Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ku.prototype.create)}}class Ku{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?eI(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new ir(a,d,r)}}function eI(n,e){return n.replace(tI,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const tI=/\{\$([^}]+)}/g;function nI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ia(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=n[a],c=e[a];if(NT(l)&&NT(c)){if(!Ia(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function NT(n){return n!==null&&typeof n=="object"}function Qu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function iI(n,e){const t=new rI(n,e);return t.subscribe.bind(t)}class rI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");sI(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Tp),a.error===void 0&&(a.error=Tp),a.complete===void 0&&(a.complete=Tp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Tp(){}function Yt(n){return n&&n._delegate?n._delegate:n}class Ns{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const va="[DEFAULT]";class aI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new jR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lI(e))try{this.getOrInitializeService({instanceIdentifier:va})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=va){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=va){return this.instances.has(e)}getOptions(e=va){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:oI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=va){return this.component?this.component.multipleInstances?e:va:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oI(n){return n===va?void 0:n}function lI(n){return n.instantiationMode==="EAGER"}class uI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ze||(ze={}));const cI={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},hI=ze.INFO,fI={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},dI=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=fI[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kg{constructor(e){this.name=e,this._logLevel=hI,this._logHandler=dI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const mI=(n,e)=>e.some(t=>n instanceof t);let xT,PT;function pI(){return xT||(xT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gI(){return PT||(PT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cb=new WeakMap,Gp=new WeakMap,hb=new WeakMap,Ep=new WeakMap,Mg=new WeakMap;function yI(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ws(n.result)),a()},c=()=>{r(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&cb.set(t,n)}).catch(()=>{}),Mg.set(e,n),e}function vI(n){if(Gp.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Gp.set(n,e)}let Yp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Gp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||hb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ws(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _I(n){Yp=n(Yp)}function TI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Sp(this),e,...t);return hb.set(r,e.sort?e.sort():[e]),ws(r)}:gI().includes(n)?function(...e){return n.apply(Sp(this),e),ws(cb.get(this))}:function(...e){return ws(n.apply(Sp(this),e))}}function EI(n){return typeof n=="function"?TI(n):(n instanceof IDBTransaction&&vI(n),mI(n,pI())?new Proxy(n,Yp):n)}function ws(n){if(n instanceof IDBRequest)return yI(n);if(Ep.has(n))return Ep.get(n);const e=EI(n);return e!==n&&(Ep.set(n,e),Mg.set(e,n)),e}const Sp=n=>Mg.get(n);function SI(n,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),d=ws(c);return r&&c.addEventListener("upgradeneeded",p=>{r(ws(c.result),p.oldVersion,p.newVersion,ws(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const bI=["get","getKey","getAll","getAllKeys","count"],wI=["put","add","delete","clear"],bp=new Map;function kT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(bp.get(e))return bp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=wI.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||bI.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return r&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&p.done]))[0]};return bp.set(e,l),l}_I(n=>({...n,get:(e,t,r)=>kT(e,t)||n.get(e,t,r),has:(e,t)=>!!kT(e,t)||n.has(e,t)}));class AI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(CI(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function CI(n){return n.getComponent()?.type==="VERSION"}const Xp="@firebase/app",MT="0.14.7";const Or=new kg("@firebase/app"),RI="@firebase/app-compat",II="@firebase/analytics-compat",DI="@firebase/analytics",OI="@firebase/app-check-compat",NI="@firebase/app-check",xI="@firebase/auth",PI="@firebase/auth-compat",kI="@firebase/database",MI="@firebase/data-connect",VI="@firebase/database-compat",LI="@firebase/functions",UI="@firebase/functions-compat",zI="@firebase/installations",BI="@firebase/installations-compat",jI="@firebase/messaging",FI="@firebase/messaging-compat",HI="@firebase/performance",qI="@firebase/performance-compat",GI="@firebase/remote-config",YI="@firebase/remote-config-compat",XI="@firebase/storage",KI="@firebase/storage-compat",QI="@firebase/firestore",$I="@firebase/ai",WI="@firebase/firestore-compat",ZI="firebase",JI="12.8.0";const Kp="[DEFAULT]",eD={[Xp]:"fire-core",[RI]:"fire-core-compat",[DI]:"fire-analytics",[II]:"fire-analytics-compat",[NI]:"fire-app-check",[OI]:"fire-app-check-compat",[xI]:"fire-auth",[PI]:"fire-auth-compat",[kI]:"fire-rtdb",[MI]:"fire-data-connect",[VI]:"fire-rtdb-compat",[LI]:"fire-fn",[UI]:"fire-fn-compat",[zI]:"fire-iid",[BI]:"fire-iid-compat",[jI]:"fire-fcm",[FI]:"fire-fcm-compat",[HI]:"fire-perf",[qI]:"fire-perf-compat",[GI]:"fire-rc",[YI]:"fire-rc-compat",[XI]:"fire-gcs",[KI]:"fire-gcs-compat",[QI]:"fire-fst",[WI]:"fire-fst-compat",[$I]:"fire-vertex","fire-js":"fire-js",[ZI]:"fire-js-all"};const ff=new Map,tD=new Map,Qp=new Map;function VT(n,e){try{n.container.addComponent(e)}catch(t){Or.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Da(n){const e=n.name;if(Qp.has(e))return Or.debug(`There were multiple attempts to register component ${e}.`),!1;Qp.set(e,n);for(const t of ff.values())VT(t,n);for(const t of tD.values())VT(t,n);return!0}function zf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Zn(n){return n==null?!1:n.settings!==void 0}const nD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},As=new Ku("app","Firebase",nD);class iD{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw As.create("app-deleted",{appName:this._name})}}const za=JI;function fb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Kp,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw As.create("bad-app-name",{appName:String(a)});if(t||(t=ob()),!t)throw As.create("no-options");const l=ff.get(a);if(l){if(Ia(t,l.options)&&Ia(r,l.config))return l;throw As.create("duplicate-app",{appName:a})}const c=new uI(a);for(const p of Qp.values())c.addComponent(p);const d=new iD(t,r,c);return ff.set(a,d),d}function Vg(n=Kp){const e=ff.get(n);if(!e&&n===Kp&&ob())return fb();if(!e)throw As.create("no-app",{appName:n});return e}function Ki(n,e,t){let r=eD[n]??n;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Or.warn(c.join(" "));return}Da(new Ns(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const rD="firebase-heartbeat-database",sD=1,ku="firebase-heartbeat-store";let wp=null;function db(){return wp||(wp=SI(rD,sD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ku)}catch(t){console.warn(t)}}}}).catch(n=>{throw As.create("idb-open",{originalErrorMessage:n.message})})),wp}async function aD(n){try{const t=(await db()).transaction(ku),r=await t.objectStore(ku).get(mb(n));return await t.done,r}catch(e){if(e instanceof ir)Or.warn(e.message);else{const t=As.create("idb-get",{originalErrorMessage:e?.message});Or.warn(t.message)}}}async function LT(n,e){try{const r=(await db()).transaction(ku,"readwrite");await r.objectStore(ku).put(e,mb(n)),await r.done}catch(t){if(t instanceof ir)Or.warn(t.message);else{const r=As.create("idb-set",{originalErrorMessage:t?.message});Or.warn(r.message)}}}function mb(n){return`${n.name}!${n.options.appId}`}const oD=1024,lD=30;class uD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hD(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=UT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>lD){const a=fD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Or.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=UT(),{heartbeatsToSend:t,unsentEntries:r}=cD(this._heartbeatsCache.heartbeats),a=hf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Or.warn(e),""}}}function UT(){return new Date().toISOString().substring(0,10)}function cD(n,e=oD){const t=[];let r=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),zT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),zT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class hD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WR()?ZR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await aD(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return LT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return LT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function zT(n){return hf(JSON.stringify({version:2,heartbeats:n})).length}function fD(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function dD(n){Da(new Ns("platform-logger",e=>new AI(e),"PRIVATE")),Da(new Ns("heartbeat",e=>new uD(e),"PRIVATE")),Ki(Xp,MT,n),Ki(Xp,MT,"esm2020"),Ki("fire-js","")}dD("");var mD="firebase",pD="12.8.0";Ki(mD,pD,"app");function pb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gD=pb,gb=new Ku("auth","Firebase",pb());const df=new kg("@firebase/auth");function yD(n,...e){df.logLevel<=ze.WARN&&df.warn(`Auth (${za}): ${n}`,...e)}function Zh(n,...e){df.logLevel<=ze.ERROR&&df.error(`Auth (${za}): ${n}`,...e)}function er(n,...e){throw Ug(n,...e)}function _i(n,...e){return Ug(n,...e)}function Lg(n,e,t){const r={...gD(),[e]:t};return new Ku("auth","Firebase",r).create(e,{appName:n.name})}function wa(n){return Lg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vD(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&er(n,"argument-error"),Lg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ug(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return gb.create(n,...e)}function we(n,e,...t){if(!n)throw Ug(e,...t)}function Cr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Zh(e),new Error(e)}function Nr(n,e){n||Cr(e)}function $p(){return typeof self<"u"&&self.location?.href||""}function _D(){return BT()==="http:"||BT()==="https:"}function BT(){return typeof self<"u"&&self.location?.protocol||null}function TD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_D()||XR()||"connection"in navigator)?navigator.onLine:!0}function ED(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class $u{constructor(e,t){this.shortDelay=e,this.longDelay=t,Nr(t>e,"Short delay should be less than long delay!"),this.isMobile=qR()||KR()}get(){return TD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function zg(n,e){Nr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class yb{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const SD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const bD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wD=new $u(3e4,6e4);function Bg(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function tl(n,e,t,r,a={}){return vb(n,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const d=Qu({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:p,...l};return YR()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&zs(n.emulatorConfig.host)&&(g.credentials="include"),yb.fetch()(await _b(n,n.config.apiHost,t,d),g)})}async function vb(n,e,t){n._canInitEmulator=!1;const r={...SD,...e};try{const a=new CD(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Vh(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vh(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Vh(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Vh(n,"user-disabled",c);const v=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Lg(n,v,g);er(n,v)}}catch(a){if(a instanceof ir)throw a;er(n,"network-request-failed",{message:String(a)})}}async function AD(n,e,t,r,a={}){const l=await tl(n,e,t,r,a);return"mfaPendingCredential"in l&&er(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function _b(n,e,t,r){const a=`${e}${t}?${r}`,l=n,c=l.config.emulator?zg(n.config,a):`${n.config.apiScheme}://${a}`;return bD.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class CD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(_i(this.auth,"network-request-failed")),wD.get())})}}function Vh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=_i(n,e,r);return a.customData._tokenResponse=t,a}async function RD(n,e){return tl(n,"POST","/v1/accounts:delete",e)}async function mf(n,e){return tl(n,"POST","/v1/accounts:lookup",e)}function Cu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ID(n,e=!1){const t=Yt(n),r=await t.getIdToken(e),a=jg(r);we(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:Cu(Ap(a.auth_time)),issuedAtTime:Cu(Ap(a.iat)),expirationTime:Cu(Ap(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Ap(n){return Number(n)*1e3}function jg(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Zh("JWT malformed, contained fewer than 3 sections"),null;try{const a=rb(t);return a?JSON.parse(a):(Zh("Failed to decode base64 JWT payload"),null)}catch(a){return Zh("Caught error parsing JWT payload as JSON",a?.toString()),null}}function jT(n){const e=jg(n);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Mu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ir&&DD(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function DD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class OD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Wp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cu(this.lastLoginAt),this.creationTime=Cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function pf(n){const e=n.auth,t=await n.getIdToken(),r=await Mu(n,mf(e,{idToken:t}));we(r?.users.length,e,"internal-error");const a=r.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?Tb(a.providerUserInfo):[],c=xD(n.providerData,l),d=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!c?.length,g=d?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Wp(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function ND(n){const e=Yt(n);await pf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xD(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function Tb(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function PD(n,e){const t=await vb(n,{},async()=>{const r=Qu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await _b(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:r};return n.emulatorConfig&&zs(n.emulatorConfig.host)&&(p.credentials="include"),yb.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kD(n,e){return tl(n,"POST","/v2/accounts:revokeToken",Bg(n,e))}class Uo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=jT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await PD(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new Uo;return r&&(we(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(we(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(we(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Uo,this.toJSON())}_performRefresh(){return Cr("not implemented")}}function ms(n,e){we(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class gi{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new OD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Wp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Mu(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ID(this,e)}reload(){return ND(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await pf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(wa(this.auth));const e=await this.getIdToken();return await Mu(this,RD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:b,isAnonymous:D,providerData:L,stsTokenManager:z}=t;we(E&&z,e,"internal-error");const V=Uo.fromJSON(this.name,z);we(typeof E=="string",e,"internal-error"),ms(r,e.name),ms(a,e.name),we(typeof b=="boolean",e,"internal-error"),we(typeof D=="boolean",e,"internal-error"),ms(l,e.name),ms(c,e.name),ms(d,e.name),ms(p,e.name),ms(g,e.name),ms(v,e.name);const K=new gi({uid:E,auth:e,email:a,emailVerified:b,displayName:r,isAnonymous:D,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:V,createdAt:g,lastLoginAt:v});return L&&Array.isArray(L)&&(K.providerData=L.map($=>({...$}))),p&&(K._redirectEventId=p),K}static async _fromIdTokenResponse(e,t,r=!1){const a=new Uo;a.updateFromServerResponse(t);const l=new gi({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await pf(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];we(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?Tb(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new Uo;d.updateFromIdToken(r);const p=new gi({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Wp(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(p,g),p}}const FT=new Map;function Rr(n){Nr(n instanceof Function,"Expected a class definition");let e=FT.get(n);return e?(Nr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,FT.set(n,e),e)}class Eb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Eb.type="NONE";const HT=Eb;function Jh(n,e,t){return`firebase:${n}:${e}:${t}`}class zo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Jh(this.userKey,a.apiKey,l),this.fullPersistenceKey=Jh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await mf(this.auth,{idToken:e}).catch(()=>{});return t?gi._fromGetAccountInfoResponse(this.auth,t,e):null}return gi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new zo(Rr(HT),e,r);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Rr(HT);const c=Jh(r,e.config.apiKey,e.name);let d=null;for(const g of t)try{const v=await g._get(c);if(v){let E;if(typeof v=="string"){const b=await mf(e,{idToken:v}).catch(()=>{});if(!b)break;E=await gi._fromGetAccountInfoResponse(e,b,v)}else E=gi._fromJSON(e,v);g!==l&&(d=E),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new zo(l,e,r):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new zo(l,e,r))}}function qT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ab(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Sb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Rb(e))return"Blackberry";if(Ib(e))return"Webos";if(bb(e))return"Safari";if((e.includes("chrome/")||wb(e))&&!e.includes("edge/"))return"Chrome";if(Cb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Sb(n=mn()){return/firefox\//i.test(n)}function bb(n=mn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wb(n=mn()){return/crios\//i.test(n)}function Ab(n=mn()){return/iemobile/i.test(n)}function Cb(n=mn()){return/android/i.test(n)}function Rb(n=mn()){return/blackberry/i.test(n)}function Ib(n=mn()){return/webos/i.test(n)}function Fg(n=mn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function MD(n=mn()){return Fg(n)&&!!window.navigator?.standalone}function VD(){return QR()&&document.documentMode===10}function Db(n=mn()){return Fg(n)||Cb(n)||Ib(n)||Rb(n)||/windows phone/i.test(n)||Ab(n)}function Ob(n,e=[]){let t;switch(n){case"Browser":t=qT(mn());break;case"Worker":t=`${qT(mn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${za}/${r}`}class LD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function UD(n,e={}){return tl(n,"GET","/v2/passwordPolicy",Bg(n,e))}const zD=6;class BD{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??zD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class jD{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new GT(this),this.idTokenSubscription=new GT(this),this.beforeStateQueue=new LD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Rr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await zo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await mf(this,{idToken:e}),r=await gi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Zn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(r=d.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await pf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ED()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(wa(this));const t=e?Yt(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(wa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(wa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UD(this),t=new BD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ku("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await kD(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Rr(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await zo.create(this,[Rr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ob(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&yD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Bf(n){return Yt(n)}class GT{constructor(e){this.auth=e,this.observer=null,this.addObserver=iI(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Hg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FD(n){Hg=n}function HD(n){return Hg.loadJS(n)}function qD(){return Hg.gapiScript}function GD(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function YD(n,e){const t=zf(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Ia(l,e??{}))return a;er(a,"already-initialized")}return t.initialize({options:e})}function XD(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Rr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function KD(n,e,t){const r=Bf(n);we(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=Nb(e),{host:c,port:d}=QD(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){we(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),we(Ia(g,r.config.emulator)&&Ia(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,zs(c)?(xg(`${l}//${c}${p}`),Pg("Auth",!0)):$D()}function Nb(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function QD(n){const e=Nb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:YT(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:YT(c)}}}function YT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function $D(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class xb{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Cr("not implemented")}_getIdTokenResponse(e){return Cr("not implemented")}_linkToIdToken(e,t){return Cr("not implemented")}_getReauthenticationResolver(e){return Cr("not implemented")}}async function Bo(n,e){return AD(n,"POST","/v1/accounts:signInWithIdp",Bg(n,e))}const WD="http://localhost";class Oa extends xb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):er("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new Oa(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Bo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Bo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Bo(e,t)}buildRequest(){const e={requestUri:WD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Qu(t)}return e}}class qg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Wu extends qg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ps extends Wu{constructor(){super("facebook.com")}static credential(e){return Oa._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";ps.PROVIDER_ID="facebook.com";class Ar extends Wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oa._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ar.credential(t,r)}catch{return null}}}Ar.GOOGLE_SIGN_IN_METHOD="google.com";Ar.PROVIDER_ID="google.com";class gs extends Wu{constructor(){super("github.com")}static credential(e){return Oa._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.GITHUB_SIGN_IN_METHOD="github.com";gs.PROVIDER_ID="github.com";class ys extends Wu{constructor(){super("twitter.com")}static credential(e,t){return Oa._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ys.credential(t,r)}catch{return null}}}ys.TWITTER_SIGN_IN_METHOD="twitter.com";ys.PROVIDER_ID="twitter.com";class Yo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await gi._fromIdTokenResponse(e,r,a),c=XT(r);return new Yo({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=XT(r);return new Yo({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function XT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class gf extends ir{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,gf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new gf(e,t,r,a)}}function Pb(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?gf._fromErrorAndOperation(n,l,e,r):l})}async function ZD(n,e,t=!1){const r=await Mu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Yo._forOperation(n,"link",r)}async function JD(n,e,t=!1){const{auth:r}=n;if(Zn(r.app))return Promise.reject(wa(r));const a="reauthenticate";try{const l=await Mu(n,Pb(r,a,e,n),t);we(l.idToken,r,"internal-error");const c=jg(l.idToken);we(c,r,"internal-error");const{sub:d}=c;return we(n.uid===d,r,"user-mismatch"),Yo._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&er(r,"user-mismatch"),l}}async function e4(n,e,t=!1){if(Zn(n.app))return Promise.reject(wa(n));const r="signIn",a=await Pb(n,r,e),l=await Yo._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(l.user),l}function t4(n,e,t,r){return Yt(n).onIdTokenChanged(e,t,r)}function n4(n,e,t){return Yt(n).beforeAuthStateChanged(e,t)}function i4(n,e,t,r){return Yt(n).onAuthStateChanged(e,t,r)}function r4(n){return Yt(n).signOut()}const yf="__sak";class kb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yf,"1"),this.storage.removeItem(yf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const s4=1e3,a4=10;class Mb extends kb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Db(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);VD()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,a4):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},s4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Mb.type="LOCAL";const o4=Mb;class Vb extends kb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Vb.type="SESSION";const Gg=Vb;function l4(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class jf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new jf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await l4(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jf.receivers=[];function Yg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class u4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=Yg("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(E){const b=E;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Qi(){return window}function c4(n){Qi().location.href=n}function Lb(){return typeof Qi().WorkerGlobalScope<"u"&&typeof Qi().importScripts=="function"}async function h4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function f4(){return navigator?.serviceWorker?.controller||null}function d4(){return Lb()?self:null}const Ub="firebaseLocalStorageDb",m4=1,vf="firebaseLocalStorage",zb="fbase_key";class Zu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ff(n,e){return n.transaction([vf],e?"readwrite":"readonly").objectStore(vf)}function p4(){const n=indexedDB.deleteDatabase(Ub);return new Zu(n).toPromise()}function Zp(){const n=indexedDB.open(Ub,m4);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(vf,{keyPath:zb})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(vf)?e(r):(r.close(),await p4(),e(await Zp()))})})}async function KT(n,e,t){const r=Ff(n,!0).put({[zb]:e,value:t});return new Zu(r).toPromise()}async function g4(n,e){const t=Ff(n,!1).get(e),r=await new Zu(t).toPromise();return r===void 0?null:r.value}function QT(n,e){const t=Ff(n,!0).delete(e);return new Zu(t).toPromise()}const y4=800,v4=3;class Bb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>v4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Lb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jf._getInstance(d4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await h4(),!this.activeServiceWorker)return;this.sender=new u4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||f4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zp();return await KT(e,yf,"1"),await QT(e,yf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>KT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>g4(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>QT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Ff(a,!1).getAll();return new Zu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),y4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Bb.type="LOCAL";const _4=Bb;new $u(3e4,6e4);function jb(n,e){return e?Rr(e):(we(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Xg extends xb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function T4(n){return e4(n.auth,new Xg(n),n.bypassAuthState)}function E4(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),JD(t,new Xg(n),n.bypassAuthState)}async function S4(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),ZD(t,new Xg(n),n.bypassAuthState)}class Fb{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return T4;case"linkViaPopup":case"linkViaRedirect":return S4;case"reauthViaPopup":case"reauthViaRedirect":return E4;default:er(this.auth,"internal-error")}}resolve(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const b4=new $u(2e3,1e4);async function w4(n,e,t){if(Zn(n.app))return Promise.reject(_i(n,"operation-not-supported-in-this-environment"));const r=Bf(n);vD(n,e,qg);const a=jb(r,t);return new _a(r,"signInViaPopup",e,a).executeNotNull()}class _a extends Fb{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,_a.currentPopupAction&&_a.currentPopupAction.cancel(),_a.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Nr(this.filter.length===1,"Popup operations only handle one event");const e=Yg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(_i(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_i(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_a.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_i(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,b4.get())};e()}}_a.currentPopupAction=null;const A4="pendingRedirect",ef=new Map;class C4 extends Fb{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ef.get(this.auth._key());if(!e){try{const r=await R4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ef.set(this.auth._key(),e)}return this.bypassAuthState||ef.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function R4(n,e){const t=O4(e),r=D4(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function I4(n,e){ef.set(n._key(),e)}function D4(n){return Rr(n._redirectPersistence)}function O4(n){return Jh(A4,n.config.apiKey,n.name)}async function N4(n,e,t=!1){if(Zn(n.app))return Promise.reject(wa(n));const r=Bf(n),a=jb(r,e),c=await new C4(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const x4=600*1e3;class P4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!k4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Hb(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(_i(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=x4&&this.cachedEventUids.clear(),this.cachedEventUids.has($T(e))}saveEventToCache(e){this.cachedEventUids.add($T(e)),this.lastProcessedEventTime=Date.now()}}function $T(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Hb({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function k4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hb(n);default:return!1}}async function M4(n,e={}){return tl(n,"GET","/v1/projects",e)}const V4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,L4=/^https?/;async function U4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await M4(n);for(const t of e)try{if(z4(t))return}catch{}er(n,"unauthorized-domain")}function z4(n){const e=$p(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!L4.test(t))return!1;if(V4.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const B4=new $u(3e4,6e4);function WT(){const n=Qi().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function j4(n){return new Promise((e,t)=>{function r(){WT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{WT(),t(_i(n,"network-request-failed"))},timeout:B4.get()})}if(Qi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Qi().gapi?.load)r();else{const a=GD("iframefcb");return Qi()[a]=()=>{gapi.load?r():t(_i(n,"network-request-failed"))},HD(`${qD()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw tf=null,e})}let tf=null;function F4(n){return tf=tf||j4(n),tf}const H4=new $u(5e3,15e3),q4="__/auth/iframe",G4="emulator/auth/iframe",Y4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},X4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function K4(n){const e=n.config;we(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?zg(e,G4):`https://${n.config.authDomain}/${q4}`,r={apiKey:e.apiKey,appName:n.name,v:za},a=X4.get(n.config.apiHost);a&&(r.eid=a);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Qu(r).slice(1)}`}async function Q4(n){const e=await F4(n),t=Qi().gapi;return we(t,n,"internal-error"),e.open({where:document.body,url:K4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Y4,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=_i(n,"network-request-failed"),d=Qi().setTimeout(()=>{l(c)},H4.get());function p(){Qi().clearTimeout(d),a(r)}r.ping(p).then(p,()=>{l(c)})}))}const $4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},W4=500,Z4=600,J4="_blank",eO="http://localhost";class ZT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tO(n,e,t,r=W4,a=Z4){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p={...$4,width:r.toString(),height:a.toString(),top:l,left:c},g=mn().toLowerCase();t&&(d=wb(g)?J4:t),Sb(g)&&(e=e||eO,p.scrollbars="yes");const v=Object.entries(p).reduce((b,[D,L])=>`${b}${D}=${L},`,"");if(MD(g)&&d!=="_self")return nO(e||"",d),new ZT(null);const E=window.open(e||"",d,v);we(E,n,"popup-blocked");try{E.focus()}catch{}return new ZT(E)}function nO(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const iO="__/auth/handler",rO="emulator/auth/handler",sO=encodeURIComponent("fac");async function JT(n,e,t,r,a,l){we(n.config.authDomain,n,"auth-domain-config-required"),we(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:za,eventId:a};if(e instanceof qg){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",nI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof Wu){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),g=p?`#${sO}=${encodeURIComponent(p)}`:"";return`${aO(n)}?${Qu(d).slice(1)}${g}`}function aO({config:n}){return n.emulator?zg(n,rO):`https://${n.authDomain}/${iO}`}const Cp="webStorageSupport";class oO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gg,this._completeRedirectFn=N4,this._overrideRedirectResult=I4}async _openPopup(e,t,r,a){Nr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await JT(e,t,r,$p(),a);return tO(e,l,Yg())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await JT(e,t,r,$p(),a);return c4(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Nr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Q4(e),r=new P4(e);return t.register("authEvent",a=>(we(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cp,{type:Cp},a=>{const l=a?.[0]?.[Cp];l!==void 0&&t(!!l),er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=U4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Db()||bb()||Fg()}}const lO=oO;var eE="@firebase/auth",tE="1.12.0";class uO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function cO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hO(n){Da(new Ns("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;we(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ob(n)},g=new jD(r,a,l,p);return XD(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Da(new Ns("auth-internal",e=>{const t=Bf(e.getProvider("auth").getImmediate());return(r=>new uO(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ki(eE,tE,cO(n)),Ki(eE,tE,"esm2020")}const fO=300,dO=lb("authIdTokenMaxAge")||fO;let nE=null;const mO=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>dO)return;const a=t?.token;nE!==a&&(nE=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function pO(n=Vg()){const e=zf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=YD(n,{popupRedirectResolver:lO,persistence:[_4,o4,Gg]}),r=lb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=mO(l.toString());n4(t,c,()=>c(t.currentUser)),t4(t,d=>c(d))}}const a=sb("auth");return a&&KD(t,`http://${a}`),t}function gO(){return document.getElementsByTagName("head")?.[0]??document}FD({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const l=_i("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",gO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hO("Browser");var iE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Cs,qb;(function(){var n;function e(C,A){function R(){}R.prototype=A.prototype,C.F=A.prototype,C.prototype=new R,C.prototype.constructor=C,C.D=function(k,N,M){for(var I=Array(arguments.length-2),We=2;We<arguments.length;We++)I[We-2]=arguments[We];return A.prototype[N].apply(k,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,A,R){R||(R=0);const k=Array(16);if(typeof A=="string")for(var N=0;N<16;++N)k[N]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(N=0;N<16;++N)k[N]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=C.g[0],R=C.g[1],N=C.g[2];let M=C.g[3],I;I=A+(M^R&(N^M))+k[0]+3614090360&4294967295,A=R+(I<<7&4294967295|I>>>25),I=M+(N^A&(R^N))+k[1]+3905402710&4294967295,M=A+(I<<12&4294967295|I>>>20),I=N+(R^M&(A^R))+k[2]+606105819&4294967295,N=M+(I<<17&4294967295|I>>>15),I=R+(A^N&(M^A))+k[3]+3250441966&4294967295,R=N+(I<<22&4294967295|I>>>10),I=A+(M^R&(N^M))+k[4]+4118548399&4294967295,A=R+(I<<7&4294967295|I>>>25),I=M+(N^A&(R^N))+k[5]+1200080426&4294967295,M=A+(I<<12&4294967295|I>>>20),I=N+(R^M&(A^R))+k[6]+2821735955&4294967295,N=M+(I<<17&4294967295|I>>>15),I=R+(A^N&(M^A))+k[7]+4249261313&4294967295,R=N+(I<<22&4294967295|I>>>10),I=A+(M^R&(N^M))+k[8]+1770035416&4294967295,A=R+(I<<7&4294967295|I>>>25),I=M+(N^A&(R^N))+k[9]+2336552879&4294967295,M=A+(I<<12&4294967295|I>>>20),I=N+(R^M&(A^R))+k[10]+4294925233&4294967295,N=M+(I<<17&4294967295|I>>>15),I=R+(A^N&(M^A))+k[11]+2304563134&4294967295,R=N+(I<<22&4294967295|I>>>10),I=A+(M^R&(N^M))+k[12]+1804603682&4294967295,A=R+(I<<7&4294967295|I>>>25),I=M+(N^A&(R^N))+k[13]+4254626195&4294967295,M=A+(I<<12&4294967295|I>>>20),I=N+(R^M&(A^R))+k[14]+2792965006&4294967295,N=M+(I<<17&4294967295|I>>>15),I=R+(A^N&(M^A))+k[15]+1236535329&4294967295,R=N+(I<<22&4294967295|I>>>10),I=A+(N^M&(R^N))+k[1]+4129170786&4294967295,A=R+(I<<5&4294967295|I>>>27),I=M+(R^N&(A^R))+k[6]+3225465664&4294967295,M=A+(I<<9&4294967295|I>>>23),I=N+(A^R&(M^A))+k[11]+643717713&4294967295,N=M+(I<<14&4294967295|I>>>18),I=R+(M^A&(N^M))+k[0]+3921069994&4294967295,R=N+(I<<20&4294967295|I>>>12),I=A+(N^M&(R^N))+k[5]+3593408605&4294967295,A=R+(I<<5&4294967295|I>>>27),I=M+(R^N&(A^R))+k[10]+38016083&4294967295,M=A+(I<<9&4294967295|I>>>23),I=N+(A^R&(M^A))+k[15]+3634488961&4294967295,N=M+(I<<14&4294967295|I>>>18),I=R+(M^A&(N^M))+k[4]+3889429448&4294967295,R=N+(I<<20&4294967295|I>>>12),I=A+(N^M&(R^N))+k[9]+568446438&4294967295,A=R+(I<<5&4294967295|I>>>27),I=M+(R^N&(A^R))+k[14]+3275163606&4294967295,M=A+(I<<9&4294967295|I>>>23),I=N+(A^R&(M^A))+k[3]+4107603335&4294967295,N=M+(I<<14&4294967295|I>>>18),I=R+(M^A&(N^M))+k[8]+1163531501&4294967295,R=N+(I<<20&4294967295|I>>>12),I=A+(N^M&(R^N))+k[13]+2850285829&4294967295,A=R+(I<<5&4294967295|I>>>27),I=M+(R^N&(A^R))+k[2]+4243563512&4294967295,M=A+(I<<9&4294967295|I>>>23),I=N+(A^R&(M^A))+k[7]+1735328473&4294967295,N=M+(I<<14&4294967295|I>>>18),I=R+(M^A&(N^M))+k[12]+2368359562&4294967295,R=N+(I<<20&4294967295|I>>>12),I=A+(R^N^M)+k[5]+4294588738&4294967295,A=R+(I<<4&4294967295|I>>>28),I=M+(A^R^N)+k[8]+2272392833&4294967295,M=A+(I<<11&4294967295|I>>>21),I=N+(M^A^R)+k[11]+1839030562&4294967295,N=M+(I<<16&4294967295|I>>>16),I=R+(N^M^A)+k[14]+4259657740&4294967295,R=N+(I<<23&4294967295|I>>>9),I=A+(R^N^M)+k[1]+2763975236&4294967295,A=R+(I<<4&4294967295|I>>>28),I=M+(A^R^N)+k[4]+1272893353&4294967295,M=A+(I<<11&4294967295|I>>>21),I=N+(M^A^R)+k[7]+4139469664&4294967295,N=M+(I<<16&4294967295|I>>>16),I=R+(N^M^A)+k[10]+3200236656&4294967295,R=N+(I<<23&4294967295|I>>>9),I=A+(R^N^M)+k[13]+681279174&4294967295,A=R+(I<<4&4294967295|I>>>28),I=M+(A^R^N)+k[0]+3936430074&4294967295,M=A+(I<<11&4294967295|I>>>21),I=N+(M^A^R)+k[3]+3572445317&4294967295,N=M+(I<<16&4294967295|I>>>16),I=R+(N^M^A)+k[6]+76029189&4294967295,R=N+(I<<23&4294967295|I>>>9),I=A+(R^N^M)+k[9]+3654602809&4294967295,A=R+(I<<4&4294967295|I>>>28),I=M+(A^R^N)+k[12]+3873151461&4294967295,M=A+(I<<11&4294967295|I>>>21),I=N+(M^A^R)+k[15]+530742520&4294967295,N=M+(I<<16&4294967295|I>>>16),I=R+(N^M^A)+k[2]+3299628645&4294967295,R=N+(I<<23&4294967295|I>>>9),I=A+(N^(R|~M))+k[0]+4096336452&4294967295,A=R+(I<<6&4294967295|I>>>26),I=M+(R^(A|~N))+k[7]+1126891415&4294967295,M=A+(I<<10&4294967295|I>>>22),I=N+(A^(M|~R))+k[14]+2878612391&4294967295,N=M+(I<<15&4294967295|I>>>17),I=R+(M^(N|~A))+k[5]+4237533241&4294967295,R=N+(I<<21&4294967295|I>>>11),I=A+(N^(R|~M))+k[12]+1700485571&4294967295,A=R+(I<<6&4294967295|I>>>26),I=M+(R^(A|~N))+k[3]+2399980690&4294967295,M=A+(I<<10&4294967295|I>>>22),I=N+(A^(M|~R))+k[10]+4293915773&4294967295,N=M+(I<<15&4294967295|I>>>17),I=R+(M^(N|~A))+k[1]+2240044497&4294967295,R=N+(I<<21&4294967295|I>>>11),I=A+(N^(R|~M))+k[8]+1873313359&4294967295,A=R+(I<<6&4294967295|I>>>26),I=M+(R^(A|~N))+k[15]+4264355552&4294967295,M=A+(I<<10&4294967295|I>>>22),I=N+(A^(M|~R))+k[6]+2734768916&4294967295,N=M+(I<<15&4294967295|I>>>17),I=R+(M^(N|~A))+k[13]+1309151649&4294967295,R=N+(I<<21&4294967295|I>>>11),I=A+(N^(R|~M))+k[4]+4149444226&4294967295,A=R+(I<<6&4294967295|I>>>26),I=M+(R^(A|~N))+k[11]+3174756917&4294967295,M=A+(I<<10&4294967295|I>>>22),I=N+(A^(M|~R))+k[2]+718787259&4294967295,N=M+(I<<15&4294967295|I>>>17),I=R+(M^(N|~A))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(N+(I<<21&4294967295|I>>>11))&4294967295,C.g[2]=C.g[2]+N&4294967295,C.g[3]=C.g[3]+M&4294967295}r.prototype.v=function(C,A){A===void 0&&(A=C.length);const R=A-this.blockSize,k=this.C;let N=this.h,M=0;for(;M<A;){if(N==0)for(;M<=R;)a(this,C,M),M+=this.blockSize;if(typeof C=="string"){for(;M<A;)if(k[N++]=C.charCodeAt(M++),N==this.blockSize){a(this,k),N=0;break}}else for(;M<A;)if(k[N++]=C[M++],N==this.blockSize){a(this,k),N=0;break}}this.h=N,this.o+=A},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;A=this.o*8;for(var R=C.length-8;R<C.length;++R)C[R]=A&255,A/=256;for(this.v(C),C=Array(16),A=0,R=0;R<4;++R)for(let k=0;k<32;k+=8)C[A++]=this.g[R]>>>k&255;return C};function l(C,A){var R=d;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=A(C)}function c(C,A){this.h=A;const R=[];let k=!0;for(let N=C.length-1;N>=0;N--){const M=C[N]|0;k&&M==A||(R[N]=M,k=!1)}this.g=R}var d={};function p(C){return-128<=C&&C<128?l(C,function(A){return new c([A|0],A<0?-1:0)}):new c([C|0],C<0?-1:0)}function g(C){if(isNaN(C)||!isFinite(C))return E;if(C<0)return V(g(-C));const A=[];let R=1;for(let k=0;C>=R;k++)A[k]=C/R|0,R*=4294967296;return new c(A,0)}function v(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return V(v(C.substring(1),A));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=g(Math.pow(A,8));let k=E;for(let M=0;M<C.length;M+=8){var N=Math.min(8,C.length-M);const I=parseInt(C.substring(M,M+N),A);N<8?(N=g(Math.pow(A,N)),k=k.j(N).add(g(I))):(k=k.j(R),k=k.add(g(I)))}return k}var E=p(0),b=p(1),D=p(16777216);n=c.prototype,n.m=function(){if(z(this))return-V(this).m();let C=0,A=1;for(let R=0;R<this.g.length;R++){const k=this.i(R);C+=(k>=0?k:4294967296+k)*A,A*=4294967296}return C},n.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(L(this))return"0";if(z(this))return"-"+V(this).toString(C);const A=g(Math.pow(C,6));var R=this;let k="";for(;;){const N=ce(R,A).g;R=K(R,N.j(A));let M=((R.g.length>0?R.g[0]:R.h)>>>0).toString(C);if(R=N,L(R))return M+k;for(;M.length<6;)M="0"+M;k=M+k}},n.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function L(C){if(C.h!=0)return!1;for(let A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function z(C){return C.h==-1}n.l=function(C){return C=K(this,C),z(C)?-1:L(C)?0:1};function V(C){const A=C.g.length,R=[];for(let k=0;k<A;k++)R[k]=~C.g[k];return new c(R,~C.h).add(b)}n.abs=function(){return z(this)?V(this):this},n.add=function(C){const A=Math.max(this.g.length,C.g.length),R=[];let k=0;for(let N=0;N<=A;N++){let M=k+(this.i(N)&65535)+(C.i(N)&65535),I=(M>>>16)+(this.i(N)>>>16)+(C.i(N)>>>16);k=I>>>16,M&=65535,I&=65535,R[N]=I<<16|M}return new c(R,R[R.length-1]&-2147483648?-1:0)};function K(C,A){return C.add(V(A))}n.j=function(C){if(L(this)||L(C))return E;if(z(this))return z(C)?V(this).j(V(C)):V(V(this).j(C));if(z(C))return V(this.j(V(C)));if(this.l(D)<0&&C.l(D)<0)return g(this.m()*C.m());const A=this.g.length+C.g.length,R=[];for(var k=0;k<2*A;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(let N=0;N<C.g.length;N++){const M=this.i(k)>>>16,I=this.i(k)&65535,We=C.i(N)>>>16,Xe=C.i(N)&65535;R[2*k+2*N]+=I*Xe,$(R,2*k+2*N),R[2*k+2*N+1]+=M*Xe,$(R,2*k+2*N+1),R[2*k+2*N+1]+=I*We,$(R,2*k+2*N+1),R[2*k+2*N+2]+=M*We,$(R,2*k+2*N+2)}for(C=0;C<A;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=A;C<2*A;C++)R[C]=0;return new c(R,0)};function $(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function Z(C,A){this.g=C,this.h=A}function ce(C,A){if(L(A))throw Error("division by zero");if(L(C))return new Z(E,E);if(z(C))return A=ce(V(C),A),new Z(V(A.g),V(A.h));if(z(A))return A=ce(C,V(A)),new Z(V(A.g),A.h);if(C.g.length>30){if(z(C)||z(A))throw Error("slowDivide_ only works with positive integers.");for(var R=b,k=A;k.l(C)<=0;)R=me(R),k=me(k);var N=ye(R,1),M=ye(k,1);for(k=ye(k,2),R=ye(R,2);!L(k);){var I=M.add(k);I.l(C)<=0&&(N=N.add(R),M=I),k=ye(k,1),R=ye(R,1)}return A=K(C,N.j(A)),new Z(N,A)}for(N=E;C.l(A)>=0;){for(R=Math.max(1,Math.floor(C.m()/A.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),M=g(R),I=M.j(A);z(I)||I.l(C)>0;)R-=k,M=g(R),I=M.j(A);L(M)&&(M=b),N=N.add(M),C=K(C,I)}return new Z(N,C)}n.B=function(C){return ce(this,C).h},n.and=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let k=0;k<A;k++)R[k]=this.i(k)&C.i(k);return new c(R,this.h&C.h)},n.or=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let k=0;k<A;k++)R[k]=this.i(k)|C.i(k);return new c(R,this.h|C.h)},n.xor=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let k=0;k<A;k++)R[k]=this.i(k)^C.i(k);return new c(R,this.h^C.h)};function me(C){const A=C.g.length+1,R=[];for(let k=0;k<A;k++)R[k]=C.i(k)<<1|C.i(k-1)>>>31;return new c(R,C.h)}function ye(C,A){const R=A>>5;A%=32;const k=C.g.length-R,N=[];for(let M=0;M<k;M++)N[M]=A>0?C.i(M+R)>>>A|C.i(M+R+1)<<32-A:C.i(M+R);return new c(N,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,qb=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,Cs=c}).apply(typeof iE<"u"?iE:typeof self<"u"?self:typeof window<"u"?window:{});var Lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Gb,Eu,Yb,nf,Jp,Xb,Kb,Qb;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lh=="object"&&Lh];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function a(h,y){if(y)e:{var T=r;h=h.split(".");for(var w=0;w<h.length-1;w++){var B=h[w];if(!(B in T))break e;T=T[B]}h=h[h.length-1],w=T[h],y=y(w),y!=w&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var T=[],w;for(w in y)Object.prototype.hasOwnProperty.call(y,w)&&T.push([w,y[w]]);return T}});var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,T){return h.call.apply(h.bind,arguments)}function g(h,y,T){return g=p,g.apply(null,arguments)}function v(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var w=T.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function E(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(w,B,Y){for(var se=Array(arguments.length-2),De=2;De<arguments.length;De++)se[De-2]=arguments[De];return y.prototype[B].apply(w,se)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function D(h){const y=h.length;if(y>0){const T=Array(y);for(let w=0;w<y;w++)T[w]=h[w];return T}return[]}function L(h,y){for(let w=1;w<arguments.length;w++){const B=arguments[w];var T=typeof B;if(T=T!="object"?T:B?Array.isArray(B)?"array":T:"null",T=="array"||T=="object"&&typeof B.length=="number"){T=h.length||0;const Y=B.length||0;h.length=T+Y;for(let se=0;se<Y;se++)h[T+se]=B[se]}else h.push(B)}}class z{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function V(h){c.setTimeout(()=>{throw h},0)}function K(){var h=C;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ${constructor(){this.h=this.g=null}add(y,T){const w=Z.get();w.set(y,T),this.h?this.h.next=w:this.g=w,this.h=w}}var Z=new z(()=>new ce,h=>h.reset());class ce{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let me,ye=!1,C=new $,A=()=>{const h=Promise.resolve(void 0);me=()=>{h.then(R)}};function R(){for(var h;h=K();){try{h.h.call(h.g)}catch(T){V(T)}var y=Z;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ye=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,y),c.removeEventListener("test",T,y)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function We(h,y){N.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(We,N),We.prototype.init=function(h,y){const T=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&We.Z.h.call(this)},We.prototype.h=function(){We.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Xe="closure_listenable_"+(Math.random()*1e6|0),Q=0;function re(h,y,T,w,B){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!w,this.ha=B,this.key=++Q,this.da=this.fa=!1}function pe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ke(h,y,T){for(const w in h)y.call(T,h[w],w,h)}function qe(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function x(h){const y={};for(const T in h)y[T]=h[T];return y}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(h,y){let T,w;for(let B=1;B<arguments.length;B++){w=arguments[B];for(T in w)h[T]=w[T];for(let Y=0;Y<ee.length;Y++)T=ee[Y],Object.prototype.hasOwnProperty.call(w,T)&&(h[T]=w[T])}}function ue(h){this.src=h,this.g={},this.h=0}ue.prototype.add=function(h,y,T,w,B){const Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);const se=Ae(h,y,w,B);return se>-1?(y=h[se],T||(y.fa=!1)):(y=new re(y,this.src,Y,!!w,B),y.fa=T,h.push(y)),y};function Ee(h,y){const T=y.type;if(T in h.g){var w=h.g[T],B=Array.prototype.indexOf.call(w,y,void 0),Y;(Y=B>=0)&&Array.prototype.splice.call(w,B,1),Y&&(pe(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Ae(h,y,T,w){for(let B=0;B<h.length;++B){const Y=h[B];if(!Y.da&&Y.listener==y&&Y.capture==!!T&&Y.ha==w)return B}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),le={};function oe(h,y,T,w,B){if(Array.isArray(y)){for(let Y=0;Y<y.length;Y++)oe(h,y[Y],T,w,B);return null}return T=hl(T),h&&h[Xe]?h.J(y,T,d(w)?!!w.capture:!1,B):xe(h,y,T,!1,w,B)}function xe(h,y,T,w,B,Y){if(!y)throw Error("Invalid event type");const se=d(B)?!!B.capture:!!B;let De=Fs(h);if(De||(h[Pe]=De=new ue(h)),T=De.add(y,T,w,se,Y),T.proxy)return T;if(w=Ft(),T.proxy=w,w.src=h,w.listener=T,h.addEventListener)M||(B=se),B===void 0&&(B=!1),h.addEventListener(y.toString(),w,B);else if(h.attachEvent)h.attachEvent(wi(y.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Ft(){function h(T){return y.call(h.src,h.listener,T)}const y=ul;return h}function Et(h,y,T,w,B){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)Et(h,y[Y],T,w,B);else w=d(w)?!!w.capture:!!w,T=hl(T),h&&h[Xe]?(h=h.i,Y=String(y).toString(),Y in h.g&&(y=h.g[Y],T=Ae(y,T,w,B),T>-1&&(pe(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[Y],h.h--)))):h&&(h=Fs(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ae(y,T,w,B)),(T=h>-1?y[h]:null)&&Jt(T))}function Jt(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Xe])Ee(y.i,h);else{var T=h.type,w=h.proxy;y.removeEventListener?y.removeEventListener(T,w,h.capture):y.detachEvent?y.detachEvent(wi(T),w):y.addListener&&y.removeListener&&y.removeListener(w),(T=Fs(y))?(Ee(T,h),T.h==0&&(T.src=null,y[Pe]=null)):pe(h)}}}function wi(h){return h in le?le[h]:le[h]="on"+h}function ul(h,y){if(h.da)h=!0;else{y=new We(y,this);const T=h.listener,w=h.ha||h.src;h.fa&&Jt(h),h=T.call(w,y)}return h}function Fs(h){return h=h[Pe],h instanceof ue?h:null}var cl="__closure_events_fn_"+(Math.random()*1e9>>>0);function hl(h){return typeof h=="function"?h:(h[cl]||(h[cl]=function(y){return h.handleEvent(y)}),h[cl])}function It(){k.call(this),this.i=new ue(this),this.M=this,this.G=null}E(It,k),It.prototype[Xe]=!0,It.prototype.removeEventListener=function(h,y,T,w){Et(this,h,y,T,w)};function Ht(h,y){var T,w=h.G;if(w)for(T=[];w;w=w.G)T.push(w);if(h=h.M,w=y.type||y,typeof y=="string")y=new N(y,h);else if(y instanceof N)y.target=y.target||h;else{var B=y;y=new N(w,h),ae(y,B)}B=!0;let Y,se;if(T)for(se=T.length-1;se>=0;se--)Y=y.g=T[se],B=Mr(Y,w,!0,y)&&B;if(Y=y.g=h,B=Mr(Y,w,!0,y)&&B,B=Mr(Y,w,!1,y)&&B,T)for(se=0;se<T.length;se++)Y=y.g=T[se],B=Mr(Y,w,!1,y)&&B}It.prototype.N=function(){if(It.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let w=0;w<T.length;w++)pe(T[w]);delete h.g[y],h.h--}}this.G=null},It.prototype.J=function(h,y,T,w){return this.i.add(String(h),y,!1,T,w)},It.prototype.K=function(h,y,T,w){return this.i.add(String(h),y,!0,T,w)};function Mr(h,y,T,w){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let Y=0;Y<y.length;++Y){const se=y[Y];if(se&&!se.da&&se.capture==T){const De=se.listener,bt=se.ha||se.src;se.fa&&Ee(h.i,se),B=De.call(bt,w)!==!1&&B}}return B&&!w.defaultPrevented}function dd(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function ac(h){h.g=dd(()=>{h.g=null,h.i&&(h.i=!1,ac(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class pn extends k{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ac(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hs(h){k.call(this),this.h=h,this.g={}}E(Hs,k);var fl=[];function dl(h){ke(h.g,function(y,T){this.g.hasOwnProperty(T)&&Jt(y)},h),h.g={}}Hs.prototype.N=function(){Hs.Z.N.call(this),dl(this)},Hs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vr=c.JSON.stringify,md=c.JSON.parse,oc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function lc(){}function uc(){}var ii={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function en(){N.call(this,"d")}E(en,N);function zn(){N.call(this,"c")}E(zn,N);var St={},cc=null;function Ya(){return cc=cc||new It}St.Ia="serverreachability";function hc(h){N.call(this,St.Ia,h)}E(hc,N);function Ai(h){const y=Ya();Ht(y,new hc(y))}St.STAT_EVENT="statevent";function qs(h,y){N.call(this,St.STAT_EVENT,h),this.stat=y}E(qs,N);function Dt(h){const y=Ya();Ht(y,new qs(y,h))}St.Ja="timingevent";function Ci(h,y){N.call(this,St.Ja,h),this.size=y}E(Ci,N);function Ri(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function ri(){this.g=!0}ri.prototype.ua=function(){this.g=!1};function pd(h,y,T,w,B,Y){h.info(function(){if(h.g)if(Y){var se="",De=Y.split("&");for(let Ke=0;Ke<De.length;Ke++){var bt=De[Ke].split("=");if(bt.length>1){const ht=bt[0];bt=bt[1];const Hn=ht.split("_");se=Hn.length>=2&&Hn[1]=="type"?se+(ht+"="+bt+"&"):se+(ht+"=redacted&")}}}else se=null;else se=Y;return"XMLHTTP REQ ("+w+") [attempt "+B+"]: "+y+`
`+T+`
`+se})}function fc(h,y,T,w,B,Y,se){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+B+"]: "+y+`
`+T+`
`+Y+" "+se})}function Ii(h,y,T,w){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+gd(h,T)+(w?" "+w:"")})}function Gs(h,y){h.info(function(){return"TIMEOUT: "+y})}ri.prototype.info=function(){};function gd(h,y){if(!h.g)return y;if(!y)return null;try{const Y=JSON.parse(y);if(Y){for(h=0;h<Y.length;h++)if(Array.isArray(Y[h])){var T=Y[h];if(!(T.length<2)){var w=T[1];if(Array.isArray(w)&&!(w.length<1)){var B=w[0];if(B!="noop"&&B!="stop"&&B!="close")for(let se=1;se<w.length;se++)w[se]=""}}}}return Vr(Y)}catch{return y}}var Ys={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ml={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},pl;function Xs(){}E(Xs,lc),Xs.prototype.g=function(){return new XMLHttpRequest},pl=new Xs;function sr(h){return encodeURIComponent(String(h))}function dc(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function si(h,y,T,w){this.j=h,this.i=y,this.l=T,this.S=w||1,this.V=new Hs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ai}function ai(){this.i=null,this.g="",this.h=!1}var Ot={},Xt={};function Di(h,y,T){h.M=1,h.A=Ks(xt(y)),h.u=T,h.R=!0,Xa(h,null)}function Xa(h,y){h.F=Date.now(),Oi(h),h.B=xt(h.A);var T=h.B,w=h.S;Array.isArray(w)||(w=[String(w)]),Wa(T.i,"t",w),h.C=0,T=h.j.L,h.h=new ai,h.g=Ic(h.j,T?y:null,!h.u),h.P>0&&(h.O=new pn(g(h.Y,h,h.g),h.P)),y=h.V,T=h.g,w=h.ba;var B="readystatechange";Array.isArray(B)||(B&&(fl[0]=B.toString()),B=fl);for(let Y=0;Y<B.length;Y++){const se=oe(T,B[Y],w||y.handleEvent,!1,y.h||y);if(!se)break;y.g[se.key]=se}y=h.J?x(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Ai(),pd(h.i,h.v,h.B,h.l,h.S,h.u)}si.prototype.ba=function(h){h=h.target;const y=this.O;y&&ui(h)==3?y.j():this.Y(h)},si.prototype.Y=function(h){try{if(h==this.g)e:{const De=ui(this.g),bt=this.g.ya(),Ke=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||tn(this.g)))){this.K||De!=4||bt==7||(bt==8||Ke<=0?Ai(3):Ai(2)),Ni(this);var y=this.g.ca();this.X=y;var T=yd(this);if(this.o=y==200,fc(this.i,this.v,this.B,this.l,this.S,De,y),this.o){if(this.U&&!this.L){t:{if(this.g){var w,B=this.g;if((w=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(w)){var Y=w;break t}}Y=null}if(h=Y)Ii(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xi(this,h);else{this.o=!1,this.m=3,Dt(12),Dn(this),Bn(this);break e}}if(this.R){h=!0;let ht;for(;!this.K&&this.C<T.length;)if(ht=pc(this,T),ht==Xt){De==4&&(this.m=4,Dt(14),h=!1),Ii(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==Ot){this.m=4,Dt(15),Ii(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else Ii(this.i,this.l,ht,null),xi(this,ht);if(mc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||T.length!=0||this.h.h||(this.m=1,Dt(16),h=!1),this.o=this.o&&h,!h)Ii(this.i,this.l,T,"[Invalid Chunked Response]"),Dn(this),Bn(this);else if(T.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Ol(se),se.P=!0,Dt(11))}}else Ii(this.i,this.l,T,null),xi(this,T);De==4&&Dn(this),this.o&&!this.K&&(De==4?wc(this.j,this):(this.o=!1,Oi(this)))}else or(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),Dn(this),Bn(this)}}}catch{}};function yd(h){if(!mc(h))return h.g.la();const y=tn(h.g);if(y==="")return"";let T="";const w=y.length,B=ui(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Dn(h),Bn(h),"";h.h.i=new c.TextDecoder}for(let Y=0;Y<w;Y++)h.h.h=!0,T+=h.h.i.decode(y[Y],{stream:!(B&&Y==w-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function mc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function pc(h,y){var T=h.C,w=y.indexOf(`
`,T);return w==-1?Xt:(T=Number(y.substring(T,w)),isNaN(T)?Ot:(w+=1,w+T>y.length?Xt:(y=y.slice(w,w+T),h.C=w+T,y)))}si.prototype.cancel=function(){this.K=!0,Dn(this)};function Oi(h){h.T=Date.now()+h.H,Ka(h,h.H)}function Ka(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ri(g(h.aa,h),y)}function Ni(h){h.D&&(c.clearTimeout(h.D),h.D=null)}si.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Gs(this.i,this.B),this.M!=2&&(Ai(),Dt(17)),Dn(this),this.m=2,Bn(this)):Ka(this,this.T-h)};function Bn(h){h.j.I==0||h.K||wc(h.j,h)}function Dn(h){Ni(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,dl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function xi(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||ki(T.h,h))){if(!h.L&&ki(T.h,h)&&T.I==3){try{var w=T.Ba.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var B=w;if(B[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)no(T),qr(T);else break e;ta(T),Dt(18)}}else T.xa=B[1],0<T.xa-T.K&&B[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Ri(g(T.Va,T),6e3));Pi(T.h)<=1&&T.ta&&(T.ta=void 0)}else Bi(T,11)}else if((h.L||T.g==h)&&no(T),!I(y))for(B=T.Ba.g.parse(y),y=0;y<B.length;y++){let Ke=B[y];const ht=Ke[0];if(!(ht<=T.K))if(T.K=ht,Ke=Ke[1],T.I==2)if(Ke[0]=="c"){T.M=Ke[1],T.ba=Ke[2];const Hn=Ke[3];Hn!=null&&(T.ka=Hn,T.j.info("VER="+T.ka));const ji=Ke[4];ji!=null&&(T.za=ji,T.j.info("SVER="+T.za));const ci=Ke[5];ci!=null&&typeof ci=="number"&&ci>0&&(w=1.5*ci,T.O=w,T.j.info("backChannelRequestTimeoutMs_="+w)),w=T;const hi=h.g;if(hi){const na=hi.g?hi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(na){var Y=w.h;Y.g||na.indexOf("spdy")==-1&&na.indexOf("quic")==-1&&na.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(vl(Y,Y.h),Y.h=null))}if(w.G){const io=hi.g?hi.g.getResponseHeader("X-HTTP-Session-Id"):null;io&&(w.wa=io,Ze(w.J,w.G,io))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),w=T;var se=h;if(w.na=Rc(w,w.L?w.ba:null,w.W),se.L){_l(w.h,se);var De=se,bt=w.O;bt&&(De.H=bt),De.D&&(Ni(De),Oi(De)),w.g=se}else Sc(w);T.i.length>0&&zi(T)}else Ke[0]!="stop"&&Ke[0]!="close"||Bi(T,7);else T.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Bi(T,7):Il(T):Ke[0]!="noop"&&T.l&&T.l.qa(Ke),T.A=0)}}Ai(4)}catch{}}var Nt=class{constructor(h,y){this.g=h,this.map=y}};function gl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Pi(h){return h.h?1:h.g?h.g.size:0}function ki(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function vl(h,y){h.g?h.g.add(y):h.h=y}function _l(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}gl.prototype.cancel=function(){if(this.i=Tl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Tl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return D(h.i)}var gc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qa(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const w=h[T].indexOf("=");let B,Y=null;w>=0?(B=h[T].substring(0,w),Y=h[T].substring(w+1)):B=h[T],y(B,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function On(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof On?(this.l=h.l,Kt(this,h.j),this.o=h.o,this.g=h.g,Lr(this,h.u),this.h=h.h,El(this,Tc(h.i)),this.m=h.m):h&&(y=String(h).match(gc))?(this.l=!1,Kt(this,y[1]||"",!0),this.o=Mi(y[2]||""),this.g=Mi(y[3]||"",!0),Lr(this,y[4]),this.h=Mi(y[5]||"",!0),El(this,y[6]||"",!0),this.m=Mi(y[7]||"")):(this.l=!1,this.i=new zr(null,this.l))}On.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Qs(y,$a,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Qs(y,$a,!0),"@"),h.push(sr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Qs(T,T.charAt(0)=="/"?Sl:yc,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Qs(T,vc)),h.join("")},On.prototype.resolve=function(h){const y=xt(this);let T=!!h.j;T?Kt(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var w=h.h;if(T)Lr(y,h.u);else if(T=!!h.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var B=y.h.lastIndexOf("/");B!=-1&&(w=y.h.slice(0,B+1)+w)}if(B=w,B==".."||B==".")w="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){w=B.lastIndexOf("/",0)==0,B=B.split("/");const Y=[];for(let se=0;se<B.length;){const De=B[se++];De=="."?w&&se==B.length&&Y.push(""):De==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),w&&se==B.length&&Y.push("")):(Y.push(De),w=!0)}w=Y.join("/")}else w=B}return T?y.h=w:T=h.i.toString()!=="",T?El(y,Tc(h.i)):T=!!h.m,T&&(y.m=h.m),y};function xt(h){return new On(h)}function Kt(h,y,T){h.j=T?Mi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Lr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function El(h,y,T){y instanceof zr?(h.i=y,Za(h.i,h.l)):(T||(y=Qs(y,Ur)),h.i=new zr(y,h.l))}function Ze(h,y,T){h.i.set(y,T)}function Ks(h){return Ze(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Mi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Qs(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,Tn),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Tn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var $a=/[#\/\?@]/g,yc=/[#\?:]/g,Sl=/[#\?]/g,Ur=/[#\?@]/g,vc=/#/g;function zr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function En(h){h.g||(h.g=new Map,h.h=0,h.i&&Qa(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}n=zr.prototype,n.add=function(h,y){En(this),this.i=null,h=Br(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function _c(h,y){En(h),y=Br(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function bl(h,y){return En(h),y=Br(h,y),h.g.has(y)}n.forEach=function(h,y){En(this),this.g.forEach(function(T,w){T.forEach(function(B){h.call(y,B,w,this)},this)},this)};function wl(h,y){En(h);let T=[];if(typeof y=="string")bl(h,y)&&(T=T.concat(h.g.get(Br(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}n.set=function(h,y){return En(this),this.i=null,h=Br(this,h),bl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=wl(this,h),h.length>0?String(h[0]):y):y};function Wa(h,y,T){_c(h,y),T.length>0&&(h.i=null,h.g.set(Br(h,y),D(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let w=0;w<y.length;w++){var T=y[w];const B=sr(T);T=wl(this,T);for(let Y=0;Y<T.length;Y++){let se=B;T[Y]!==""&&(se+="="+sr(T[Y])),h.push(se)}}return this.i=h.join("&")};function Tc(h){const y=new zr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Br(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Za(h,y){y&&!h.j&&(En(h),h.i=null,h.g.forEach(function(T,w){const B=w.toLowerCase();w!=B&&(_c(this,w),Wa(this,B,T))},h)),h.j=y}function oi(h,y){const T=new ri;if(c.Image){const w=new Image;w.onload=v(jn,T,"TestLoadImage: loaded",!0,y,w),w.onerror=v(jn,T,"TestLoadImage: error",!1,y,w),w.onabort=v(jn,T,"TestLoadImage: abort",!1,y,w),w.ontimeout=v(jn,T,"TestLoadImage: timeout",!1,y,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else y(!1)}function Al(h,y){const T=new ri,w=new AbortController,B=setTimeout(()=>{w.abort(),jn(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:w.signal}).then(Y=>{clearTimeout(B),Y.ok?jn(T,"TestPingServer: ok",!0,y):jn(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),jn(T,"TestPingServer: error",!1,y)})}function jn(h,y,T,w,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),w(T)}catch{}}function jr(){this.g=new oc}function Vi(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Vi,lc),Vi.prototype.g=function(){return new $s(this.i,this.h)};function $s(h,y){It.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E($s,It),n=$s.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,li(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fr(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,li(this)),this.g&&(this.readyState=3,li(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ja(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ja(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Fr(this):li(this),this.readyState==3&&Ja(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Fr(this))},n.Na=function(h){this.g&&(this.response=h,Fr(this))},n.ga=function(){this.g&&Fr(this)};function Fr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,li(h)}n.setRequestHeader=function(h,y){this.A.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function li(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty($s.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Fn(h){let y="";return ke(h,function(T,w){y+=w,y+=":",y+=T,y+=`\r
`}),y}function Ws(h,y,T){e:{for(w in T){var w=!1;break e}w=!0}w||(T=Fn(T),typeof h=="string"?T!=null&&sr(T):Ze(h,y,T))}function tt(h){It.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(tt,It);var Li=/^https?$/i,Cl=["POST","PUT"];n=tt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,y,T,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():pl.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Y){Zs(this,Y);return}if(h=T||"",T=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var B in w)T.set(B,w[B]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Y of w.keys())T.set(Y,w.get(Y));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(T.keys()).find(Y=>Y.toLowerCase()=="content-type"),B=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Cl,y,void 0)>=0)||w||B||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,se]of T)this.g.setRequestHeader(Y,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Y){Zs(this,Y)}};function Zs(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Rl(h),ar(h)}function Rl(h){h.A||(h.A=!0,Ht(h,"complete"),Ht(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ht(this,"complete"),Ht(this,"abort"),ar(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ar(this,!0)),tt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Js(this):this.Xa())},n.Xa=function(){Js(this)};function Js(h){if(h.h&&typeof l<"u"){if(h.v&&ui(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ht(h,"readystatechange"),ui(h)==4){h.h=!1;try{const Y=h.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var w;if(w=Y===0){let se=String(h.D).match(gc)[1]||null;!se&&c.self&&c.self.location&&(se=c.self.location.protocol.slice(0,-1)),w=!Li.test(se?se.toLowerCase():"")}T=w}if(T)Ht(h,"complete"),Ht(h,"success");else{h.o=6;try{var B=ui(h)>2?h.g.statusText:""}catch{B=""}h.l=B+" ["+h.ca()+"]",Rl(h)}}finally{ar(h)}}}}function ar(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||Ht(h,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ui(h){return h.g?h.g.readyState:0}n.ca=function(){try{return ui(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),md(y)}};function tn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function or(h){const y={};h=(h.g&&ui(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(I(h[w]))continue;var T=dc(h[w]);const B=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Y=y[B]||[];y[B]=Y,Y.push(T)}qe(y,function(w){return w.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ui(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function Hr(h){this.za=0,this.i=[],this.j=new ri,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ui("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ui("baseRetryDelayMs",5e3,h),this.Za=Ui("retryDelaySeedMs",1e4,h),this.Ta=Ui("forwardChannelMaxRetries",2,h),this.va=Ui("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new gl(h&&h.concurrentRequestLimit),this.Ba=new jr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Hr.prototype,n.ka=8,n.I=1,n.connect=function(h,y,T,w){Dt(0),this.W=h,this.H=y||{},T&&w!==void 0&&(this.H.OSID=T,this.H.OAID=w),this.F=this.X,this.J=Rc(this,null,this.W),zi(this)};function Il(h){if(eo(h),h.I==3){var y=h.V++,T=xt(h.J);if(Ze(T,"SID",h.M),Ze(T,"RID",y),Ze(T,"TYPE","terminate"),ea(h,T),y=new si(h,h.j,y),y.M=2,y.A=Ks(xt(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=y.A,T=!0),T||(y.g=Ic(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Oi(y)}Cc(h)}function qr(h){h.g&&(Ol(h),h.g.cancel(),h.g=null)}function eo(h){qr(h),h.v&&(c.clearTimeout(h.v),h.v=null),no(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function zi(h){if(!yl(h.h)&&!h.m){h.m=!0;var y=h.Ea;me||A(),ye||(me(),ye=!0),C.add(y,h),h.D=0}}function to(h,y){return Pi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ri(g(h.Ea,h,y),Ac(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const B=new si(this,this.j,h);let Y=this.o;if(this.U&&(Y?(Y=x(Y),ae(Y,this.U)):Y=this.U),this.u!==null||this.R||(B.J=Y,Y=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var w=this.i[T];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=Ec(this,B,y),T=xt(this.J),Ze(T,"RID",h),Ze(T,"CVER",22),this.G&&Ze(T,"X-HTTP-Session-Id",this.G),ea(this,T),Y&&(this.R?y="headers="+sr(Fn(Y))+"&"+y:this.u&&Ws(T,this.u,Y)),vl(this.h,B),this.Ra&&Ze(T,"TYPE","init"),this.S?(Ze(T,"$req",y),Ze(T,"SID","null"),B.U=!0,Di(B,T,null)):Di(B,T,y),this.I=2}}else this.I==3&&(h?Dl(this,h):this.i.length==0||yl(this.h)||Dl(this))};function Dl(h,y){var T;y?T=y.l:T=h.V++;const w=xt(h.J);Ze(w,"SID",h.M),Ze(w,"RID",T),Ze(w,"AID",h.K),ea(h,w),h.u&&h.o&&Ws(w,h.u,h.o),T=new si(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Ec(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),vl(h.h,T),Di(T,w,y)}function ea(h,y){h.H&&ke(h.H,function(T,w){Ze(y,w,T)}),h.l&&ke({},function(T,w){Ze(y,w,T)})}function Ec(h,y,T){T=Math.min(h.i.length,T);const w=h.l?g(h.l.Ka,h.l,h):null;e:{var B=h.i;let De=-1;for(;;){const bt=["count="+T];De==-1?T>0?(De=B[0].g,bt.push("ofs="+De)):De=0:bt.push("ofs="+De);let Ke=!0;for(let ht=0;ht<T;ht++){var Y=B[ht].g;const Hn=B[ht].map;if(Y-=De,Y<0)De=Math.max(0,B[ht].g-100),Ke=!1;else try{Y="req"+Y+"_"||"";try{var se=Hn instanceof Map?Hn:Object.entries(Hn);for(const[ji,ci]of se){let hi=ci;d(ci)&&(hi=Vr(ci)),bt.push(Y+ji+"="+encodeURIComponent(hi))}}catch(ji){throw bt.push(Y+"type="+encodeURIComponent("_badmap")),ji}}catch{w&&w(Hn)}}if(Ke){se=bt.join("&");break e}}se=void 0}return h=h.i.splice(0,T),y.G=h,se}function Sc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;me||A(),ye||(me(),ye=!0),C.add(y,h),h.A=0}}function ta(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ri(g(h.Da,h),Ac(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,bc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ri(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),qr(this),bc(this))};function Ol(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function bc(h){h.g=new si(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=xt(h.na);Ze(y,"RID","rpc"),Ze(y,"SID",h.M),Ze(y,"AID",h.K),Ze(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ze(y,"TO",h.ia),Ze(y,"TYPE","xmlhttp"),ea(h,y),h.u&&h.o&&Ws(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=Ks(xt(y)),T.u=null,T.R=!0,Xa(T,h)}n.Va=function(){this.C!=null&&(this.C=null,qr(this),ta(this),Dt(19))};function no(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function wc(h,y){var T=null;if(h.g==y){no(h),Ol(h),h.g=null;var w=2}else if(ki(h.h,y))T=y.G,_l(h.h,y),w=1;else return;if(h.I!=0){if(y.o)if(w==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var B=h.D;w=Ya(),Ht(w,new Ci(w,T)),zi(h)}else Sc(h);else if(B=y.m,B==3||B==0&&y.X>0||!(w==1&&to(h,y)||w==2&&ta(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),B){case 1:Bi(h,5);break;case 4:Bi(h,10);break;case 3:Bi(h,6);break;default:Bi(h,2)}}}function Ac(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function Bi(h,y){if(h.j.info("Error code "+y),y==2){var T=g(h.bb,h),w=h.Ua;const B=!w;w=new On(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Kt(w,"https"),Ks(w),B?oi(w.toString(),T):Al(w.toString(),T)}else Dt(2);h.I=0,h.l&&h.l.pa(y),Cc(h),eo(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function Cc(h){if(h.I=0,h.ja=[],h.l){const y=Tl(h.h);(y.length!=0||h.i.length!=0)&&(L(h.ja,y),L(h.ja,h.i),h.h.i.length=0,D(h.i),h.i.length=0),h.l.oa()}}function Rc(h,y,T){var w=T instanceof On?xt(T):new On(T);if(w.g!="")y&&(w.g=y+"."+w.g),Lr(w,w.u);else{var B=c.location;w=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const Y=new On(null);w&&Kt(Y,w),y&&(Y.g=y),B&&Lr(Y,B),T&&(Y.h=T),w=Y}return T=h.G,y=h.wa,T&&y&&Ze(w,T,y),Ze(w,"VER",h.ka),ea(h,w),w}function Ic(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new tt(new Vi({ab:T})):new tt(h.ma),y.Fa(h.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dc(){}n=Dc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Gr(){}Gr.prototype.g=function(h,y){return new gn(h,y)};function gn(h,y){It.call(this),this.g=new Hr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!I(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new lr(this)}E(gn,It),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Il(this.g)},gn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=Vr(h),h=T);y.i.push(new Nt(y.Ya++,h)),y.I==3&&zi(y)},gn.prototype.N=function(){this.g.l=null,delete this.j,Il(this.g),delete this.g,gn.Z.N.call(this)};function Oc(h){en.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(Oc,en);function Nc(){zn.call(this),this.status=1}E(Nc,zn);function lr(h){this.g=h}E(lr,Dc),lr.prototype.ra=function(){Ht(this.g,"a")},lr.prototype.qa=function(h){Ht(this.g,new Oc(h))},lr.prototype.pa=function(h){Ht(this.g,new Nc)},lr.prototype.oa=function(){Ht(this.g,"b")},Gr.prototype.createWebChannel=Gr.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Qb=function(){return new Gr},Kb=function(){return Ya()},Xb=St,Jp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ys.NO_ERROR=0,Ys.TIMEOUT=8,Ys.HTTP_ERROR=6,nf=Ys,ml.COMPLETE="complete",Yb=ml,uc.EventType=ii,ii.OPEN="a",ii.CLOSE="b",ii.ERROR="c",ii.MESSAGE="d",It.prototype.listen=It.prototype.J,Eu=uc,tt.prototype.listenOnce=tt.prototype.K,tt.prototype.getLastError=tt.prototype.Ha,tt.prototype.getLastErrorCode=tt.prototype.ya,tt.prototype.getStatus=tt.prototype.ca,tt.prototype.getResponseJson=tt.prototype.La,tt.prototype.getResponseText=tt.prototype.la,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Fa,Gb=tt}).apply(typeof Lh<"u"?Lh:typeof self<"u"?self:typeof window<"u"?window:{});class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");let nl="12.8.0";function yO(n){nl=n}const Na=new kg("@firebase/firestore");function ko(){return Na.logLevel}function fe(n,...e){if(Na.logLevel<=ze.DEBUG){const t=e.map(Kg);Na.debug(`Firestore (${nl}): ${n}`,...t)}}function xr(n,...e){if(Na.logLevel<=ze.ERROR){const t=e.map(Kg);Na.error(`Firestore (${nl}): ${n}`,...t)}}function Xo(n,...e){if(Na.logLevel<=ze.WARN){const t=e.map(Kg);Na.warn(`Firestore (${nl}): ${n}`,...t)}}function Kg(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Se(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,$b(n,r,t)}function $b(n,e,t){let r=`FIRESTORE (${nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw xr(r),new Error(r)}function $e(n,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,n||$b(e,a,r)}function Ie(n,e){return n}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends ir{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Wb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(fn.UNAUTHENTICATED)))}shutdown(){}}class _O{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class TO{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0,42304);let r=this.i;const a=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let l=new Rs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Rs,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},d=p=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Rs)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string",31837,{l:r}),new Wb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class EO{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class SO{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new EO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class rE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0,3512);const r=l=>{l.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,fe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new rE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?($e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new rE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function wO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Qg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=wO(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Be(n,e){return n<e?-1:n>e?1:0}function eg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const a=n.charAt(r),l=e.charAt(r);if(a!==l)return Rp(a)===Rp(l)?Be(a,l):Rp(a)?1:-1}return Be(n.length,e.length)}const AO=55296,CO=57343;function Rp(n){const e=n.charCodeAt(0);return e>=AO&&e<=CO}function Ko(n,e,t){return n.length===e.length&&n.every(((r,a)=>t(r,e[a])))}const sE="__name__";class Yi{constructor(e,t,r){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Se(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Yi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yi?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Yi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Be(e.length,t.length)}static compareSegments(e,t){const r=Yi.isNumericId(e),a=Yi.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Yi.extractNumericId(e).compare(Yi.extractNumericId(t)):eg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cs.fromString(e.substring(4,e.length-2))}}class ot extends Yi{construct(e,t,r){return new ot(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new ot(t)}static emptyPath(){return new ot([])}}const RO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends Yi{construct(e,t,r){return new ln(e,t,r)}static isValidIdentifier(e){return RO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sE}static keyField(){return new ln([sE])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new he(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new he(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new he(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(t)}static emptyPath(){return new ln([])}}class _e{constructor(e){this.path=e}static fromPath(e){return new _e(ot.fromString(e))}static fromName(e){return new _e(ot.fromString(e).popFirst(5))}static empty(){return new _e(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new ot(e.slice()))}}function Zb(n,e,t){if(!t)throw new he(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function IO(n,e,t,r){if(e===!0&&r===!0)throw new he(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function aE(n){if(!_e.isDocumentKey(n))throw new he(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function oE(n){if(_e.isDocumentKey(n))throw new he(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jb(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Hf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function Vu(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hf(n);throw new he(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Bt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ju(n,e){if(!Jb(n))throw new he(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new he(ne.INVALID_ARGUMENT,t);return!0}const lE=-62135596800,uE=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*uE);return new ct(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<lE)throw new he(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uE}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ju(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-lE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:Bt("string",ct._jsonSchemaVersion),seconds:Bt("number"),nanoseconds:Bt("number")};class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new ct(0,0))}static max(){return new Ce(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Lu=-1;function DO(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=Ce.fromTimestamp(r===1e9?new ct(t+1,0):new ct(t,r));return new xs(a,_e.empty(),e)}function OO(n){return new xs(n.readTime,n.key,Lu)}class xs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new xs(Ce.min(),_e.empty(),Lu)}static max(){return new xs(Ce.max(),_e.empty(),Lu)}}function NO(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}const xO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function il(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==xO)throw n;fe("LocalStore","Unexpectedly lost primary lease")}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,r)=>{t(e)}))}static reject(e){return new ie(((t,r)=>{r(e)}))}static waitFor(e){return new ie(((t,r)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(p=>r(p)))})),c=!0,l===a&&t()}))}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next((a=>a?ie.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new ie(((r,a)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((v=>{c[g]=v,++d,d===l&&r(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new ie(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}function kO(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function rl(n){return n.name==="IndexedDbTransactionError"}class qf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qf.ce=-1;const $g=-1;function Gf(n){return n==null}function _f(n){return n===0&&1/n==-1/0}function MO(n){return typeof n=="number"&&Number.isInteger(n)&&!_f(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const e1="";function VO(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=cE(e)),e=LO(n.get(t),e);return cE(e)}function LO(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case e1:t+="";break;default:t+=l}}return t}function cE(n){return n+e1+""}function hE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ba(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function t1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class pt{constructor(e,t){this.comparator=e,this.root=t||on.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uh(this.root,e,this.comparator,!0)}}class Uh{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??on.RED,this.left=a??on.EMPTY,this.right=l??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new on(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return on.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new on(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fE(this.data.getIterator())}getIteratorFrom(e){return new fE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class fE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class yi{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new yi([])}unionWith(e){let t=new Gt(ln.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new yi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ko(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class n1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new n1("Invalid base64 string: "+l):l}})(e);return new un(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const UO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(n){if($e(!!n,39018),typeof n=="string"){let e=0;const t=UO.exec(n);if($e(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ct(n.seconds),nanos:Ct(n.nanos)}}function Ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ks(n){return typeof n=="string"?un.fromBase64String(n):un.fromUint8Array(n)}const i1="server_timestamp",r1="__type__",s1="__previous_value__",a1="__local_write_time__";function Wg(n){return(n?.mapValue?.fields||{})[r1]?.stringValue===i1}function Yf(n){const e=n.mapValue.fields[s1];return Wg(e)?Yf(e):e}function Uu(n){const e=Ps(n.mapValue.fields[a1].timestampValue);return new ct(e.seconds,e.nanos)}class zO{constructor(e,t,r,a,l,c,d,p,g,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=E}}const Tf="(default)";class zu{constructor(e,t){this.projectId=e,this.database=t||Tf}static empty(){return new zu("","")}get isDefaultDatabase(){return this.database===Tf}isEqual(e){return e instanceof zu&&e.projectId===this.projectId&&e.database===this.database}}function BO(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new he(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zu(n.options.projectId,e)}const o1="__type__",jO="__max__",zh={mapValue:{}},l1="__vector__",Ef="value";function Ms(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Wg(n)?4:HO(n)?9007199254740991:FO(n)?10:11:Se(28295,{value:n})}function tr(n,e){if(n===e)return!0;const t=Ms(n);if(t!==Ms(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Uu(n).isEqual(Uu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Ps(a.timestampValue),d=Ps(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return ks(a.bytesValue).isEqual(ks(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return Ct(a.geoPointValue.latitude)===Ct(l.geoPointValue.latitude)&&Ct(a.geoPointValue.longitude)===Ct(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Ct(a.integerValue)===Ct(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Ct(a.doubleValue),d=Ct(l.doubleValue);return c===d?_f(c)===_f(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Ko(n.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(hE(c)!==hE(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!tr(c[p],d[p])))return!1;return!0})(n,e);default:return Se(52216,{left:n})}}function Bu(n,e){return(n.values||[]).find((t=>tr(t,e)))!==void 0}function Qo(n,e){if(n===e)return 0;const t=Ms(n),r=Ms(e);if(t!==r)return Be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=Ct(l.integerValue||l.doubleValue),p=Ct(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return dE(n.timestampValue,e.timestampValue);case 4:return dE(Uu(n),Uu(e));case 5:return eg(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=ks(l),p=ks(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const v=Be(d[g],p[g]);if(v!==0)return v}return Be(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Be(Ct(l.latitude),Ct(c.latitude));return d!==0?d:Be(Ct(l.longitude),Ct(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return mE(n.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},p=c.fields||{},g=d[Ef]?.arrayValue,v=p[Ef]?.arrayValue,E=Be(g?.values?.length||0,v?.values?.length||0);return E!==0?E:mE(g,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===zh.mapValue&&c===zh.mapValue)return 0;if(l===zh.mapValue)return 1;if(c===zh.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const b=eg(p[E],v[E]);if(b!==0)return b;const D=Qo(d[p[E]],g[v[E]]);if(D!==0)return D}return Be(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function dE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);const t=Ps(n),r=Ps(e),a=Be(t.seconds,r.seconds);return a!==0?a:Be(t.nanos,r.nanos)}function mE(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=Qo(t[a],r[a]);if(l)return l}return Be(t.length,r.length)}function $o(n){return tg(n)}function tg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Ps(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ks(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return _e.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=tg(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${tg(t.fields[c])}`;return a+"}"})(n.mapValue):Se(61005,{value:n})}function rf(n){switch(Ms(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yf(n);return e?16+rf(e):16;case 5:return 2*n.stringValue.length;case 6:return ks(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+rf(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let a=0;return Ba(r.fields,((l,c)=>{a+=l.length+rf(c)})),a})(n.mapValue);default:throw Se(13486,{value:n})}}function pE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ng(n){return!!n&&"integerValue"in n}function Zg(n){return!!n&&"arrayValue"in n}function gE(n){return!!n&&"nullValue"in n}function yE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sf(n){return!!n&&"mapValue"in n}function FO(n){return(n?.mapValue?.fields||{})[o1]?.stringValue===l1}function Ru(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ba(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ru(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ru(n.arrayValue.values[t]);return e}return{...n}}function HO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===jO}class Jn{constructor(e){this.value=e}static empty(){return new Jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!sf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ru(t)}setAll(e){let t=ln.emptyPath(),r={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=Ru(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());sf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];sf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Ba(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Jn(Ru(this.value))}}function u1(n){const e=[];return Ba(n.fields,((t,r)=>{const a=new ln([t]);if(sf(r)){const l=u1(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new yi(e)}class dn{constructor(e,t,r,a,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new dn(e,0,Ce.min(),Ce.min(),Ce.min(),Jn.empty(),0)}static newFoundDocument(e,t,r,a){return new dn(e,1,t,Ce.min(),r,a,0)}static newNoDocument(e,t){return new dn(e,2,t,Ce.min(),Ce.min(),Jn.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,Ce.min(),Ce.min(),Jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Sf{constructor(e,t){this.position=e,this.inclusive=t}}function vE(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?r=_e.comparator(_e.fromName(c.referenceValue),t.key):r=Qo(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function _E(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!tr(n.position[t],e.position[t]))return!1;return!0}class ju{constructor(e,t="asc"){this.field=e,this.dir=t}}function qO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class c1{}class zt extends c1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new YO(e,t,r):t==="array-contains"?new QO(e,r):t==="in"?new $O(e,r):t==="not-in"?new WO(e,r):t==="array-contains-any"?new ZO(e,r):new zt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new XO(e,r):new KO(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Qo(t,this.value)):t!==null&&Ms(this.value)===Ms(t)&&this.matchesComparison(Qo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Si extends c1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Si(e,t)}matches(e){return h1(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function h1(n){return n.op==="and"}function f1(n){return GO(n)&&h1(n)}function GO(n){for(const e of n.filters)if(e instanceof Si)return!1;return!0}function ig(n){if(n instanceof zt)return n.field.canonicalString()+n.op.toString()+$o(n.value);if(f1(n))return n.filters.map((e=>ig(e))).join(",");{const e=n.filters.map((t=>ig(t))).join(",");return`${n.op}(${e})`}}function d1(n,e){return n instanceof zt?(function(r,a){return a instanceof zt&&r.op===a.op&&r.field.isEqual(a.field)&&tr(r.value,a.value)})(n,e):n instanceof Si?(function(r,a){return a instanceof Si&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,d)=>l&&d1(c,a.filters[d])),!0):!1})(n,e):void Se(19439)}function m1(n){return n instanceof zt?(function(t){return`${t.field.canonicalString()} ${t.op} ${$o(t.value)}`})(n):n instanceof Si?(function(t){return t.op.toString()+" {"+t.getFilters().map(m1).join(" ,")+"}"})(n):"Filter"}class YO extends zt{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class XO extends zt{constructor(e,t){super(e,"in",t),this.keys=p1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class KO extends zt{constructor(e,t){super(e,"not-in",t),this.keys=p1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function p1(n,e){return(e.arrayValue?.values||[]).map((t=>_e.fromName(t.referenceValue)))}class QO extends zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zg(t)&&Bu(t.arrayValue,this.value)}}class $O extends zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Bu(this.value.arrayValue,t)}}class WO extends zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Bu(this.value.arrayValue,t)}}class ZO extends zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Bu(this.value.arrayValue,r)))}}class JO{constructor(e,t=null,r=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function TE(n,e=null,t=[],r=[],a=null,l=null,c=null){return new JO(n,e,t,r,a,l,c)}function Jg(n){const e=Ie(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>ig(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Gf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>$o(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>$o(r))).join(",")),e.Te=t}return e.Te}function ey(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!qO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!d1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_E(n.startAt,e.startAt)&&_E(n.endAt,e.endAt)}function rg(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class sl{constructor(e,t=null,r=[],a=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function eN(n,e,t,r,a,l,c,d){return new sl(n,e,t,r,a,l,c,d)}function g1(n){return new sl(n)}function EE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function tN(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function y1(n){return n.collectionGroup!==null}function Iu(n){const e=Ie(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Gt(ln.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ju(l,r))})),t.has(ln.keyField().canonicalString())||e.Ie.push(new ju(ln.keyField(),r))}return e.Ie}function $i(n){const e=Ie(n);return e.Ee||(e.Ee=nN(e,Iu(n))),e.Ee}function nN(n,e){if(n.limitType==="F")return TE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new ju(a.field,l)}));const t=n.endAt?new Sf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Sf(n.startAt.position,n.startAt.inclusive):null;return TE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function sg(n,e){const t=n.filters.concat([e]);return new sl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function iN(n,e){const t=n.explicitOrderBy.concat([e]);return new sl(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function ag(n,e,t){return new sl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xf(n,e){return ey($i(n),$i(e))&&n.limitType===e.limitType}function v1(n){return`${Jg($i(n))}|lt:${n.limitType}`}function Mo(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>m1(a))).join(", ")}]`),Gf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>$o(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>$o(a))).join(",")),`Target(${r})`})($i(n))}; limitType=${n.limitType})`}function Kf(n,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):_e.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,a){for(const l of Iu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(r,a){return!(r.startAt&&!(function(c,d,p){const g=vE(c,d,p);return c.inclusive?g<=0:g<0})(r.startAt,Iu(r),a)||r.endAt&&!(function(c,d,p){const g=vE(c,d,p);return c.inclusive?g>=0:g>0})(r.endAt,Iu(r),a))})(n,e)}function rN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function _1(n){return(e,t)=>{let r=!1;for(const a of Iu(n)){const l=sN(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function sN(n,e,t){const r=n.field.isKeyField()?_e.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?Qo(p,g):Se(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Se(19790,{direction:n.dir})}}class ja{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ba(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return t1(this.inner)}size(){return this.innerSize}}const aN=new pt(_e.comparator);function Pr(){return aN}const T1=new pt(_e.comparator);function Su(...n){let e=T1;for(const t of n)e=e.insert(t.key,t);return e}function E1(n){let e=T1;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ta(){return Du()}function S1(){return Du()}function Du(){return new ja((n=>n.toString()),((n,e)=>n.isEqual(e)))}const oN=new pt(_e.comparator),lN=new Gt(_e.comparator);function je(...n){let e=lN;for(const t of n)e=e.add(t);return e}const uN=new Gt(Be);function cN(){return uN}function ty(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_f(e)?"-0":e}}function b1(n){return{integerValue:""+n}}function hN(n,e){return MO(e)?b1(e):ty(n,e)}class Qf{constructor(){this._=void 0}}function fN(n,e,t){return n instanceof bf?(function(a,l){const c={fields:{[r1]:{stringValue:i1},[a1]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Wg(l)&&(l=Yf(l)),l&&(c.fields[s1]=l),{mapValue:c}})(t,e):n instanceof Fu?A1(n,e):n instanceof Hu?C1(n,e):(function(a,l){const c=w1(a,l),d=SE(c)+SE(a.Ae);return ng(c)&&ng(a.Ae)?b1(d):ty(a.serializer,d)})(n,e)}function dN(n,e,t){return n instanceof Fu?A1(n,e):n instanceof Hu?C1(n,e):t}function w1(n,e){return n instanceof wf?(function(r){return ng(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class bf extends Qf{}class Fu extends Qf{constructor(e){super(),this.elements=e}}function A1(n,e){const t=R1(e);for(const r of n.elements)t.some((a=>tr(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Hu extends Qf{constructor(e){super(),this.elements=e}}function C1(n,e){let t=R1(e);for(const r of n.elements)t=t.filter((a=>!tr(a,r)));return{arrayValue:{values:t}}}class wf extends Qf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function SE(n){return Ct(n.integerValue||n.doubleValue)}function R1(n){return Zg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function mN(n,e){return n.field.isEqual(e.field)&&(function(r,a){return r instanceof Fu&&a instanceof Fu||r instanceof Hu&&a instanceof Hu?Ko(r.elements,a.elements,tr):r instanceof wf&&a instanceof wf?tr(r.Ae,a.Ae):r instanceof bf&&a instanceof bf})(n.transform,e.transform)}class pN{constructor(e,t){this.version=e,this.transformResults=t}}class Wi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wi}static exists(e){return new Wi(void 0,e)}static updateTime(e){return new Wi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function af(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class $f{}function I1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ny(n.key,Wi.none()):new ec(n.key,n.data,Wi.none());{const t=n.data,r=Jn.empty();let a=new Gt(ln.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Fa(n.key,r,new yi(a.toArray()),Wi.none())}}function gN(n,e,t){n instanceof ec?(function(a,l,c){const d=a.value.clone(),p=wE(a.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Fa?(function(a,l,c){if(!af(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=wE(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(D1(a)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Ou(n,e,t,r){return n instanceof ec?(function(l,c,d,p){if(!af(l.precondition,c))return d;const g=l.value.clone(),v=AE(l.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,r):n instanceof Fa?(function(l,c,d,p){if(!af(l.precondition,c))return d;const g=AE(l.fieldTransforms,p,c),v=c.data;return v.setAll(D1(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,r):(function(l,c,d){return af(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function yN(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=w1(r.transform,a||null);l!=null&&(t===null&&(t=Jn.empty()),t.set(r.field,l))}return t||null}function bE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Ko(r,a,((l,c)=>mN(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ec extends $f{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Fa extends $f{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function D1(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function wE(n,e,t){const r=new Map;$e(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,d=e.data.field(l.field);r.set(l.field,dN(c,d,t[a]))}return r}function AE(n,e,t){const r=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);r.set(a.field,fN(l,c,e))}return r}class ny extends $f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vN extends $f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _N{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&gN(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ou(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ou(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=S1();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const p=I1(c,d);p!==null&&r.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(Ce.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),je())}isEqual(e){return this.batchId===e.batchId&&Ko(this.mutations,e.mutations,((t,r)=>bE(t,r)))&&Ko(this.baseMutations,e.baseMutations,((t,r)=>bE(t,r)))}}class iy{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){$e(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return oN})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new iy(e,t,r,a)}}class TN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class EN{constructor(e,t){this.count=e,this.unchangedNames=t}}var Lt,He;function SN(n){switch(n){case ne.OK:return Se(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function O1(n){if(n===void 0)return xr("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Lt.OK:return ne.OK;case Lt.CANCELLED:return ne.CANCELLED;case Lt.UNKNOWN:return ne.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return ne.INTERNAL;case Lt.UNAVAILABLE:return ne.UNAVAILABLE;case Lt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Lt.NOT_FOUND:return ne.NOT_FOUND;case Lt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Lt.ABORTED:return ne.ABORTED;case Lt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Lt.DATA_LOSS:return ne.DATA_LOSS;default:return Se(39323,{code:n})}}(He=Lt||(Lt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";function bN(){return new TextEncoder}const wN=new Cs([4294967295,4294967295],0);function CE(n){const e=bN().encode(n),t=new qb;return t.update(e),new Uint8Array(t.digest())}function RE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Cs([t,r],0),new Cs([a,l],0)]}class ry{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new bu(`Invalid padding: ${t}`);if(r<0)throw new bu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new bu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Cs.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(Cs.fromNumber(r)));return a.compare(wN)===1&&(a=new Cs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=CE(e),[r,a]=RE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new ry(l,a,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=CE(e),[r,a]=RE(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.be(c)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wf{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,tc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Wf(Ce.min(),a,new pt(Be),Pr(),je())}}class tc{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new tc(r,t,je(),je(),je())}}class of{constructor(e,t,r,a){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=a}}class N1{constructor(e,t){this.targetId=e,this.Ce=t}}class x1{constructor(e,t,r=un.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class IE{constructor(){this.ve=0,this.Fe=DE(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),t=je(),r=je();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Se(38017,{changeType:l})}})),new tc(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=DE()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class AN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pr(),this.He=Bh(),this.Je=Bh(),this.Ze=new pt(Be)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(rg(l))if(r===0){const c=new _e(l.path);this.et(t,c,dn.newNoDocument(c,Ce.min()))}else $e(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=ks(r).toUint8Array()}catch(p){if(p instanceof n1)return Xo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new ry(c,a,l)}catch(p){return Xo(p instanceof bu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&rg(d.target)){const p=new _e(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,dn.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let r=je();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Wf(e,t,this.Ze,this.je,r);return this.je=Pr(),this.He=Bh(),this.Je=Bh(),this.Ze=new pt(Be),a}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new IE,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Gt(Be),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Gt(Be),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new IE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Bh(){return new pt(_e.comparator)}function DE(){return new pt(_e.comparator)}const CN={asc:"ASCENDING",desc:"DESCENDING"},RN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IN={and:"AND",or:"OR"};class DN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function og(n,e){return n.useProto3Json||Gf(e)?e:{value:e}}function Af(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function P1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ON(n,e){return Af(n,e.toTimestamp())}function Zi(n){return $e(!!n,49232),Ce.fromTimestamp((function(t){const r=Ps(t);return new ct(r.seconds,r.nanos)})(n))}function sy(n,e){return lg(n,e).canonicalString()}function lg(n,e){const t=(function(a){return new ot(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function k1(n){const e=ot.fromString(n);return $e(z1(e),10190,{key:e.toString()}),e}function ug(n,e){return sy(n.databaseId,e.path)}function Ip(n,e){const t=k1(e);if(t.get(1)!==n.databaseId.projectId)throw new he(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(V1(t))}function M1(n,e){return sy(n.databaseId,e)}function NN(n){const e=k1(n);return e.length===4?ot.emptyPath():V1(e)}function cg(n){return new ot(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function V1(n){return $e(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function OE(n,e,t){return{name:ug(n,e),fields:t.value.mapValue.fields}}function xN(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Se(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?($e(v===void 0||typeof v=="string",58123),un.fromBase64String(v||"")):($e(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),un.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const v=g.code===void 0?ne.UNKNOWN:O1(g.code);return new he(v,g.message||"")})(c);t=new x1(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Ip(n,r.document.name),l=Zi(r.document.updateTime),c=r.document.createTime?Zi(r.document.createTime):Ce.min(),d=new Jn({mapValue:{fields:r.document.fields}}),p=dn.newFoundDocument(a,l,c,d),g=r.targetIds||[],v=r.removedTargetIds||[];t=new of(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Ip(n,r.document),l=r.readTime?Zi(r.readTime):Ce.min(),c=dn.newNoDocument(a,l),d=r.removedTargetIds||[];t=new of([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Ip(n,r.document),l=r.removedTargetIds||[];t=new of([],l,a,null)}else{if(!("filter"in e))return Se(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new EN(a,l),d=r.targetId;t=new N1(d,c)}}return t}function PN(n,e){let t;if(e instanceof ec)t={update:OE(n,e.key,e.value)};else if(e instanceof ny)t={delete:ug(n,e.key)};else if(e instanceof Fa)t={update:OE(n,e.key,e.data),updateMask:FN(e.fieldMask)};else{if(!(e instanceof vN))return Se(16599,{dt:e.type});t={verify:ug(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const d=c.transform;if(d instanceof bf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Fu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Hu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof wf)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Se(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:ON(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se(27497)})(n,e.precondition)),t}function kN(n,e){return n&&n.length>0?($e(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?Zi(a.updateTime):Zi(l);return c.isEqual(Ce.min())&&(c=Zi(l)),new pN(c,a.transformResults||[])})(t,e)))):[]}function MN(n,e){return{documents:[M1(n,e.path)]}}function VN(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=M1(n,a);const l=(function(g){if(g.length!==0)return U1(Si.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(b){return{field:Vo(b.field),direction:zN(b.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=og(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function LN(n){let e=NN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){$e(r===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const b=L1(E);return b instanceof Si&&f1(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((b=>(function(L){return new ju(Lo(L.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(b)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let b;return b=typeof E=="object"?E.value:E,Gf(b)?null:b})(t.limit));let p=null;t.startAt&&(p=(function(E){const b=!!E.before,D=E.values||[];return new Sf(D,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const b=!E.before,D=E.values||[];return new Sf(D,b)})(t.endAt)),eN(e,a,c,l,d,"F",p,g)}function UN(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function L1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Lo(t.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Lo(t.unaryFilter.field);return zt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Lo(t.unaryFilter.field);return zt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Lo(t.unaryFilter.field);return zt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(n):n.fieldFilter!==void 0?(function(t){return zt.create(Lo(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Si.create(t.compositeFilter.filters.map((r=>L1(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(n):Se(30097,{filter:n})}function zN(n){return CN[n]}function BN(n){return RN[n]}function jN(n){return IN[n]}function Vo(n){return{fieldPath:n.canonicalString()}}function Lo(n){return ln.fromServerFormat(n.fieldPath)}function U1(n){return n instanceof zt?(function(t){if(t.op==="=="){if(yE(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NAN"}};if(gE(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(yE(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NOT_NAN"}};if(gE(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vo(t.field),op:BN(t.op),value:t.value}}})(n):n instanceof Si?(function(t){const r=t.getFilters().map((a=>U1(a)));return r.length===1?r[0]:{compositeFilter:{op:jN(t.op),filters:r}}})(n):Se(54877,{filter:n})}function FN(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function z1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function B1(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}class _s{constructor(e,t,r,a,l=Ce.min(),c=Ce.min(),d=un.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class HN{constructor(e){this.yt=e}}function qN(n){const e=LN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ag(e,e.limit,"L"):e}class GN{constructor(){this.Sn=new YN}addToCollectionParentIndex(e,t){return this.Sn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(xs.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(xs.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class YN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Gt(ot.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Gt(ot.comparator)).toArray()}}const NE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},j1=41943040;class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(j1,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);class Wo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Wo(0)}static ar(){return new Wo(-1)}}const xE="LruGarbageCollector",XN=1048576;function PE([n,e],[t,r]){const a=Be(n,t);return a===0?Be(e,r):a}class KN{constructor(e){this.Pr=e,this.buffer=new Gt(PE),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();PE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class QN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){fe(xE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){rl(t)?fe(xE,"Ignoring IndexedDB error during garbage collection: ",t):await il(t)}await this.Ar(3e5)}))}}class $N{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(qf.ce);const r=new KN(t);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(NE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NE):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,a,l,c,d,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(r=E,d=Date.now(),this.removeTargets(e,r,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(g=Date.now(),ko()<=ze.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function WN(n,e){return new $N(n,e)}class ZN{constructor(){this.changes=new ja((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class JN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class e3{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Ou(r.mutation,a,yi.empty(),ct.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,je()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=je()){const a=Ta();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=Su();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Ta();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,je())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,a){let l=Pr();const c=Du(),d=(function(){return Du()})();return t.forEach(((p,g)=>{const v=r.get(g.key);a.has(g.key)&&(v===void 0||v.mutation instanceof Fa)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),Ou(v.mutation,g,v.mutation.getFieldMask(),ct.now())):c.set(g.key,yi.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>d.set(g,new JN(v,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=Du();let a=new pt(((c,d)=>c-d)),l=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=r.get(p)||yi.empty();v=d.applyToLocalView(g,v),r.set(p,v);const E=(a.get(d.batchId)||je()).add(p);a=a.insert(d.batchId,E)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,v=p.value,E=S1();v.forEach((b=>{if(!l.has(b)){const D=I1(t.get(b),r.get(b));D!==null&&E.set(b,D),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return ie.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return tN(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):y1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):ie.resolve(Ta());let d=Lu,p=l;return c.next((g=>ie.forEach(g,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?ie.resolve():this.remoteDocumentCache.getEntry(e,v).next((b=>{p=p.insert(v,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,je()))).next((v=>({batchId:d,changes:E1(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((r=>{let a=Su();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=Su();return this.indexManager.getCollectionParents(e,l).next((d=>ie.forEach(d,(p=>{const g=(function(E,b){return new sl(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next((v=>{v.forEach(((E,b)=>{c=c.insert(E,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,dn.newInvalidDocument(v)))}));let d=Su();return c.forEach(((p,g)=>{const v=l.get(p);v!==void 0&&Ou(v.mutation,g,yi.empty(),ct.now()),Kf(t,g)&&(d=d.insert(p,g))})),d}))}}class t3{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ie.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Zi(a.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:qN(a.bundledQuery),readTime:Zi(a.readTime)}})(t)),ie.resolve()}}class n3{constructor(){this.overlays=new pt(_e.comparator),this.Lr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ta();return ie.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.bt(e,t,l)})),ie.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Lr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const a=Ta(),l=t.length+1,c=new _e(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>r&&a.set(p.getKey(),p)}return ie.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new pt(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let v=l.get(g.largestBatchId);v===null&&(v=Ta(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const d=Ta(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>d.set(g,v))),!(d.size()>=a)););return ie.resolve(d)}bt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(r.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new TN(t,r));let l=this.Lr.get(t);l===void 0&&(l=je(),this.Lr.set(t,l)),this.Lr.set(t,l.add(r.key))}}class i3{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}class ay{constructor(){this.kr=new Gt($t.Kr),this.qr=new Gt($t.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new $t(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new $t(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new _e(new ot([])),r=new $t(t,e),a=new $t(t,e+1),l=[];return this.qr.forEachInRange([r,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new _e(new ot([])),r=new $t(t,e),a=new $t(t,e+1);let l=je();return this.qr.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new $t(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class $t{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return _e.comparator(e.key,t.key)||Be(e.Hr,t.Hr)}static Ur(e,t){return Be(e.Hr,t.Hr)||_e.comparator(e.key,t.key)}}class r3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Gt($t.Kr)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new _N(l,t,r,a);this.mutationQueue.push(c);for(const d of a)this.Jr=this.Jr.add(new $t(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ie.resolve(c)}lookupMutationBatch(e,t){return ie.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Xr(r),l=a<0?0:a;return ie.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?$g:this.Yn-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new $t(t,0),a=new $t(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,a],(c=>{const d=this.Zr(c.Hr);l.push(d)})),ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gt(Be);return t.forEach((a=>{const l=new $t(a,0),c=new $t(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{r=r.add(d.Hr)}))})),ie.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;_e.isDocumentKey(l)||(l=l.child(""));const c=new $t(new _e(l),0);let d=new Gt(Be);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(d=d.add(p.Hr)),!0)}),c),ie.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){$e(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return ie.forEach(t.mutations,(a=>{const l=new $t(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new $t(t,0),a=this.Jr.firstAfterOrEqual(r);return ie.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class s3{constructor(e){this.ti=e,this.docs=(function(){return new pt(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let r=Pr();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():dn.newInvalidDocument(a))})),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Pr();const c=t.path,d=new _e(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||NO(OO(v),r)<=0||(a.has(v.key)||Kf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ie.resolve(l)}getAllFromCollectionGroup(e,t,r,a){Se(9500)}ni(e,t){return ie.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new a3(this)}getSize(e){return ie.resolve(this.size)}}class a3 extends ZN{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(r)})),ie.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class o3{constructor(e){this.persistence=e,this.ri=new ja((t=>Jg(t)),ey),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.ii=0,this.si=new ay,this.targetCount=0,this.oi=Wo._r()}forEachTarget(e,t){return this.ri.forEach(((r,a)=>t(a))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),ie.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Wo(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.lr(t),ie.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),ie.waitFor(l).next((()=>a))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),ie.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.si.containsKey(t))}}class F1{constructor(e,t){this._i={},this.overlays={},this.ai=new qf(0),this.ui=!1,this.ui=!0,this.ci=new i3,this.referenceDelegate=e(this),this.li=new o3(this),this.indexManager=new GN,this.remoteDocumentCache=(function(a){return new s3(a)})((r=>this.referenceDelegate.hi(r))),this.serializer=new HN(t),this.Pi=new t3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new n3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new r3(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){fe("MemoryPersistence","Starting transaction:",e);const a=new l3(this.ai.next());return this.referenceDelegate.Ti(),r(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return ie.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class l3 extends PO{constructor(e){super(),this.currentSequenceNumber=e}}class oy{constructor(e){this.persistence=e,this.Ri=new ay,this.Ai=null}static Vi(e){return new oy(e)}get di(){if(this.Ai)return this.Ai;throw Se(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.di,(r=>{const a=_e.fromPath(r);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Ce.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Cf{constructor(e,t){this.persistence=e,this.fi=new ja((r=>VO(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=WN(this,t)}static Vi(e,t){return new Cf(e,t)}Ti(){}Ii(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return ie.forEach(this.fi,((r,a)=>this.wr(e,r,a).next((l=>l?ie.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(r++,l.removeEntry(c,Ce.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ie.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=rf(e.data.value)),t}wr(e,t,r){return ie.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return ie.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ly{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=a}static Es(e,t){let r=je(),a=je();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new ly(e,t.fromCache,r,a)}}class u3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class c3{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return $R()?8:kO(mn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new u3;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,r,a){return r.documentReadCount<this.Vs?(ko()<=ze.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Mo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ie.resolve()):(ko()<=ze.DEBUG&&fe("QueryEngine","Query:",Mo(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ds*a?(ko()<=ze.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Mo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$i(t))):ie.resolve())}gs(e,t){if(EE(t))return ie.resolve(null);let r=$i(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=ag(t,null,"F"),r=$i(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=je(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((p=>{const g=this.bs(t,d);return this.Ss(t,g,c,p.readTime)?this.gs(e,ag(t,null,"F")):this.Ds(e,g,t,p)}))))})))))}ps(e,t,r,a){return EE(t)||a.isEqual(Ce.min())?ie.resolve(null):this.fs.getDocuments(e,r).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,r,a)?ie.resolve(null):(ko()<=ze.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Mo(t)),this.Ds(e,c,t,DO(a,Lu)).next((d=>d)))}))}bs(e,t){let r=new Gt(_1(e));return t.forEach(((a,l)=>{Kf(e,l)&&(r=r.add(l))})),r}Ss(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,r){return ko()<=ze.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Mo(t)),this.fs.getDocumentsMatchingQuery(e,t,xs.min(),r)}Ds(e,t,r,a){return this.fs.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const uy="LocalStore",h3=3e8;class f3{constructor(e,t,r,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new pt(Be),this.Fs=new ja((l=>Jg(l)),ey),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new e3(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function d3(n,e,t,r){return new f3(n,e,t,r)}async function H1(n,e){const t=Ie(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],d=[];let p=je();for(const g of a){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of l){d.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(r,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function m3(n,e){const t=Ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,v){const E=g.batch,b=E.keys();let D=ie.resolve();return b.forEach((L=>{D=D.next((()=>v.getEntry(p,L))).next((z=>{const V=g.docVersions.get(L);$e(V!==null,48541),z.version.compareTo(V)<0&&(E.applyToRemoteDocument(z,g),z.isValidDocument()&&(z.setReadTime(g.commitVersion),v.addEntry(z)))}))})),D.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let p=je();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function q1(n){const e=Ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function p3(n,e){const t=Ie(n),r=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const d=[];e.targetChanges.forEach(((v,E)=>{const b=a.get(E);if(!b)return;d.push(t.li.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,E))));let D=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?D=D.withResumeToken(un.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):v.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(v.resumeToken,r)),a=a.insert(E,D),(function(z,V,K){return z.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=h3?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(b,D,v)&&d.push(t.li.updateTargetData(l,D))}));let p=Pr(),g=je();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(g3(l,c,e.documentUpdates).next((v=>{p=v.Bs,g=v.Ls}))),!r.isEqual(Ce.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));d.push(v)}return ie.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.vs=a,l)))}function g3(n,e,t){let r=je(),a=je();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let c=Pr();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(Ce.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):fe(uy,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:a}}))}function y3(n,e){const t=Ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=$g),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function v3(n,e){const t=Ie(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.li.getTargetData(r,e).next((l=>l?(a=l,ie.resolve(a)):t.li.allocateTargetId(r).next((c=>(a=new _s(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.vs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function hg(n,e,t){const r=Ie(n),a=r.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!rl(c))throw c;fe(uy,`Failed to update sequence numbers for target ${e}: ${c}`)}r.vs=r.vs.remove(e),r.Fs.delete(a.target)}function kE(n,e,t){const r=Ie(n);let a=Ce.min(),l=je();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,v){const E=Ie(p),b=E.Fs.get(v);return b!==void 0?ie.resolve(E.vs.get(b)):E.li.getTargetData(g,v)})(r,c,$i(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?a:Ce.min(),t?l:je()))).next((d=>(_3(r,rN(e),d),{documents:d,ks:l})))))}function _3(n,e,t){let r=n.Ms.get(e)||Ce.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.Ms.set(e,r)}class ME{constructor(){this.activeTargetIds=cN()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class T3{constructor(){this.vo=new ME,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new ME,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class E3{Mo(e){}shutdown(){}}const VE="ConnectivityMonitor";class LE{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){fe(VE,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){fe(VE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let jh=null;function fg(){return jh===null?jh=(function(){return 268435456+Math.round(2147483648*Math.random())})():jh++,"0x"+jh.toString(16)}const Dp="RestConnection",S3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class b3{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.$o=this.databaseId.database===Tf?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,t,r,a,l){const c=fg(),d=this.Qo(e,t.toUriEncodedString());fe(Dp,`Sending RPC '${e}' ${c}:`,d,r);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,a,l);const{host:g}=new URL(d),v=zs(g);return this.zo(e,d,p,r,v).then((E=>(fe(Dp,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Xo(Dp,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",r),E}))}jo(e,t,r,a,l,c){return this.Wo(e,t,r,a,l)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+nl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const r=S3[e];let a=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}class w3{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const hn="WebChannelConnection",gu=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(a){setTimeout((()=>{throw a}),0)}}))};class jo extends b3{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!jo.c_){const e=Kb();gu(e,Xb.STAT_EVENT,(t=>{t.stat===Jp.PROXY?fe(hn,"STAT_EVENT: detected buffering proxy"):t.stat===Jp.NOPROXY&&fe(hn,"STAT_EVENT: detected no buffering proxy")})),jo.c_=!0}}zo(e,t,r,a,l){const c=fg();return new Promise(((d,p)=>{const g=new Gb;g.setWithCredentials(!0),g.listenOnce(Yb.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case nf.NO_ERROR:const E=g.getResponseJson();fe(hn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case nf.TIMEOUT:fe(hn,`RPC '${e}' ${c} timed out`),p(new he(ne.DEADLINE_EXCEEDED,"Request time out"));break;case nf.HTTP_ERROR:const b=g.getStatus();if(fe(hn,`RPC '${e}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let D=g.getResponseJson();Array.isArray(D)&&(D=D[0]);const L=D?.error;if(L&&L.status&&L.message){const z=(function(K){const $=K.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf($)>=0?$:ne.UNKNOWN})(L.status);p(new he(z,L.message))}else p(new he(ne.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new he(ne.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{fe(hn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);fe(hn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",v,r,15)}))}T_(e,t,r){const a=fg(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const g=l.join("");fe(hn,`Creating RPC '${e}' stream ${a}: ${g}`,d);const v=c.createWebChannel(g,d);this.I_(v);let E=!1,b=!1;const D=new w3({Ho:L=>{b?fe(hn,`Not sending because RPC '${e}' stream ${a} is closed:`,L):(E||(fe(hn,`Opening RPC '${e}' stream ${a} transport.`),v.open(),E=!0),fe(hn,`RPC '${e}' stream ${a} sending:`,L),v.send(L))},Jo:()=>v.close()});return gu(v,Eu.EventType.OPEN,(()=>{b||(fe(hn,`RPC '${e}' stream ${a} transport opened.`),D.i_())})),gu(v,Eu.EventType.CLOSE,(()=>{b||(b=!0,fe(hn,`RPC '${e}' stream ${a} transport closed`),D.o_(),this.E_(v))})),gu(v,Eu.EventType.ERROR,(L=>{b||(b=!0,Xo(hn,`RPC '${e}' stream ${a} transport errored. Name:`,L.name,"Message:",L.message),D.o_(new he(ne.UNAVAILABLE,"The operation could not be completed")))})),gu(v,Eu.EventType.MESSAGE,(L=>{if(!b){const z=L.data[0];$e(!!z,16349);const V=z,K=V?.error||V[0]?.error;if(K){fe(hn,`RPC '${e}' stream ${a} received error:`,K);const $=K.status;let Z=(function(ye){const C=Lt[ye];if(C!==void 0)return O1(C)})($),ce=K.message;Z===void 0&&(Z=ne.INTERNAL,ce="Unknown error status: "+$+" with message "+K.message),b=!0,D.o_(new he(Z,ce)),v.close()}else fe(hn,`RPC '${e}' stream ${a} received:`,z),D.__(z)}})),jo.u_(),setTimeout((()=>{D.s_()}),0),D}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Qb()}}function A3(n){return new jo(n)}function Op(){return typeof document<"u"?document:null}function Zf(n){return new DN(n,!0)}jo.c_=!1;class G1{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&fe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const UE="PersistentStream";class Y1{constructor(e,t,r,a,l,c,d,p){this.Ci=e,this.b_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new G1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(xr(t.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new he(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(UE,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(fe(UE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class C3 extends Y1{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=xN(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ce.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ce.min():c.readTime?Zi(c.readTime):Ce.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=cg(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=rg(p)?{documents:MN(l,p)}:{query:VN(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=P1(l,c.resumeToken);const g=og(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ce.min())>0){d.readTime=Af(l,c.snapshotVersion.toTimestamp());const g=og(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const r=UN(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=cg(this.serializer),t.removeTarget=e,this.K_(t)}}class R3 extends Y1{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=kN(e.writeResults,e.commitTime),r=Zi(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=cg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>PN(this.serializer,r)))};this.K_(t)}}class I3{}class D3 extends I3{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new he(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,lg(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(ne.UNKNOWN,l.toString())}))}jo(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,lg(t,r),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(ne.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function O3(n,e,t,r){return new D3(n,e,t,r)}class N3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xr(t),this.aa=!1):fe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const xa="RemoteStore";class x3{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{r.enqueueAndForget((async()=>{Ha(this)&&(fe(xa,"Restarting streams for network reachability change."),await(async function(p){const g=Ie(p);g.Ea.add(4),await nc(g),g.Va.set("Unknown"),g.Ea.delete(4),await Jf(g)})(this))}))})),this.Va=new N3(r,a)}}async function Jf(n){if(Ha(n))for(const e of n.Ra)await e(!0)}async function nc(n){for(const e of n.Ra)await e(!1)}function X1(n,e){const t=Ie(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),dy(t)?fy(t):al(t).O_()&&hy(t,e))}function cy(n,e){const t=Ie(n),r=al(t);t.Ia.delete(e),r.O_()&&K1(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ha(t)&&t.Va.set("Unknown"))}function hy(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}al(n).Z_(e)}function K1(n,e){n.da.$e(e),al(n).X_(e)}function fy(n){n.da=new AN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),al(n).start(),n.Va.ua()}function dy(n){return Ha(n)&&!al(n).x_()&&n.Ia.size>0}function Ha(n){return Ie(n).Ea.size===0}function Q1(n){n.da=void 0}async function P3(n){n.Va.set("Online")}async function k3(n){n.Ia.forEach(((e,t)=>{hy(n,e)}))}async function M3(n,e){Q1(n),dy(n)?(n.Va.ha(e),fy(n)):n.Va.set("Unknown")}async function V3(n,e,t){if(n.Va.set("Online"),e instanceof x1&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.da.removeTarget(d))})(n,e)}catch(r){fe(xa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Rf(n,r)}else if(e instanceof of?n.da.Xe(e):e instanceof N1?n.da.st(e):n.da.tt(e),!t.isEqual(Ce.min()))try{const r=await q1(n.localStore);t.compareTo(r)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(un.EMPTY_BYTE_STRING,v.snapshotVersion)),K1(l,p);const E=new _s(v.target,p,g,v.sequenceNumber);hy(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){fe(xa,"Failed to raise snapshot:",r),await Rf(n,r)}}async function Rf(n,e,t){if(!rl(e))throw e;n.Ea.add(1),await nc(n),n.Va.set("Offline"),t||(t=()=>q1(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{fe(xa,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Jf(n)}))}function $1(n,e){return e().catch((t=>Rf(n,t,e)))}async function ed(n){const e=Ie(n),t=Vs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:$g;for(;L3(e);)try{const a=await y3(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,U3(e,a)}catch(a){await Rf(e,a)}W1(e)&&Z1(e)}function L3(n){return Ha(n)&&n.Ta.length<10}function U3(n,e){n.Ta.push(e);const t=Vs(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function W1(n){return Ha(n)&&!Vs(n).x_()&&n.Ta.length>0}function Z1(n){Vs(n).start()}async function z3(n){Vs(n).ra()}async function B3(n){const e=Vs(n);for(const t of n.Ta)e.ea(t.mutations)}async function j3(n,e,t){const r=n.Ta.shift(),a=iy.from(r,e,t);await $1(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await ed(n)}async function F3(n,e){e&&Vs(n).Y_&&await(async function(r,a){if((function(c){return SN(c)&&c!==ne.ABORTED})(a.code)){const l=r.Ta.shift();Vs(r).B_(),await $1(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await ed(r)}})(n,e),W1(n)&&Z1(n)}async function zE(n,e){const t=Ie(n);t.asyncQueue.verifyOperationInProgress(),fe(xa,"RemoteStore received new credentials");const r=Ha(t);t.Ea.add(3),await nc(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Jf(t)}async function H3(n,e){const t=Ie(n);e?(t.Ea.delete(2),await Jf(t)):e||(t.Ea.add(2),await nc(t),t.Va.set("Unknown"))}function al(n){return n.ma||(n.ma=(function(t,r,a){const l=Ie(t);return l.sa(),new C3(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Zo:P3.bind(null,n),Yo:k3.bind(null,n),t_:M3.bind(null,n),J_:V3.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),dy(n)?fy(n):n.Va.set("Unknown")):(await n.ma.stop(),Q1(n))}))),n.ma}function Vs(n){return n.fa||(n.fa=(function(t,r,a){const l=Ie(t);return l.sa(),new R3(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:z3.bind(null,n),t_:F3.bind(null,n),ta:B3.bind(null,n),na:j3.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await ed(n)):(await n.fa.stop(),n.Ta.length>0&&(fe(xa,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class my{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,d=new my(e,t,c,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function py(n,e){if(xr("AsyncQueue",`${e}: ${n}`),rl(n))return new he(ne.UNAVAILABLE,`${e}: ${n}`);throw n}class Fo{static emptySet(e){return new Fo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=Su(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Fo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class BE{constructor(){this.ga=new pt(_e.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Zo{constructor(e,t,r,a,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Zo(e,t,Fo.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class q3{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class G3{constructor(){this.queries=jE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=Ie(t),l=a.queries;a.queries=jE(),l.forEach(((c,d)=>{for(const p of d.ba)p.onError(r)}))})(this,new he(ne.ABORTED,"Firestore shutting down"))}}function jE(){return new ja((n=>v1(n)),Xf)}async function Y3(n,e){const t=Ie(n);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(r=2):(l=new q3,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=py(c,`Initialization of query '${Mo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&gy(t)}async function X3(n,e){const t=Ie(n),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function K3(n,e){const t=Ie(n);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(a)&&(r=!0);c.wa=a}}r&&gy(t)}function Q3(n,e,t){const r=Ie(n),a=r.queries.get(e);if(a)for(const l of a.ba)l.onError(t);r.queries.delete(e)}function gy(n){n.Ca.forEach((e=>{e.next()}))}var dg,FE;(FE=dg||(dg={})).Ma="default",FE.Cache="cache";class $3{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Zo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==dg.Cache}}class J1{constructor(e){this.key=e}}class ew{constructor(e){this.key=e}}class W3{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=je(),this.mutatedKeys=je(),this.eu=_1(e),this.tu=new Fo(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new BE,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,E)=>{const b=a.get(v),D=Kf(this.query,E)?E:null,L=!!b&&this.mutatedKeys.has(b.key),z=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let V=!1;b&&D?b.data.isEqual(D.data)?L!==z&&(r.track({type:3,doc:D}),V=!0):this.su(b,D)||(r.track({type:2,doc:D}),V=!0,(p&&this.eu(D,p)>0||g&&this.eu(D,g)<0)&&(d=!0)):!b&&D?(r.track({type:0,doc:D}),V=!0):b&&!D&&(r.track({type:1,doc:b}),V=!0,(p||g)&&(d=!0)),V&&(D?(c=c.add(D),l=z?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{tu:c,iu:r,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(D,L){const z=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Vt:V})}};return z(D)-z(L)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(r),a=a??!1;const d=t&&!a?this._u():[],p=this.Ya.size===0&&this.current&&!a?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new Zo(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new BE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=je(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new ew(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new J1(r))})),t}cu(e){this.Za=e.ks,this.Ya=je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Zo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const yy="SyncEngine";class Z3{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class J3{constructor(e){this.key=e,this.hu=!1}}class ex{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ja((d=>v1(d)),Xf),this.Iu=new Map,this.Eu=new Set,this.Ru=new pt(_e.comparator),this.Au=new Map,this.Vu=new ay,this.du={},this.mu=new Map,this.fu=Wo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tx(n,e,t=!0){const r=aw(n);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await tw(r,e,t,!0),a}async function nx(n,e){const t=aw(n);await tw(t,e,!0,!1)}async function tw(n,e,t,r){const a=await v3(n.localStore,$i(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await ix(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&X1(n.remoteStore,a),d}async function ix(n,e,t,r,a){n.pu=(E,b,D)=>(async function(z,V,K,$){let Z=V.view.ru(K);Z.Ss&&(Z=await kE(z.localStore,V.query,!1).then((({documents:C})=>V.view.ru(C,Z))));const ce=$&&$.targetChanges.get(V.targetId),me=$&&$.targetMismatches.get(V.targetId)!=null,ye=V.view.applyChanges(Z,z.isPrimaryClient,ce,me);return qE(z,V.targetId,ye.au),ye.snapshot})(n,E,b,D);const l=await kE(n.localStore,e,!0),c=new W3(e,l.ks),d=c.ru(l.documents),p=tc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),g=c.applyChanges(d,n.isPrimaryClient,p);qE(n,t,g.au);const v=new Z3(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function rx(n,e,t){const r=Ie(n),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!Xf(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await hg(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&cy(r.remoteStore,a.targetId),mg(r,a.targetId)})).catch(il)):(mg(r,a.targetId),await hg(r.localStore,a.targetId,!0))}async function sx(n,e){const t=Ie(n),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),cy(t.remoteStore,r.targetId))}async function ax(n,e,t){const r=dx(n);try{const a=await(function(c,d){const p=Ie(c),g=ct.now(),v=d.reduce(((D,L)=>D.add(L.key)),je());let E,b;return p.persistence.runTransaction("Locally write mutations","readwrite",(D=>{let L=Pr(),z=je();return p.xs.getEntries(D,v).next((V=>{L=V,L.forEach(((K,$)=>{$.isValidDocument()||(z=z.add(K))}))})).next((()=>p.localDocuments.getOverlayedDocuments(D,L))).next((V=>{E=V;const K=[];for(const $ of d){const Z=yN($,E.get($.key).overlayedDocument);Z!=null&&K.push(new Fa($.key,Z,u1(Z.value.mapValue),Wi.exists(!0)))}return p.mutationQueue.addMutationBatch(D,g,K,d)})).next((V=>{b=V;const K=V.applyToLocalDocumentSet(E,z);return p.documentOverlayCache.saveOverlays(D,V.batchId,K)}))})).then((()=>({batchId:b.batchId,changes:E1(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,d,p){let g=c.du[c.currentUser.toKey()];g||(g=new pt(Be)),g=g.insert(d,p),c.du[c.currentUser.toKey()]=g})(r,a.batchId,t),await ic(r,a.changes),await ed(r.remoteStore)}catch(a){const l=py(a,"Failed to persist write");t.reject(l)}}async function nw(n,e){const t=Ie(n);try{const r=await p3(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&($e(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?$e(c.hu,14607):a.removedDocuments.size>0&&($e(c.hu,42227),c.hu=!1))})),await ic(t,r,e)}catch(r){await il(r)}}function HE(n,e,t){const r=Ie(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const p=Ie(c);p.onlineState=d;let g=!1;p.queries.forEach(((v,E)=>{for(const b of E.ba)b.va(d)&&(g=!0)})),g&&gy(p)})(r.eventManager,e),a.length&&r.Pu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ox(n,e,t){const r=Ie(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new pt(_e.comparator);c=c.insert(l,dn.newNoDocument(l,Ce.min()));const d=je().add(l),p=new Wf(Ce.min(),new Map,new pt(Be),c,d);await nw(r,p),r.Ru=r.Ru.remove(l),r.Au.delete(e),vy(r)}else await hg(r.localStore,e,!1).then((()=>mg(r,e,t))).catch(il)}async function lx(n,e){const t=Ie(n),r=e.batch.batchId;try{const a=await m3(t.localStore,e);rw(t,r,null),iw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ic(t,a)}catch(a){await il(a)}}async function ux(n,e,t){const r=Ie(n);try{const a=await(function(c,d){const p=Ie(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,d).next((E=>($e(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(g,E)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(r.localStore,e);rw(r,e,t),iw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ic(r,a)}catch(a){await il(a)}}function iw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function rw(n,e,t){const r=Ie(n);let a=r.du[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.du[r.currentUser.toKey()]=a}}function mg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||sw(n,r)}))}function sw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(cy(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),vy(n))}function qE(n,e,t){for(const r of t)r instanceof J1?(n.Vu.addReference(r.key,e),cx(n,r)):r instanceof ew?(fe(yy,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||sw(n,r.key)):Se(19791,{wu:r})}function cx(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(fe(yy,"New document in limbo: "+t),n.Eu.add(r),vy(n))}function vy(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new _e(ot.fromString(e)),r=n.fu.next();n.Au.set(r,new J3(t)),n.Ru=n.Ru.insert(t,r),X1(n.remoteStore,new _s($i(g1(t.path)),r,"TargetPurposeLimboResolution",qf.ce))}}async function ic(n,e,t){const r=Ie(n),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,p)=>{c.push(r.pu(p,e,t).then((g=>{if((g||t)&&r.isPrimaryClient){const v=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;r.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(g){a.push(g);const v=ly.Es(p.targetId,g);l.push(v)}})))})),await Promise.all(c),r.Pu.J_(a),await(async function(p,g){const v=Ie(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ie.forEach(g,(b=>ie.forEach(b.Ts,(D=>v.persistence.referenceDelegate.addReference(E,b.targetId,D))).next((()=>ie.forEach(b.Is,(D=>v.persistence.referenceDelegate.removeReference(E,b.targetId,D)))))))))}catch(E){if(!rl(E))throw E;fe(uy,"Failed to update sequence numbers: "+E)}for(const E of g){const b=E.targetId;if(!E.fromCache){const D=v.vs.get(b),L=D.snapshotVersion,z=D.withLastLimboFreeSnapshotVersion(L);v.vs=v.vs.insert(b,z)}}})(r.localStore,l))}async function hx(n,e){const t=Ie(n);if(!t.currentUser.isEqual(e)){fe(yy,"User change. New user:",e.toKey());const r=await H1(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new he(ne.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ic(t,r.Ns)}}function fx(n,e){const t=Ie(n),r=t.Au.get(e);if(r&&r.hu)return je().add(r.key);{let a=je();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}function aw(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ox.bind(null,e),e.Pu.J_=K3.bind(null,e.eventManager),e.Pu.yu=Q3.bind(null,e.eventManager),e}function dx(n){const e=Ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ux.bind(null,e),e}class If{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return d3(this.persistence,new c3,e.initialUser,this.serializer)}Cu(e){return new F1(oy.Vi,this.serializer)}Du(e){return new T3}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}If.provider={build:()=>new If};class mx extends If{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){$e(this.persistence.referenceDelegate instanceof Cf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new QN(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new F1((r=>Cf.Vi(r,t)),this.serializer)}}class pg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>HE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hx.bind(null,this.syncEngine),await H3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new G3})()}createDatastore(e){const t=Zf(e.databaseInfo.databaseId),r=A3(e.databaseInfo);return O3(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,d){return new x3(r,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>HE(this.syncEngine,t,0)),(function(){return LE.v()?new LE:new E3})())}createSyncEngine(e,t){return(function(a,l,c,d,p,g,v){const E=new ex(a,l,c,d,p,g);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ie(t);fe(xa,"RemoteStore shutting down."),r.Ea.add(5),await nc(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}pg.provider={build:()=>new pg};class px{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Ls="FirestoreClient";class gx{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=a,this.user=fn.UNAUTHENTICATED,this.clientId=Qg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{fe(Ls,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(fe(Ls,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=py(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Np(n,e){n.asyncQueue.verifyOperationInProgress(),fe(Ls,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await H1(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function GE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await yx(n);fe(Ls,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>zE(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>zE(e.remoteStore,a))),n._onlineComponents=e}async function yx(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe(Ls,"Using user provided OfflineComponentProvider");try{await Np(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ne.FAILED_PRECONDITION||a.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Xo("Error using user provided cache. Falling back to memory cache: "+t),await Np(n,new If)}}else fe(Ls,"Using default OfflineComponentProvider"),await Np(n,new mx(void 0));return n._offlineComponents}async function ow(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe(Ls,"Using user provided OnlineComponentProvider"),await GE(n,n._uninitializedComponentsProvider._online)):(fe(Ls,"Using default OnlineComponentProvider"),await GE(n,new pg))),n._onlineComponents}function vx(n){return ow(n).then((e=>e.syncEngine))}async function _x(n){const e=await ow(n),t=e.eventManager;return t.onListen=tx.bind(null,e.syncEngine),t.onUnlisten=rx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nx.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sx.bind(null,e.syncEngine),t}function Tx(n,e,t={}){const r=new Rs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const v=new px({next:b=>{v.Nu(),c.enqueueAndForget((()=>X3(l,E))),b.fromCache&&p.source==="server"?g.reject(new he(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),E=new $3(d,v,{includeMetadataChanges:!0,Ka:!0});return Y3(l,E)})(await _x(n),n.asyncQueue,e,t,r))),r.promise}function Ex(n,e){const t=new Rs;return n.asyncQueue.enqueueAndForget((async()=>ax(await vx(n),e,t))),t.promise}function lw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Sx="ComponentProvider",YE=new Map;function bx(n,e,t,r,a){return new zO(n,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,lw(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,r)}const uw="firestore.googleapis.com",XE=!0;class KE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uw,this.ssl=XE}else this.host=e.host,this.ssl=e.ssl??XE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=j1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<XN)throw new he(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lw(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class td{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new vO;switch(r.type){case"firstParty":return new SO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=YE.get(t);r&&(fe(Sx,"Removing Datastore"),YE.delete(t),r.terminate())})(this),Promise.resolve()}}function wx(n,e,t,r={}){n=Vu(n,td);const a=zs(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;a&&(xg(`https://${d}`),Pg("Firestore",!0)),l.host!==uw&&l.host!==d&&Xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:a,emulatorOptions:r};if(!Ia(p,c)&&(n._setSettings(p),r.mockUserToken)){let g,v;if(typeof r.mockUserToken=="string")g=r.mockUserToken,v=fn.MOCK_USER;else{g=ub(r.mockUserToken,n._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new he(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new fn(E)}n._authCredentials=new _O(new Wb(g,v))}}class qa{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qa(this.firestore,e,this._query)}}class Wt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}toJSON(){return{type:Wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ju(t,Wt._jsonSchema))return new Wt(e,r||null,new _e(ot.fromString(t.referencePath)))}}Wt._jsonSchemaVersion="firestore/documentReference/1.0",Wt._jsonSchema={type:Bt("string",Wt._jsonSchemaVersion),referencePath:Bt("string")};class Is extends qa{constructor(e,t,r){super(e,t,g1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new _e(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function cw(n,e,...t){if(n=Yt(n),Zb("collection","path",e),n instanceof td){const r=ot.fromString(e,...t);return oE(r),new Is(n,null,r)}{if(!(n instanceof Wt||n instanceof Is))throw new he(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ot.fromString(e,...t));return oE(r),new Is(n.firestore,null,r)}}function hw(n,e,...t){if(n=Yt(n),arguments.length===1&&(e=Qg.newId()),Zb("doc","path",e),n instanceof td){const r=ot.fromString(e,...t);return aE(r),new Wt(n,null,new _e(r))}{if(!(n instanceof Wt||n instanceof Is))throw new he(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ot.fromString(e,...t));return aE(r),new Wt(n.firestore,n instanceof Is?n.converter:null,new _e(r))}}const QE="AsyncQueue";class $E{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new G1(this,"async_queue_retry"),this._c=()=>{const r=Op();r&&fe(QE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Op();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Op();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Rs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!rl(e))throw e;fe(QE,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,xr("INTERNAL UNHANDLED ERROR: ",WE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=my.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Se(47125,{Pc:WE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function WE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class nd extends td{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new $E,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $E(e),this._firestoreClient=void 0,await e}}}function Ax(n,e){const t=typeof n=="object"?n:Vg(),r=typeof n=="string"?n:Tf,a=zf(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=ab("firestore");l&&wx(a,...l)}return a}function fw(n){if(n._terminated)throw new he(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Cx(n),n._firestoreClient}function Cx(n){const e=n._freezeSettings(),t=bx(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new gx(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}class ei{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ei(un.fromBase64String(e))}catch(t){throw new he(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ei(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ei._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ju(e,ei._jsonSchema))return ei.fromBase64String(e.bytes)}}ei._jsonSchemaVersion="firestore/bytes/1.0",ei._jsonSchema={type:Bt("string",ei._jsonSchemaVersion),bytes:Bt("string")};class dw{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class mw{constructor(e){this._methodName=e}}class Ji{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ji._jsonSchemaVersion}}static fromJSON(e){if(Ju(e,Ji._jsonSchema))return new Ji(e.latitude,e.longitude)}}Ji._jsonSchemaVersion="firestore/geoPoint/1.0",Ji._jsonSchema={type:Bt("string",Ji._jsonSchemaVersion),latitude:Bt("number"),longitude:Bt("number")};class Ti{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ti._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ju(e,Ti._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ti(e.vectorValues);throw new he(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ti._jsonSchemaVersion="firestore/vectorValue/1.0",Ti._jsonSchema={type:Bt("string",Ti._jsonSchemaVersion),vectorValues:Bt("object")};const Rx=/^__.*__$/;class Ix{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Fa(e,this.data,this.fieldMask,t,this.fieldTransforms):new ec(e,this.data,t,this.fieldTransforms)}}function pw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{dataSource:n})}}class _y{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new _y({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Df(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(pw(this.dataSource)&&Rx.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Dx{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Zf(e)}createContext(e,t,r,a=!1){return new _y({dataSource:e,methodName:t,targetDoc:r,path:ln.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gw(n){const e=n._freezeSettings(),t=Zf(n._databaseId);return new Dx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ox(n,e,t,r,a,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,a);_w("Data must be an object, but it was:",c,r);const d=yw(r,c);let p,g;if(l.merge)p=new yi(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const b=id(e,E,t);if(!c.contains(b))throw new he(ne.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);kx(v,b)||v.push(b)}p=new yi(v),g=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,g=c.fieldTransforms;return new Ix(new Jn(d),p,g)}function Nx(n,e,t,r=!1){return Ty(t,n.createContext(r?4:3,e))}function Ty(n,e){if(vw(n=Yt(n)))return _w("Unsupported field value:",e,n),yw(n,e);if(n instanceof mw)return(function(r,a){if(!pw(a.dataSource))throw a.createError(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const d of r){let p=Ty(d,a.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(r,a){if((r=Yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hN(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=ct.fromDate(r);return{timestampValue:Af(a.serializer,l)}}if(r instanceof ct){const l=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Af(a.serializer,l)}}if(r instanceof Ji)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ei)return{bytesValue:P1(a.serializer,r._byteString)};if(r instanceof Wt){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:sy(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Ti)return(function(c,d){const p=c instanceof Ti?c.toArray():c;return{mapValue:{fields:{[o1]:{stringValue:l1},[Ef]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return ty(d.serializer,v)}))}}}}}})(r,a);if(B1(r))return r._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Hf(r)}`)})(n,e)}function yw(n,e){const t={};return t1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ba(n,((r,a)=>{const l=Ty(a,e.childContextForField(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function vw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ct||n instanceof Ji||n instanceof ei||n instanceof Wt||n instanceof mw||n instanceof Ti||B1(n))}function _w(n,e,t){if(!vw(t)||!Jb(t)){const r=Hf(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function id(n,e,t){if((e=Yt(e))instanceof dw)return e._internalPath;if(typeof e=="string")return Px(n,e);throw Df("Field path arguments must be of type string or ",n,!1,void 0,t)}const xx=new RegExp("[~\\*/\\[\\]]");function Px(n,e,t){if(e.search(xx)>=0)throw Df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dw(...e.split("."))._internalPath}catch{throw Df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Df(n,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${r}`),c&&(p+=` in document ${a}`),p+=")"),new he(ne.INVALID_ARGUMENT,d+n+p)}function kx(n,e){return n.some((t=>t.isEqual(e)))}class Mx{convertValue(e,t="none"){switch(Ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ba(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[Ef].arrayValue?.values?.map((r=>Ct(r.doubleValue)));return new Ti(t)}convertGeoPoint(e){return new Ji(Ct(e.latitude),Ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Yf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Uu(e));default:return null}}convertTimestamp(e){const t=Ps(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ot.fromString(e);$e(z1(r),9688,{name:e});const a=new zu(r.get(1),r.get(3)),l=new _e(r.popFirst(5));return a.isEqual(t)||xr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class Vx extends Mx{constructor(e){super(),this.firestore=e}convertBytes(e){return new ei(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,t)}}const ZE="@firebase/firestore",JE="4.10.0";class Tw{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Lx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(id("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Lx extends Tw{data(){return super.data()}}function Ux(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ey{}class Ew extends Ey{}function zx(n,e,...t){let r=[];e instanceof Ey&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((p=>p instanceof by)).length,d=l.filter((p=>p instanceof Sy)).length;if(c>1||c>0&&d>0)throw new he(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}class Sy extends Ew{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Sy(e,t,r)}_apply(e){const t=this._parse(e);return Sw(e._query,t),new qa(e.firestore,e.converter,sg(e._query,t))}_parse(e){const t=gw(e.firestore);return(function(l,c,d,p,g,v,E){let b;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new he(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){tS(E,v);const L=[];for(const z of E)L.push(eS(p,l,z));b={arrayValue:{values:L}}}else b=eS(p,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||tS(E,v),b=Nx(d,c,E,v==="in"||v==="not-in");return zt.create(g,v,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class by extends Ey{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new by(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Si.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const p of d)Sw(c,p),c=sg(c,p)})(e._query,t),new qa(e.firestore,e.converter,sg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wy extends Ew{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new wy(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new he(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new he(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ju(l,c)})(e._query,this._field,this._direction);return new qa(e.firestore,e.converter,iN(e._query,t))}}function Bx(n,e="asc"){const t=e,r=id("orderBy",n);return wy._create(r,t)}function eS(n,e,t){if(typeof(t=Yt(t))=="string"){if(t==="")throw new he(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!y1(e)&&t.indexOf("/")!==-1)throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ot.fromString(t));if(!_e.isDocumentKey(r))throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pE(n,new _e(r))}if(t instanceof Wt)return pE(n,t._key);throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hf(t)}.`)}function tS(n,e){if(!Array.isArray(n)||n.length===0)throw new he(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Sw(n,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function jx(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Fh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ho extends Tw{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(id("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ho._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ho._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ho._jsonSchema={type:Bt("string",Ho._jsonSchemaVersion),bundleSource:Bt("string","DocumentSnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class lf extends Ho{data(e={}){return super.data(e)}}class qo{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Fh(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new lf(this._firestore,this._userDataWriter,r.key,r,new Fh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const p=new lf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Fh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new lf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Fh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,v=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:Fx(d.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Fx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}qo._jsonSchemaVersion="firestore/querySnapshot/1.0",qo._jsonSchema={type:Bt("string",qo._jsonSchemaVersion),bundleSource:Bt("string","QuerySnapshot"),bundleName:Bt("string"),bundle:Bt("string")};function Hx(n){n=Vu(n,qa);const e=Vu(n.firestore,nd),t=fw(e),r=new Vx(e);return Ux(n._query),Tx(t,n._query).then((a=>new qo(e,r,n,a)))}function qx(n){return bw(Vu(n.firestore,nd),[new ny(n._key,Wi.none())])}function Gx(n,e){const t=Vu(n.firestore,nd),r=hw(n),a=jx(n.converter,e),l=gw(n.firestore);return bw(t,[Ox(l,"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,Wi.exists(!1))]).then((()=>r))}function bw(n,e){const t=fw(n);return Ex(t,e)}(function(e,t=!0){yO(za),Da(new Ns("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new nd(new TO(r.getProvider("auth-internal")),new bO(c,r.getProvider("app-check-internal")),BO(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Ki(ZE,JE,e),Ki(ZE,JE,"esm2020")})();const ww="firebasestorage.googleapis.com",Aw="storageBucket",Yx=120*1e3,Xx=600*1e3;class Tt extends ir{constructor(e,t,r=0){super(xp(e),`Firebase Storage: ${t} (${xp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var _t;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(_t||(_t={}));function xp(n){return"storage/"+n}function Ay(){const n="An unknown error occurred, please check the error payload for server response.";return new Tt(_t.UNKNOWN,n)}function Kx(n){return new Tt(_t.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function Qx(n){return new Tt(_t.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function $x(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Tt(_t.UNAUTHENTICATED,n)}function Wx(){return new Tt(_t.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Zx(n){return new Tt(_t.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function Jx(){return new Tt(_t.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function eP(){return new Tt(_t.CANCELED,"User canceled the upload/download.")}function tP(n){return new Tt(_t.INVALID_URL,"Invalid URL '"+n+"'.")}function nP(n){return new Tt(_t.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function iP(){return new Tt(_t.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Aw+"' property when initializing the app?")}function rP(){return new Tt(_t.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function sP(){return new Tt(_t.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function aP(n){return new Tt(_t.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function gg(n){return new Tt(_t.INVALID_ARGUMENT,n)}function Cw(){return new Tt(_t.APP_DELETED,"The Firebase app was deleted.")}function oP(n){return new Tt(_t.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Nu(n,e){return new Tt(_t.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function yu(n){throw new Tt(_t.INTERNAL_ERROR,"Internal error: "+n)}class Un{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Un.makeFromUrl(e,t)}catch{return new Un(e,"")}if(r.path==="")return r;throw nP(e)}static makeFromUrl(e,t){let r=null;const a="([A-Za-z0-9.\\-_]+)";function l(ce){ce.path.charAt(ce.path.length-1)==="/"&&(ce.path_=ce.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+a+c,"i"),p={bucket:1,path:3};function g(ce){ce.path_=decodeURIComponent(ce.path)}const v="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",D=new RegExp(`^https?://${E}/${v}/b/${a}/o${b}`,"i"),L={bucket:1,path:3},z=t===ww?"(?:storage.googleapis.com|storage.cloud.google.com)":t,V="([^?#]*)",K=new RegExp(`^https?://${z}/${a}/${V}`,"i"),Z=[{regex:d,indices:p,postModify:l},{regex:D,indices:L,postModify:g},{regex:K,indices:{bucket:1,path:2},postModify:g}];for(let ce=0;ce<Z.length;ce++){const me=Z[ce],ye=me.regex.exec(e);if(ye){const C=ye[me.indices.bucket];let A=ye[me.indices.path];A||(A=""),r=new Un(C,A),me.postModify(r);break}}if(r==null)throw tP(e);return r}}class lP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function uP(n,e,t){let r=1,a=null,l=null,c=!1,d=0;function p(){return d===2}let g=!1;function v(...V){g||(g=!0,e.apply(null,V))}function E(V){a=setTimeout(()=>{a=null,n(D,p())},V)}function b(){l&&clearTimeout(l)}function D(V,...K){if(g){b();return}if(V){b(),v.call(null,V,...K);return}if(p()||c){b(),v.call(null,V,...K);return}r<64&&(r*=2);let Z;d===1?(d=2,Z=0):Z=(r+Math.random())*1e3,E(Z)}let L=!1;function z(V){L||(L=!0,b(),!g&&(a!==null?(V||(d=2),clearTimeout(a),E(0)):V||(d=1)))}return E(0),l=setTimeout(()=>{c=!0,z(!0)},t),z}function cP(n){n(!1)}function hP(n){return n!==void 0}function fP(n){return typeof n=="object"&&!Array.isArray(n)}function Cy(n){return typeof n=="string"||n instanceof String}function nS(n){return Ry()&&n instanceof Blob}function Ry(){return typeof Blob<"u"}function iS(n,e,t,r){if(r<e)throw gg(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw gg(`Invalid value for '${n}'. Expected ${t} or less.`)}function rd(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Rw(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const a=e(r)+"="+e(n[r]);t=t+a+"&"}return t=t.slice(0,-1),t}var Aa;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Aa||(Aa={}));function dP(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}class mP{constructor(e,t,r,a,l,c,d,p,g,v,E,b=!0,D=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=v,this.connectionFactory_=E,this.retry=b,this.isUsingEmulator=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,z)=>{this.resolve_=L,this.reject_=z,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new Hh(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=d=>{const p=d.loaded,g=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const d=l.getErrorCode()===Aa.NO_ERROR,p=l.getStatus();if(!d||dP(p,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===Aa.ABORT;r(!1,new Hh(!1,null,v));return}const g=this.successCodes_.indexOf(p)!==-1;r(!0,new Hh(g,l))})},t=(r,a)=>{const l=this.resolve_,c=this.reject_,d=a.connection;if(a.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());hP(p)?l(p):l()}catch(p){c(p)}else if(d!==null){const p=Ay();p.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,p)):c(p)}else if(a.canceled){const p=this.appDelete_?Cw():eP();c(p)}else{const p=Jx();c(p)}};this.canceled_?t(!1,new Hh(!1,null,!0)):this.backoffId_=uP(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&cP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Hh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function pP(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function gP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function yP(n,e){e&&(n["X-Firebase-GMPID"]=e)}function vP(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function _P(n,e,t,r,a,l,c=!0,d=!1){const p=Rw(n.urlParams),g=n.url+p,v=Object.assign({},n.headers);return yP(v,e),pP(v,t),gP(v,l),vP(v,r),new mP(g,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,c,d)}function TP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function EP(...n){const e=TP();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Ry())return new Blob(n);throw new Tt(_t.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function SP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function bP(n){if(typeof atob>"u")throw aP("base-64");return atob(n)}const Xi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Pp{constructor(e,t){this.data=e,this.contentType=t||null}}function wP(n,e){switch(n){case Xi.RAW:return new Pp(Iw(e));case Xi.BASE64:case Xi.BASE64URL:return new Pp(Dw(n,e));case Xi.DATA_URL:return new Pp(CP(e),RP(e))}throw Ay()}function Iw(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=r,c=n.charCodeAt(++t);r=65536|(l&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function AP(n){let e;try{e=decodeURIComponent(n)}catch{throw Nu(Xi.DATA_URL,"Malformed data URL.")}return Iw(e)}function Dw(n,e){switch(n){case Xi.BASE64:{const a=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(a||l)throw Nu(n,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Xi.BASE64URL:{const a=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(a||l)throw Nu(n,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=bP(e)}catch(a){throw a.message.includes("polyfill")?a:Nu(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}class Ow{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Nu(Xi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=IP(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function CP(n){const e=new Ow(n);return e.base64?Dw(Xi.BASE64,e.rest):AP(e.rest)}function RP(n){return new Ow(n).contentType}function IP(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}class vs{constructor(e,t){let r=0,a="";nS(e)?(this.data_=e,r=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(nS(this.data_)){const r=this.data_,a=SP(r,e,t);return a===null?null:new vs(a)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new vs(r,!0)}}static getBlob(...e){if(Ry()){const t=e.map(r=>r instanceof vs?r.data_:r);return new vs(EP.apply(null,t))}else{const t=e.map(c=>Cy(c)?wP(Xi.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const a=new Uint8Array(r);let l=0;return t.forEach(c=>{for(let d=0;d<c.length;d++)a[l++]=c[d]}),new vs(a,!0)}}uploadData(){return this.data_}}function Nw(n){let e;try{e=JSON.parse(n)}catch{return null}return fP(e)?e:null}function DP(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function OP(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function xw(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function NP(n,e){return e}class vn{constructor(e,t,r,a){this.server=e,this.local=t||e,this.writable=!!r,this.xform=a||NP}}let qh=null;function xP(n){return!Cy(n)||n.length<2?n:xw(n)}function Pw(){if(qh)return qh;const n=[];n.push(new vn("bucket")),n.push(new vn("generation")),n.push(new vn("metageneration")),n.push(new vn("name","fullPath",!0));function e(l,c){return xP(c)}const t=new vn("name");t.xform=e,n.push(t);function r(l,c){return c!==void 0?Number(c):c}const a=new vn("size");return a.xform=r,n.push(a),n.push(new vn("timeCreated")),n.push(new vn("updated")),n.push(new vn("md5Hash",null,!0)),n.push(new vn("cacheControl",null,!0)),n.push(new vn("contentDisposition",null,!0)),n.push(new vn("contentEncoding",null,!0)),n.push(new vn("contentLanguage",null,!0)),n.push(new vn("contentType",null,!0)),n.push(new vn("metadata","customMetadata",!0)),qh=n,qh}function PP(n,e){function t(){const r=n.bucket,a=n.fullPath,l=new Un(r,a);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function kP(n,e,t){const r={};r.type="file";const a=t.length;for(let l=0;l<a;l++){const c=t[l];r[c.local]=c.xform(r,e[c.server])}return PP(r,n),r}function kw(n,e,t){const r=Nw(e);return r===null?null:kP(n,r,t)}function MP(n,e,t,r){const a=Nw(e);if(a===null||!Cy(a.downloadTokens))return null;const l=a.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(g=>{const v=n.bucket,E=n.fullPath,b="/b/"+c(v)+"/o/"+c(E),D=rd(b,t,r),L=Rw({alt:"media",token:g});return D+L})[0]}function VP(n,e){const t={},r=e.length;for(let a=0;a<r;a++){const l=e[a];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class Iy{constructor(e,t,r,a){this.url=e,this.method=t,this.handler=r,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Mw(n){if(!n)throw Ay()}function LP(n,e){function t(r,a){const l=kw(n,a,e);return Mw(l!==null),l}return t}function UP(n,e){function t(r,a){const l=kw(n,a,e);return Mw(l!==null),MP(l,a,n.host,n._protocol)}return t}function Vw(n){function e(t,r){let a;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?a=Wx():a=$x():t.getStatus()===402?a=Qx(n.bucket):t.getStatus()===403?a=Zx(n.path):a=r,a.status=t.getStatus(),a.serverResponse=r.serverResponse,a}return e}function Lw(n){const e=Vw(n);function t(r,a){let l=e(r,a);return r.getStatus()===404&&(l=Kx(n.path)),l.serverResponse=a.serverResponse,l}return t}function zP(n,e,t){const r=e.fullServerUrl(),a=rd(r,n.host,n._protocol),l="GET",c=n.maxOperationRetryTime,d=new Iy(a,l,UP(n,t),c);return d.errorHandler=Lw(e),d}function BP(n,e){const t=e.fullServerUrl(),r=rd(t,n.host,n._protocol),a="DELETE",l=n.maxOperationRetryTime;function c(p,g){}const d=new Iy(r,a,c,l);return d.successCodes=[200,204],d.errorHandler=Lw(e),d}function jP(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function FP(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=jP(null,e)),r}function HP(n,e,t,r,a){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function d(){let Z="";for(let ce=0;ce<2;ce++)Z=Z+Math.random().toString().slice(2);return Z}const p=d();c["Content-Type"]="multipart/related; boundary="+p;const g=FP(e,r,a),v=VP(g,t),E="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+p+`\r
Content-Type: `+g.contentType+`\r
\r
`,b=`\r
--`+p+"--",D=vs.getBlob(E,r,b);if(D===null)throw rP();const L={name:g.fullPath},z=rd(l,n.host,n._protocol),V="POST",K=n.maxUploadRetryTime,$=new Iy(z,V,LP(n,t),K);return $.urlParams=L,$.headers=c,$.body=D.uploadData(),$.errorHandler=Vw(e),$}class qP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Aa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Aa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Aa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,a,l){if(this.sent_)throw yu("cannot .send() more than once");if(zs(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const c in l)l.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,l[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw yu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class GP extends qP{initXhr(){this.xhr_.responseType="text"}}function Dy(){return new GP}class Pa{constructor(e,t){this._service=e,t instanceof Un?this._location=t:this._location=Un.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Pa(e,t)}get root(){const e=new Un(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xw(this._location.path)}get storage(){return this._service}get parent(){const e=DP(this._location.path);if(e===null)return null;const t=new Un(this._location.bucket,e);return new Pa(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw oP(e)}}function YP(n,e,t){n._throwIfRoot("uploadBytes");const r=HP(n.storage,n._location,Pw(),new vs(e,!0),t);return n.storage.makeRequestWithTokens(r,Dy).then(a=>({metadata:a,ref:n}))}function XP(n){n._throwIfRoot("getDownloadURL");const e=zP(n.storage,n._location,Pw());return n.storage.makeRequestWithTokens(e,Dy).then(t=>{if(t===null)throw sP();return t})}function KP(n){n._throwIfRoot("deleteObject");const e=BP(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Dy)}function QP(n,e){const t=OP(n._location.path,e),r=new Un(n._location.bucket,t);return new Pa(n.storage,r)}function $P(n){return/^[A-Za-z]+:\/\//.test(n)}function WP(n,e){return new Pa(n,e)}function Uw(n,e){if(n instanceof Oy){const t=n;if(t._bucket==null)throw iP();const r=new Pa(t,t._bucket);return e!=null?Uw(r,e):r}else return e!==void 0?QP(n,e):n}function ZP(n,e){if(e&&$P(e)){if(n instanceof Oy)return WP(n,e);throw gg("To use ref(service, url), the first argument must be a Storage instance.")}else return Uw(n,e)}function rS(n,e){const t=e?.[Aw];return t==null?null:Un.makeFromBucketSpec(t,n)}function JP(n,e,t,r={}){n.host=`${e}:${t}`;const a=zs(e);a&&(xg(`https://${n.host}/b`),Pg("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:l}=r;l&&(n._overrideAuthToken=typeof l=="string"?l:ub(l,n.app.options.projectId))}class Oy{constructor(e,t,r,a,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=ww,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Yx,this._maxUploadRetryTime=Xx,this._requests=new Set,a!=null?this._bucket=Un.makeFromBucketSpec(a,this._host):this._bucket=rS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Un.makeFromBucketSpec(this._url,e):this._bucket=rS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Pa(this,e)}_makeRequest(e,t,r,a,l=!0){if(this._deleted)return new lP(Cw());{const c=_P(e,this._appId,r,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,a).getPromise()}}const sS="@firebase/storage",aS="0.14.0";const zw="storage";function ek(n,e,t){return n=Yt(n),YP(n,e,t)}function tk(n){return n=Yt(n),XP(n)}function nk(n){return n=Yt(n),KP(n)}function Bw(n,e){return n=Yt(n),ZP(n,e)}function ik(n=Vg(),e){n=Yt(n);const r=zf(n,zw).getImmediate({identifier:e}),a=ab("storage");return a&&rk(r,...a),r}function rk(n,e,t,r={}){JP(n,e,t,r)}function sk(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new Oy(t,r,a,e,za)}function ak(){Da(new Ns(zw,sk,"PUBLIC").setMultipleInstances(!0)),Ki(sS,aS,""),Ki(sS,aS,"esm2020")}ak();const ok={apiKey:"AIzaSyC5ryMxdEPpQdVxTzF_l36mNxqwXcyn4M4",authDomain:"happy-archive-8de0f.firebaseapp.com",projectId:"happy-archive-8de0f",storageBucket:"happy-archive-8de0f.firebasestorage.app",messagingSenderId:"383075227177",appId:"1:383075227177:web:53f465cce7e3ae0b866e38",measurementId:"G-WNEVB27KZ1"},Ny=fb(ok),Of=pO(Ny),xy=Ax(Ny),jw=ik(Ny),lk=new Ar,Fw=async()=>{try{return await Of.setPersistence(Gg),(await w4(Of,lk)).user}catch(n){throw console.error("Login failed",n),n}},uk=async()=>{try{await r4(Of)}catch(n){throw console.error("Logout failed",n),n}},Py=n=>i4(Of,n),ck=({children:n})=>{const[e,t]=useState(null),r=KS();useEffect(()=>{const c=Py(d=>t(d));return()=>c()},[]);const a=async()=>{if(e)e.email==="kjongbae@gmail.com"&&r("/upload");else try{(await Fw()).email==="kjongbae@gmail.com"&&r("/upload")}catch(c){console.error("Login failed",c)}},l=e?.email==="kjongbae@gmail.com";return F.jsxs("div",{className:"min-h-screen bg-neutral-900 text-white font-sans",children:[F.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-neutral-900/80 backdrop-blur-md border-b border-white/10",children:F.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:F.jsxs("div",{className:"flex items-center justify-between h-16",children:[F.jsx(wu,{to:"/",className:"text-xl font-bold tracking-tight text-white hover:text-blue-400 transition-colors",children:"Happy Archive"}),F.jsxs("div",{className:"flex space-x-2 items-center",children:[l?F.jsx(wu,{to:"/upload",className:"px-3 py-2 rounded-lg text-sm font-semibold bg-blue-600 text-white hover:bg-blue-500 transition shadow-lg shadow-blue-900/20",children:"Upload"}):F.jsx("button",{onClick:a,className:"px-3 py-2 rounded-lg text-sm font-semibold bg-white/10 hover:bg-white/20 text-gray-200 transition",children:" "}),e&&F.jsx("button",{onClick:()=>uk(),className:"p-2 rounded-lg text-gray-400 hover:text-white hover:bg-white/5 transition",title:`${e.displayName} ()`,children:F.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),F.jsx(wu,{to:"/",className:"p-2 rounded-lg text-gray-400 hover:text-white hover:bg-white/5 transition",title:"",children:F.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})]})})}),F.jsx("main",{className:"pt-16 min-h-screen",children:F.jsx("div",{className:"min-h-screen",children:n})})]})};var ti=function(n,e){return Number(n.toFixed(e))},hk=function(n,e){return e},dt=function(n,e,t){t&&typeof t=="function"&&t(n,e)},fk=function(n){return-Math.cos(n*Math.PI)/2+.5},dk=function(n){return n},mk=function(n){return n*n},pk=function(n){return n*(2-n)},gk=function(n){return n<.5?2*n*n:-1+(4-2*n)*n},yk=function(n){return n*n*n},vk=function(n){return--n*n*n+1},_k=function(n){return n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1},Tk=function(n){return n*n*n*n},Ek=function(n){return 1- --n*n*n*n},Sk=function(n){return n<.5?8*n*n*n*n:1-8*--n*n*n*n},bk=function(n){return n*n*n*n*n},wk=function(n){return 1+--n*n*n*n*n},Ak=function(n){return n<.5?16*n*n*n*n*n:1+16*--n*n*n*n*n},Hw={easeOut:fk,linear:dk,easeInQuad:mk,easeOutQuad:pk,easeInOutQuad:gk,easeInCubic:yk,easeOutCubic:vk,easeInOutCubic:_k,easeInQuart:Tk,easeOutQuart:Ek,easeInOutQuart:Sk,easeInQuint:bk,easeOutQuint:wk,easeInOutQuint:Ak},qw=function(n){typeof n=="number"&&cancelAnimationFrame(n)},pi=function(n){n.mounted&&(qw(n.animation),n.animate=!1,n.animation=null,n.velocity=null)};function Gw(n,e,t,r){if(n.mounted){var a=new Date().getTime(),l=1;pi(n),n.animation=function(){if(!n.mounted)return qw(n.animation);var c=new Date().getTime()-a,d=c/t,p=Hw[e],g=p(d);c>=t?(r(l),n.animation=null):n.animation&&(r(g),requestAnimationFrame(n.animation))},requestAnimationFrame(n.animation)}}function Ck(n){var e=n.scale,t=n.positionX,r=n.positionY;return!(Number.isNaN(e)||Number.isNaN(t)||Number.isNaN(r))}function Bs(n,e,t,r){var a=Ck(e);if(!(!n.mounted||!a)){var l=n.setTransformState,c=n.transformState,d=c.scale,p=c.positionX,g=c.positionY,v=e.scale-d,E=e.positionX-p,b=e.positionY-g;t===0?l(e.scale,e.positionX,e.positionY):Gw(n,r,t,function(D){var L=d+v*D,z=p+E*D,V=g+b*D;l(L,z,V)})}}function Rk(n,e,t){var r=n.offsetWidth,a=n.offsetHeight,l=e.offsetWidth,c=e.offsetHeight,d=l*t,p=c*t,g=r-d,v=a-p;return{wrapperWidth:r,wrapperHeight:a,newContentWidth:d,newDiffWidth:g,newContentHeight:p,newDiffHeight:v}}var Ik=function(n,e,t,r,a,l,c){var d=n>e?t*(c?1:.5):0,p=r>a?l*(c?1:.5):0,g=n-e-d,v=d,E=r-a-p,b=p;return{minPositionX:g,maxPositionX:v,minPositionY:E,maxPositionY:b}},ky=function(n,e){var t=n.wrapperComponent,r=n.contentComponent,a=n.setup.centerZoomedOut;if(!t||!r)throw new Error("Components are not mounted");var l=Rk(t,r,e),c=l.wrapperWidth,d=l.wrapperHeight,p=l.newContentWidth,g=l.newDiffWidth,v=l.newContentHeight,E=l.newDiffHeight,b=Ik(c,p,g,d,v,E,!!a);return b},yg=function(n,e,t,r){return r?n<e?ti(e,2):n>t?ti(t,2):ti(n,2):ti(n,2)},Ca=function(n,e){var t=ky(n,e);return n.bounds=t,t};function rc(n,e,t,r,a,l,c){var d=t.minPositionX,p=t.minPositionY,g=t.maxPositionX,v=t.maxPositionY,E=0,b=0;c&&(E=a,b=l);var D=yg(n,d-E,g+E,r),L=yg(e,p-b,v+b,r);return{x:D,y:L}}function sd(n,e,t,r,a,l){var c=n.transformState,d=c.scale,p=c.positionX,g=c.positionY,v=r-d;if(typeof e!="number"||typeof t!="number")return console.error("Mouse X and Y position were not provided!"),{x:p,y:g};var E=p-e*v,b=g-t*v,D=rc(E,b,a,l,0,0,null);return D}function sc(n,e,t,r,a){var l=a?r:0,c=e-l;return!Number.isNaN(t)&&n>=t?t:!Number.isNaN(e)&&n<=c?c:n}var oS=function(n,e){var t=n.setup.panning.excluded,r=n.isInitialized,a=n.wrapperComponent,l=e.target,c="shadowRoot"in l&&"composedPath"in e,d=c?e.composedPath().some(function(v){return v instanceof Element?a?.contains(v):!1}):a?.contains(l),p=r&&l&&d;if(!p)return!1;var g=ad(l,t);return!g},lS=function(n){var e=n.isInitialized,t=n.isPanning,r=n.setup,a=r.panning.disabled,l=e&&t&&!a;return!!l},Dk=function(n,e){var t=n.transformState,r=t.positionX,a=t.positionY;n.isPanning=!0;var l=e.clientX,c=e.clientY;n.startCoords={x:l-r,y:c-a}},Ok=function(n,e){var t=e.touches,r=n.transformState,a=r.positionX,l=r.positionY;n.isPanning=!0;var c=t.length===1;if(c){var d=t[0].clientX,p=t[0].clientY;n.startCoords={x:d-a,y:p-l}}};function Nk(n){var e=n.transformState,t=e.positionX,r=e.positionY,a=e.scale,l=n.setup,c=l.disabled,d=l.limitToBounds,p=l.centerZoomedOut,g=n.wrapperComponent;if(!(c||!g||!n.bounds)){var v=n.bounds,E=v.maxPositionX,b=v.minPositionX,D=v.maxPositionY,L=v.minPositionY,z=t>E||t<b,V=r>D||r<L,K=t>E?g.offsetWidth:n.setup.minPositionX||0,$=r>D?g.offsetHeight:n.setup.minPositionY||0,Z=sd(n,K,$,a,n.bounds,d||p),ce=Z.x,me=Z.y;return{scale:a,positionX:z?ce:t,positionY:V?me:r}}}function Yw(n,e,t,r,a){var l=n.setup.limitToBounds,c=n.wrapperComponent,d=n.bounds,p=n.transformState,g=p.scale,v=p.positionX,E=p.positionY;if(!(c===null||d===null||e===v&&t===E)){var b=rc(e,t,d,l,r,a,c),D=b.x,L=b.y;n.setTransformState(g,D,L)}}var xk=function(n,e,t){var r=n.startCoords,a=n.transformState,l=n.setup.panning,c=l.lockAxisX,d=l.lockAxisY,p=a.positionX,g=a.positionY;if(!r)return{x:p,y:g};var v=e-r.x,E=t-r.y,b=c?p:v,D=d?g:E;return{x:b,y:D}},Us=function(n,e){var t=n.setup,r=n.transformState,a=r.scale,l=t.minScale,c=t.disablePadding;return e>0&&a>=l&&!c?e:0},Pk=function(n){var e=n.mounted,t=n.setup,r=t.disabled,a=t.velocityAnimation,l=n.transformState.scale,c=a.disabled,d=!c||l>1||!r||e;return!!d},kk=function(n){var e=n.mounted,t=n.velocity,r=n.bounds,a=n.setup,l=a.disabled,c=a.velocityAnimation,d=n.transformState.scale,p=c.disabled,g=!p||d>1||!l||e;return!(!g||!t||!r)};function Mk(n,e){var t=n.setup.velocityAnimation,r=t.equalToMove,a=t.animationTime,l=t.sensitivity;return r?a*e*l:a}function uS(n,e,t,r,a,l,c,d,p,g){if(a){if(e>c&&t>c){var v=c+(n-c)*g;return v>p?p:v<c?c:v}if(e<l&&t<l){var v=l+(n-l)*g;return v<d?d:v>l?l:v}}return r?e:yg(n,l,c,a)}function Vk(n,e){var t=1;return e?Math.min(t,n.offsetWidth/window.innerWidth):t}function Lk(n,e){var t=Pk(n);if(t){var r=n.lastMousePosition,a=n.velocityTime,l=n.setup,c=n.wrapperComponent,d=l.velocityAnimation.equalToMove,p=Date.now();if(r&&a&&c){var g=Vk(c,d),v=e.x-r.x,E=e.y-r.y,b=v/g,D=E/g,L=p-a,z=v*v+E*E,V=Math.sqrt(z)/L;n.velocity={velocityX:b,velocityY:D,total:V}}n.lastMousePosition=e,n.velocityTime=p}}function Uk(n){var e=n.velocity,t=n.bounds,r=n.setup,a=n.wrapperComponent,l=kk(n);if(!(!l||!e||!t||!a)){var c=e.velocityX,d=e.velocityY,p=e.total,g=t.maxPositionX,v=t.minPositionX,E=t.maxPositionY,b=t.minPositionY,D=r.limitToBounds,L=r.alignmentAnimation,z=r.zoomAnimation,V=r.panning,K=V.lockAxisY,$=V.lockAxisX,Z=z.animationType,ce=L.sizeX,me=L.sizeY,ye=L.velocityAlignmentTime,C=ye,A=Mk(n,p),R=Math.max(A,C),k=Us(n,ce),N=Us(n,me),M=k*a.offsetWidth/100,I=N*a.offsetHeight/100,We=g+M,Xe=v-M,Q=E+I,re=b-I,pe=n.transformState,ke=new Date().getTime();Gw(n,Z,R,function(qe){var x=n.transformState,ee=x.scale,ae=x.positionX,ue=x.positionY,Ee=new Date().getTime()-ke,Ae=Ee/C,Pe=Hw[L.animationType],le=1-Pe(Math.min(1,Ae)),oe=1-qe,xe=ae+c*oe,Ft=ue+d*oe,Et=uS(xe,pe.positionX,ae,$,D,v,g,Xe,We,le),Jt=uS(Ft,pe.positionY,ue,K,D,b,E,re,Q,le);(ae!==xe||ue!==Ft)&&n.setTransformState(ee,Et,Jt)})}}function cS(n,e){var t=n.transformState.scale;pi(n),Ca(n,t),window.TouchEvent!==void 0&&e instanceof TouchEvent?Ok(n,e):Dk(n,e)}function My(n,e){var t=n.transformState.scale,r=n.setup,a=r.minScale,l=r.alignmentAnimation,c=l.disabled,d=l.sizeX,p=l.sizeY,g=l.animationTime,v=l.animationType,E=c||t<a||!d&&!p;if(!E){var b=Nk(n);b&&Bs(n,b,e??g,v)}}function hS(n,e,t){var r=n.startCoords,a=n.setup,l=a.alignmentAnimation,c=l.sizeX,d=l.sizeY;if(r){var p=xk(n,e,t),g=p.x,v=p.y,E=Us(n,c),b=Us(n,d);Lk(n,{x:g,y:v}),Yw(n,g,v,E,b)}}function zk(n){if(n.isPanning){var e=n.setup.panning.velocityDisabled,t=n.velocity,r=n.wrapperComponent,a=n.contentComponent;n.isPanning=!1,n.animate=!1,n.animation=null;var l=r?.getBoundingClientRect(),c=a?.getBoundingClientRect(),d=l?.width||0,p=l?.height||0,g=c?.width||0,v=c?.height||0,E=d<g||p<v,b=!e&&t&&t?.total>.1&&E;b?Uk(n):My(n)}}function Vy(n,e,t,r){var a=n.setup,l=a.minScale,c=a.maxScale,d=a.limitToBounds,p=sc(ti(e,2),l,c,0,!1),g=Ca(n,p),v=sd(n,t,r,p,g,d),E=v.x,b=v.y;return{scale:p,positionX:E,positionY:b}}function Xw(n,e,t){var r=n.transformState.scale,a=n.wrapperComponent,l=n.setup,c=l.minScale,d=l.limitToBounds,p=l.zoomAnimation,g=p.disabled,v=p.animationTime,E=p.animationType,b=g||r>=c;if((r>=1||d)&&My(n),!(b||!a||!n.mounted)){var D=e||a.offsetWidth/2,L=t||a.offsetHeight/2,z=Vy(n,c,D,L);z&&Bs(n,z,v,E)}}var Ds=function(){return Ds=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Ds.apply(this,arguments)};function fS(n,e,t){for(var r=0,a=e.length,l;r<a;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return n.concat(l||Array.prototype.slice.call(e))}var Gh={scale:1,positionX:0,positionY:0},vu={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},vg={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},Kw=function(n){var e,t,r,a;return{previousScale:(e=n.initialScale)!==null&&e!==void 0?e:Gh.scale,scale:(t=n.initialScale)!==null&&t!==void 0?t:Gh.scale,positionX:(r=n.initialPositionX)!==null&&r!==void 0?r:Gh.positionX,positionY:(a=n.initialPositionY)!==null&&a!==void 0?a:Gh.positionY}},dS=function(n){var e=Ds({},vu);return Object.keys(n).forEach(function(t){var r=typeof n[t]<"u",a=typeof vu[t]<"u";if(a&&r){var l=Object.prototype.toString.call(vu[t]),c=l==="[object Object]",d=l==="[object Array]";c?e[t]=Ds(Ds({},vu[t]),n[t]):d?e[t]=fS(fS([],vu[t],!0),n[t]):e[t]=n[t]}}),e},Qw=function(n,e,t){var r=n.transformState.scale,a=n.wrapperComponent,l=n.setup,c=l.maxScale,d=l.minScale,p=l.zoomAnimation,g=l.smooth,v=p.size;if(!a)throw new Error("Wrapper is not mounted");var E=g?r*Math.exp(e*t):r+e*t,b=sc(ti(E,3),d,c,v,!1);return b};function $w(n,e,t,r,a){var l=n.wrapperComponent,c=n.transformState,d=c.scale,p=c.positionX,g=c.positionY;if(!l)return console.error("No WrapperComponent found");var v=l.offsetWidth,E=l.offsetHeight,b=(v/2-p)/d,D=(E/2-g)/d,L=Qw(n,e,t),z=Vy(n,L,b,D);if(!z)return console.error("Error during zoom event. New transformation state was not calculated.");Bs(n,z,r,a)}function Ww(n,e,t,r){var a=n.setup,l=n.wrapperComponent,c=a.limitToBounds,d=Kw(n.props),p=n.transformState,g=p.scale,v=p.positionX,E=p.positionY;if(l){var b=ky(n,d.scale),D=rc(d.positionX,d.positionY,b,c,0,0,l),L={scale:d.scale,positionX:D.x,positionY:D.y};g===d.scale&&v===d.positionX&&E===d.positionY||(r?.(),Bs(n,L,e,t))}}function Bk(n,e,t,r){var a=n.getBoundingClientRect(),l=e.getBoundingClientRect(),c=t.getBoundingClientRect(),d=l.x*r.scale,p=l.y*r.scale;return{x:(a.x-c.x+d)/r.scale,y:(a.y-c.y+p)/r.scale}}function jk(n,e,t){var r=n.wrapperComponent,a=n.contentComponent,l=n.transformState,c=n.setup,d=c.limitToBounds,p=c.minScale,g=c.maxScale;if(!r||!a)return l;var v=r.getBoundingClientRect(),E=e.getBoundingClientRect(),b=Bk(e,r,a,l),D=b.x,L=b.y,z=E.width/l.scale,V=E.height/l.scale,K=r.offsetWidth/z,$=r.offsetHeight/V,Z=sc(t||Math.min(K,$),p,g,0,!1),ce=(v.width-z*Z)/2,me=(v.height-V*Z)/2,ye=(v.left-D)*Z+ce,C=(v.top-L)*Z+me,A=ky(n,Z),R=rc(ye,C,A,d,0,0,r),k=R.x,N=R.y;return{positionX:k,positionY:N,scale:Z}}var Fk=function(n){return function(e,t,r){e===void 0&&(e=.5),t===void 0&&(t=300),r===void 0&&(r="easeOut"),$w(n,1,e,t,r)}},Hk=function(n){return function(e,t,r){e===void 0&&(e=.5),t===void 0&&(t=300),r===void 0&&(r="easeOut"),$w(n,-1,e,t,r)}},qk=function(n){return function(e,t,r,a,l){a===void 0&&(a=300),l===void 0&&(l="easeOut");var c=n.transformState,d=c.positionX,p=c.positionY,g=c.scale,v=n.wrapperComponent,E=n.contentComponent,b=n.setup.disabled;if(!(b||!v||!E)){var D={positionX:Number.isNaN(e)?d:e,positionY:Number.isNaN(t)?p:t,scale:Number.isNaN(r)?g:r};Bs(n,D,a,l)}}},Gk=function(n){return function(e,t){e===void 0&&(e=200),t===void 0&&(t="easeOut"),Ww(n,e,t)}},Yk=function(n){return function(e,t,r){t===void 0&&(t=200),r===void 0&&(r="easeOut");var a=n.transformState,l=n.wrapperComponent,c=n.contentComponent;if(l&&c){var d=Zw(e||a.scale,l,c);Bs(n,d,t,r)}}},Xk=function(n){return function(e,t,r,a){r===void 0&&(r=600),a===void 0&&(a="easeOut"),pi(n);var l=n.wrapperComponent,c=typeof e=="string"?document.getElementById(e):e;if(l&&c&&l.contains(c)){var d=jk(n,c,t);Bs(n,d,r,a)}}},_g=function(n){return{instance:n,zoomIn:Fk(n),zoomOut:Hk(n),setTransform:qk(n),resetTransform:Gk(n),centerView:Yk(n),zoomToElement:Xk(n)}},Kk=function(n){return{instance:n,state:n.transformState}},at=function(n){var e={};return Object.assign(e,Kk(n)),Object.assign(e,_g(n)),e},kp=!1;function Mp(){try{var n={get passive(){return kp=!0,!1}};return n}catch{return kp=!1,kp}}var Yh=".".concat(vg.wrapperClass),ad=function(n,e){return e.some(function(t){return n.matches("".concat(Yh," ").concat(t,", ").concat(Yh," .").concat(t,", ").concat(Yh," ").concat(t," *, ").concat(Yh," .").concat(t," *"))})},Tg=function(n){n&&clearTimeout(n)},Qk=function(n,e,t){return"translate(".concat(n,"px, ").concat(e,"px) scale(").concat(t,")")},Zw=function(n,e,t){var r=t.offsetWidth*n,a=t.offsetHeight*n,l=(e.offsetWidth-r)/2,c=(e.offsetHeight-a)/2;return{scale:n,positionX:l,positionY:c}};function $k(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Wk=function(n,e){var t=n.setup.wheel,r=t.disabled,a=t.wheelDisabled,l=t.touchPadDisabled,c=t.excluded,d=n.isInitialized,p=n.isPanning,g=e.target,v=d&&!p&&!r&&g;if(!v||a&&!e.ctrlKey||l&&e.ctrlKey)return!1;var E=ad(g,c);return!E},Zk=function(n){return n?n.deltaY<0?1:-1:0};function Jk(n,e){var t=Zk(n),r=hk(e,t);return r}function Jw(n,e,t){var r=e.getBoundingClientRect(),a=0,l=0;if("clientX"in n)a=(n.clientX-r.left)/t,l=(n.clientY-r.top)/t;else{var c=n.touches[0];a=(c.clientX-r.left)/t,l=(c.clientY-r.top)/t}return(Number.isNaN(a)||Number.isNaN(l))&&console.error("No mouse or touch offset found"),{x:a,y:l}}var eM=function(n,e,t,r,a){var l=n.transformState.scale,c=n.wrapperComponent,d=n.setup,p=d.maxScale,g=d.minScale,v=d.zoomAnimation,E=d.disablePadding,b=v.size,D=v.disabled;if(!c)throw new Error("Wrapper is not mounted");var L=l+e*t,z=r?!1:!D,V=sc(ti(L,3),g,p,b,z&&!E);return V},tM=function(n,e){var t=n.previousWheelEvent,r=n.transformState.scale,a=n.setup,l=a.maxScale,c=a.minScale;return t?r<l||r>c||Math.sign(t.deltaY)!==Math.sign(e.deltaY)||t.deltaY>0&&t.deltaY<e.deltaY||t.deltaY<0&&t.deltaY>e.deltaY||Math.sign(t.deltaY)!==Math.sign(e.deltaY):!1},nM=function(n,e){var t=n.setup.pinch,r=t.disabled,a=t.excluded,l=n.isInitialized,c=e.target,d=l&&!r&&c;if(!d)return!1;var p=ad(c,a);return!p},iM=function(n){var e=n.setup.pinch.disabled,t=n.isInitialized,r=n.pinchStartDistance,a=t&&!e&&r;return!!a},rM=function(n,e,t){var r=t.getBoundingClientRect(),a=n.touches,l=ti(a[0].clientX-r.left,5),c=ti(a[0].clientY-r.top,5),d=ti(a[1].clientX-r.left,5),p=ti(a[1].clientY-r.top,5);return{x:(l+d)/2/e,y:(c+p)/2/e}},eA=function(n){return Math.sqrt(Math.pow(n.touches[0].pageX-n.touches[1].pageX,2)+Math.pow(n.touches[0].pageY-n.touches[1].pageY,2))},sM=function(n,e){var t=n.pinchStartScale,r=n.pinchStartDistance,a=n.setup,l=a.maxScale,c=a.minScale,d=a.zoomAnimation,p=a.disablePadding,g=d.size,v=d.disabled;if(!t||r===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return n.transformState.scale;var E=e/r,b=E*t;return sc(ti(b,2),c,l,g,!v&&!p)},aM=160,oM=100,lM=function(n,e){var t=n.props,r=t.onWheelStart,a=t.onZoomStart;n.wheelStopEventTimer||(pi(n),dt(at(n),e,r),dt(at(n),e,a))},uM=function(n,e){var t=n.props,r=t.onWheel,a=t.onZoom,l=n.contentComponent,c=n.setup,d=n.transformState,p=d.scale,g=c.limitToBounds,v=c.centerZoomedOut,E=c.zoomAnimation,b=c.wheel,D=c.disablePadding,L=c.smooth,z=E.size,V=E.disabled,K=b.step,$=b.smoothStep;if(!l)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var Z=Jk(e,null),ce=L?$*Math.abs(e.deltaY):K,me=eM(n,Z,ce,!e.ctrlKey);if(p!==me){var ye=Ca(n,me),C=Jw(e,l,p),A=V||z===0||v||D,R=g&&A,k=sd(n,C.x,C.y,me,ye,R),N=k.x,M=k.y;n.previousWheelEvent=e,n.setTransformState(me,N,M),dt(at(n),e,r),dt(at(n),e,a)}},cM=function(n,e){var t=n.props,r=t.onWheelStop,a=t.onZoomStop;Tg(n.wheelAnimationTimer),n.wheelAnimationTimer=setTimeout(function(){n.mounted&&(Xw(n,e.x,e.y),n.wheelAnimationTimer=null)},oM);var l=tM(n,e);l&&(Tg(n.wheelStopEventTimer),n.wheelStopEventTimer=setTimeout(function(){n.mounted&&(n.wheelStopEventTimer=null,dt(at(n),e,r),dt(at(n),e,a))},aM))},tA=function(n){for(var e=0,t=0,r=0;r<2;r+=1)e+=n.touches[r].clientX,t+=n.touches[r].clientY;var a=e/2,l=t/2;return{x:a,y:l}},hM=function(n,e){var t=eA(e);n.pinchStartDistance=t,n.lastDistance=t,n.pinchStartScale=n.transformState.scale,n.isPanning=!1;var r=tA(e);n.pinchLastCenterX=r.x,n.pinchLastCenterY=r.y,pi(n)},fM=function(n,e){var t=n.contentComponent,r=n.pinchStartDistance,a=n.wrapperComponent,l=n.transformState.scale,c=n.setup,d=c.limitToBounds,p=c.centerZoomedOut,g=c.zoomAnimation,v=c.alignmentAnimation,E=g.disabled,b=g.size;if(!(r===null||!t)){var D=rM(e,l,t);if(!(!Number.isFinite(D.x)||!Number.isFinite(D.y))){var L=eA(e),z=sM(n,L),V=tA(e),K=V.x-(n.pinchLastCenterX||0),$=V.y-(n.pinchLastCenterY||0);if(!(z===l&&K===0&&$===0)){n.pinchLastCenterX=V.x,n.pinchLastCenterY=V.y;var Z=Ca(n,z),ce=E||b===0||p,me=d&&ce,ye=sd(n,D.x,D.y,z,Z,me),C=ye.x,A=ye.y;n.pinchMidpoint=D,n.lastDistance=L;var R=v.sizeX,k=v.sizeY,N=Us(n,R),M=Us(n,k),I=C+K,We=A+$,Xe=rc(I,We,Z,d,N,M,a),Q=Xe.x,re=Xe.y;n.setTransformState(z,Q,re)}}}},dM=function(n){var e=n.pinchMidpoint;n.velocity=null,n.lastDistance=null,n.pinchMidpoint=null,n.pinchStartScale=null,n.pinchStartDistance=null,Xw(n,e?.x,e?.y)},nA=function(n,e){var t=n.props.onZoomStop,r=n.setup.doubleClick.animationTime;Tg(n.doubleClickStopEventTimer),n.doubleClickStopEventTimer=setTimeout(function(){n.doubleClickStopEventTimer=null,dt(at(n),e,t)},r)},mM=function(n,e){var t=n.props,r=t.onZoomStart,a=t.onZoom,l=n.setup.doubleClick,c=l.animationTime,d=l.animationType;dt(at(n),e,r),Ww(n,c,d,function(){return dt(at(n),e,a)}),nA(n,e)};function pM(n,e){return n==="toggle"?e===1?1:-1:n==="zoomOut"?-1:1}function gM(n,e){var t=n.setup,r=n.doubleClickStopEventTimer,a=n.transformState,l=n.contentComponent,c=a.scale,d=n.props,p=d.onZoomStart,g=d.onZoom,v=t.doubleClick,E=v.disabled,b=v.mode,D=v.step,L=v.animationTime,z=v.animationType;if(!E&&!r){if(b==="reset")return mM(n,e);if(!l)return console.error("No ContentComponent found");var V=pM(b,n.transformState.scale),K=Qw(n,V,D);if(c!==K){dt(at(n),e,p);var $=Jw(e,l,c),Z=Vy(n,K,$.x,$.y);if(!Z)return console.error("Error during zoom event. New transformation state was not calculated.");dt(at(n),e,g),Bs(n,Z,L,z),nA(n,e)}}}var yM=function(n,e){var t=n.isInitialized,r=n.setup,a=n.wrapperComponent,l=r.doubleClick,c=l.disabled,d=l.excluded,p=e.target,g=a?.contains(p),v=t&&p&&g&&!c;if(!v)return!1;var E=ad(p,d);return!E},vM=(function(){function n(e){var t=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){t.initializeWindowEvents()},this.unmount=function(){t.cleanupWindowEvents()},this.update=function(r){t.props=r,Ca(t,t.transformState.scale),t.setup=dS(r)},this.initializeWindowEvents=function(){var r,a,l=Mp(),c=(r=t.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,d=c?.defaultView;(a=t.wrapperComponent)===null||a===void 0||a.addEventListener("wheel",t.onWheelPanning,l),d?.addEventListener("mousedown",t.onPanningStart,l),d?.addEventListener("mousemove",t.onPanning,l),d?.addEventListener("mouseup",t.onPanningStop,l),c?.addEventListener("mouseleave",t.clearPanning,l),d?.addEventListener("keyup",t.setKeyUnPressed,l),d?.addEventListener("keydown",t.setKeyPressed,l)},this.cleanupWindowEvents=function(){var r,a,l=Mp(),c=(r=t.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,d=c?.defaultView;d?.removeEventListener("mousedown",t.onPanningStart,l),d?.removeEventListener("mousemove",t.onPanning,l),d?.removeEventListener("mouseup",t.onPanningStop,l),c?.removeEventListener("mouseleave",t.clearPanning,l),d?.removeEventListener("keyup",t.setKeyUnPressed,l),d?.removeEventListener("keydown",t.setKeyPressed,l),document.removeEventListener("mouseleave",t.clearPanning,l),pi(t),(a=t.observer)===null||a===void 0||a.disconnect()},this.handleInitializeWrapperEvents=function(r){var a=Mp();r.addEventListener("wheel",t.onWheelZoom,a),r.addEventListener("dblclick",t.onDoubleClick,a),r.addEventListener("touchstart",t.onTouchPanningStart,a),r.addEventListener("touchmove",t.onTouchPanning,a),r.addEventListener("touchend",t.onTouchPanningStop,a)},this.handleInitialize=function(r,a){var l=!1,c=t.setup.centerOnInit,d=function(p,g){for(var v=0,E=p;v<E.length;v++){var b=E[v];if(b.target===g)return!0}return!1};t.applyTransformation(),t.onInitCallbacks.forEach(function(p){p(at(t))}),t.observer=new ResizeObserver(function(p){if(d(p,r)||d(p,a))if(c&&!l){var g=a.offsetWidth,v=a.offsetHeight;(g>0||v>0)&&(l=!0,t.setCenter())}else pi(t),Ca(t,t.transformState.scale),My(t,0)}),t.observer.observe(r),t.observer.observe(a)},this.onWheelZoom=function(r){var a=t.setup.disabled;if(!a){var l=Wk(t,r);if(l){var c=t.isPressingKeys(t.setup.wheel.activationKeys);c&&(lM(t,r),uM(t,r),cM(t,r))}}},this.onWheelPanning=function(r){var a=t.setup,l=a.disabled,c=a.wheel,d=a.panning;if(!(!t.wrapperComponent||!t.contentComponent||l||!c.wheelDisabled||d.disabled||!d.wheelPanning||r.ctrlKey)){r.preventDefault(),r.stopPropagation();var p=t.transformState,g=p.positionX,v=p.positionY,E=g-r.deltaX,b=v-r.deltaY,D=d.lockAxisX?g:E,L=d.lockAxisY?v:b,z=t.setup.alignmentAnimation,V=z.sizeX,K=z.sizeY,$=Us(t,V),Z=Us(t,K);D===g&&L===v||Yw(t,D,L,$,Z)}},this.onPanningStart=function(r){var a=t.setup.disabled,l=t.props.onPanningStart;if(!a){var c=oS(t,r);if(c){var d=t.isPressingKeys(t.setup.panning.activationKeys);d&&(r.button===0&&!t.setup.panning.allowLeftClickPan||r.button===1&&!t.setup.panning.allowMiddleClickPan||r.button===2&&!t.setup.panning.allowRightClickPan||(r.preventDefault(),r.stopPropagation(),pi(t),cS(t,r),dt(at(t),r,l)))}}},this.onPanning=function(r){var a=t.setup.disabled,l=t.props.onPanning;if(!a){var c=lS(t);if(c){var d=t.isPressingKeys(t.setup.panning.activationKeys);d&&(r.preventDefault(),r.stopPropagation(),hS(t,r.clientX,r.clientY),dt(at(t),r,l))}}},this.onPanningStop=function(r){var a=t.props.onPanningStop;t.isPanning&&(zk(t),dt(at(t),r,a))},this.onPinchStart=function(r){var a=t.setup.disabled,l=t.props,c=l.onPinchingStart,d=l.onZoomStart;if(!a){var p=nM(t,r);p&&(hM(t,r),pi(t),dt(at(t),r,c),dt(at(t),r,d))}},this.onPinch=function(r){var a=t.setup.disabled,l=t.props,c=l.onPinching,d=l.onZoom;if(!a){var p=iM(t);p&&(r.preventDefault(),r.stopPropagation(),fM(t,r),dt(at(t),r,c),dt(at(t),r,d))}},this.onPinchStop=function(r){var a=t.props,l=a.onPinchingStop,c=a.onZoomStop;t.pinchStartScale&&(dM(t),dt(at(t),r,l),dt(at(t),r,c))},this.onTouchPanningStart=function(r){var a=t.setup.disabled,l=t.props.onPanningStart;if(!a){var c=oS(t,r);if(c){var d=t.lastTouch&&+new Date-t.lastTouch<200&&r.touches.length===1;if(!d){t.lastTouch=+new Date,pi(t);var p=r.touches,g=p.length===1,v=p.length===2;g&&(pi(t),cS(t,r),dt(at(t),r,l)),v&&t.onPinchStart(r)}}}},this.onTouchPanning=function(r){var a=t.setup.disabled,l=t.props.onPanning;if(t.isPanning&&r.touches.length===1){if(a)return;var c=lS(t);if(!c)return;r.preventDefault(),r.stopPropagation();var d=r.touches[0];hS(t,d.clientX,d.clientY),dt(at(t),r,l)}else r.touches.length>1&&t.onPinch(r)},this.onTouchPanningStop=function(r){t.onPanningStop(r),t.onPinchStop(r)},this.onDoubleClick=function(r){var a=t.setup.disabled;if(!a){var l=yM(t,r);l&&gM(t,r)}},this.clearPanning=function(r){t.isPanning&&t.onPanningStop(r)},this.setKeyPressed=function(r){t.pressedKeys[r.key]=!0},this.setKeyUnPressed=function(r){t.pressedKeys[r.key]=!1},this.isPressingKeys=function(r){return r.length?!!r.find(function(a){return t.pressedKeys[a]}):!0},this.setTransformState=function(r,a,l){var c=t.props.onTransformed;if(!Number.isNaN(r)&&!Number.isNaN(a)&&!Number.isNaN(l)){r!==t.transformState.scale&&(t.transformState.previousScale=t.transformState.scale,t.transformState.scale=r),t.transformState.positionX=a,t.transformState.positionY=l,t.applyTransformation();var d=at(t);t.onChangeCallbacks.forEach(function(p){return p(d)}),dt(d,{scale:r,positionX:a,positionY:l},c)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(t.wrapperComponent&&t.contentComponent){var r=Zw(t.transformState.scale,t.wrapperComponent,t.contentComponent);t.setTransformState(r.scale,r.positionX,r.positionY)}},this.handleTransformStyles=function(r,a,l){return t.props.customTransform?t.props.customTransform(r,a,l):Qk(r,a,l)},this.applyTransformation=function(){if(!(!t.mounted||!t.contentComponent)){var r=t.transformState,a=r.scale,l=r.positionX,c=r.positionY,d=t.handleTransformStyles(l,c,a);t.contentComponent.style.transform=d}},this.getContext=function(){return at(t)},this.onChange=function(r){return t.onChangeCallbacks.has(r)||t.onChangeCallbacks.add(r),function(){t.onChangeCallbacks.delete(r)}},this.onInit=function(r){return t.onInitCallbacks.has(r)||t.onInitCallbacks.add(r),function(){t.onInitCallbacks.delete(r)}},this.init=function(r,a){t.cleanupWindowEvents(),t.wrapperComponent=r,t.contentComponent=a,Ca(t,t.transformState.scale),t.handleInitializeWrapperEvents(r),t.handleInitialize(r,a),t.initializeWindowEvents(),t.isInitialized=!0;var l=at(t);dt(l,void 0,t.props.onInit)},this.props=e,this.setup=dS(this.props),this.transformState=Kw(this.props)}return n})(),Ly=Ra.createContext(null),_M=function(n,e){return typeof n=="function"?n(e):n},TM=Ra.forwardRef(function(n,e){var t=G.useRef(new vM(n)).current,r=_M(n.children,_g(t));return G.useImperativeHandle(e,function(){return _g(t)},[t]),G.useEffect(function(){t.update(n)},[t,n]),Ra.createElement(Ly.Provider,{value:t},r)});Ra.forwardRef(function(n,e){var t=G.useRef(null),r=G.useContext(Ly);return G.useEffect(function(){return r.onChange(function(a){if(t.current){var l=0,c=0;t.current.style.transform=r.handleTransformStyles(l,c,1/a.instance.transformState.scale)}})},[r]),Ra.createElement("div",Ds({},n,{ref:$k([t,e])}))});function EM(n,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",t==="top"&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}}var SM=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,mS={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};EM(SM);var bM=function(n){var e=n.children,t=n.wrapperClass,r=t===void 0?"":t,a=n.contentClass,l=a===void 0?"":a,c=n.wrapperStyle,d=n.contentStyle,p=n.wrapperProps,g=p===void 0?{}:p,v=n.contentProps,E=v===void 0?{}:v,b=G.useContext(Ly),D=b.init,L=b.cleanupWindowEvents,z=G.useRef(null),V=G.useRef(null);return G.useEffect(function(){var K=z.current,$=V.current;return K!==null&&$!==null&&D&&D?.(K,$),function(){L?.()}},[]),Ra.createElement("div",Ds({},g,{ref:z,className:"".concat(vg.wrapperClass," ").concat(mS.wrapper," ").concat(r),style:c}),Ra.createElement("div",Ds({},E,{ref:V,className:"".concat(vg.contentClass," ").concat(mS.content," ").concat(l),style:d}),e))};const Uy="photos",pS=async n=>{try{await qx(hw(xy,Uy,n))}catch(e){throw console.error("Error removing document: ",e),e}},wM=async n=>{try{return(await Gx(cw(xy,Uy),{...n,createdAt:new Date})).id}catch(e){throw console.error("Error adding document: ",e),e}},AM=async()=>{const n=zx(cw(xy,Uy),Bx("createdAt","desc"));return(await Hx(n)).docs.map(t=>({id:t.id,...t.data()}))},gS=async n=>{try{const e=Bw(jw,n);await nk(e)}catch(e){throw console.error("Error deleting file from storage:",e),e}},CM=async n=>{console.log("Starting upload for:",n.name);try{const e=Bw(jw,`images/${Date.now()}_${n.name}`);console.log("Created file ref:",e.fullPath),console.log("Calling uploadBytes...");const t=await ek(e,n);console.log("UploadBytes finished. Snapshot:",t),console.log("Getting download URL...");const r=await tk(e);return console.log("Got URL:",r),{url:r,path:e.fullPath}}catch(e){throw console.error("Error in uploadImage:",e),e}},RM=()=>{const[n,e]=G.useState([]),[t,r]=G.useState(!0),[a,l]=G.useState("captured"),[c,d]=G.useState("compact"),[p,g]=G.useState(null),[v,E]=G.useState(!1),[b,D]=G.useState(null),[L,z]=G.useState(!1),[V,K]=G.useState(new Set),[$,Z]=G.useState({isOpen:!1,message:"",onConfirm:null}),[ce,me]=G.useState(null),[ye,C]=G.useState(null),[A,R]=G.useState(null),[k,N]=G.useState(null),[M,I]=G.useState(!1);G.useEffect(()=>{const le=Py(oe=>D(oe));return()=>le()},[]),G.useEffect(()=>{(async()=>{try{const oe=await AM();e(oe)}catch(oe){console.error("Failed to load photos",oe)}finally{r(!1)}})()},[]),G.useEffect(()=>{if(n.length===0)return;if(!A){R(n[Math.floor(Math.random()*n.length)]);return}const le=setInterval(()=>{if(n.length>0&&!M){let oe;do oe=n[Math.floor(Math.random()*n.length)];while(oe.id===A.id&&n.length>1);N(oe),I(!0),setTimeout(()=>{R(oe),I(!1),N(null)},1e3)}},5e3);return()=>clearInterval(le)},[n,A,M]);const Xe=(()=>{let le=[...n];a==="uploaded"?le.sort((xe,Ft)=>{const Et=Jt=>Jt.createdAt?.seconds||0;return Et(Ft)-Et(xe)}):le.sort((xe,Ft)=>{const Et=Jt=>Jt.capturedAt?.seconds||Jt.createdAt?.seconds||0;return Et(Ft)-Et(xe)});const oe={};return le.forEach(xe=>{const Ft=a==="uploaded"?xe.createdAt?.seconds:xe.capturedAt?.seconds||xe.createdAt?.seconds,Jt=(Ft?new Date(Ft*1e3):new Date).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"});oe[Jt]||(oe[Jt]=[]),oe[Jt].push(xe)}),oe})(),Q=Object.keys(Xe),re=G.useCallback(()=>{if(!p)return;const le=Object.values(Xe).flat(),oe=le.findIndex(xe=>xe.id===p.id);oe<le.length-1&&g(le[oe+1])},[p,Xe]),pe=G.useCallback(()=>{if(!p)return;const le=Object.values(Xe).flat(),oe=le.findIndex(xe=>xe.id===p.id);oe>0&&g(le[oe-1])},[p,Xe]);G.useEffect(()=>{const le=oe=>{p&&(oe.key==="ArrowRight"&&re(),oe.key==="ArrowLeft"&&pe(),oe.key==="Escape"&&g(null))};return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[p,re,pe]);const ke=le=>{C(null),me(le.targetTouches[0].clientX)},qe=le=>{C(le.targetTouches[0].clientX)},x=()=>{if(!ce||!ye)return;const le=ce-ye,oe=le>75,xe=le<-75;oe?re():xe&&pe(),me(null),C(null)},ee=async le=>{try{const xe=await(await fetch(le.url)).blob(),Ft=window.URL.createObjectURL(xe),Et=document.createElement("a");Et.href=Ft,Et.download=le.filename||`photo-${Date.now()}.jpg`,document.body.appendChild(Et),Et.click(),window.URL.revokeObjectURL(Ft),document.body.removeChild(Et)}catch(oe){console.error("Download failed",oe),window.open(le.url,"_blank")}},ae=async le=>{Z({isOpen:!0,message:"   ?     .",onConfirm:async()=>{try{await pS(le.id),le.storagePath&&await gS(le.storagePath),e(oe=>oe.filter(xe=>xe.id!==le.id)),g(null),Z({isOpen:!1,message:"",onConfirm:null})}catch(oe){console.error("Delete failed",oe),alert(" .  .")}}})},ue=le=>{K(oe=>{const xe=new Set(oe);return xe.has(le)?xe.delete(le):xe.add(le),xe})},Ee=async()=>{V.size!==0&&Z({isOpen:!0,message:` ${V.size}   ?     .`,onConfirm:async()=>{try{const le=n.filter(oe=>V.has(oe.id));for(const oe of le)await pS(oe.id),oe.storagePath&&await gS(oe.storagePath);e(oe=>oe.filter(xe=>!V.has(xe.id))),K(new Set),z(!1),Z({isOpen:!1,message:"",onConfirm:null})}catch(le){console.error("Batch delete failed",le),alert("   .  .")}}})},Ae=()=>{const le=new Set(n.map(oe=>oe.id));K(le)},Pe=()=>{K(new Set),z(!1)};return t?F.jsx("div",{className:"text-center py-20 text-gray-400 animate-pulse",children:"Loading memories..."}):F.jsxs("div",{className:"bg-neutral-900 min-h-screen",children:[A&&F.jsxs("div",{className:"relative h-[40vh] md:h-[60vh] overflow-hidden group",children:[F.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 via-transparent to-neutral-900 z-30"}),F.jsx("div",{className:"absolute inset-0 z-10 overflow-hidden",children:F.jsxs("div",{className:`flex h-full w-[200%] ${M?"transition-transform duration-1000 ease-in-out":""}`,style:{transform:M?"translate3d(-50%, 0, 0)":"translate3d(0, 0, 0)"},children:[F.jsx("div",{className:"w-1/2 h-full relative",children:F.jsx("img",{src:A.url,alt:"Featured",className:"w-full h-full object-cover object-center",style:{filter:"brightness(0.7)"}})}),F.jsx("div",{className:"w-1/2 h-full relative",children:k?F.jsx("img",{src:k.url,alt:"Next",className:"w-full h-full object-cover object-center",style:{filter:"brightness(0.7)"}}):F.jsx("img",{src:A.url,alt:"Fallback",className:"w-full h-full object-cover object-center",style:{filter:"brightness(0.7)"}})})]})}),F.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-40 px-4 text-center",children:[F.jsx("h1",{className:"text-4xl md:text-6xl font-black tracking-tighter text-white mb-4 drop-shadow-2xl",children:"Happy Archive"}),F.jsx("p",{className:"text-lg md:text-xl text-white/80 font-medium max-w-lg drop-shadow-lg",children:"Keep your precious memories safe and organized."})]})]}),F.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[F.jsx("div",{className:"flex justify-between items-center mb-8 px-2",children:L?F.jsxs(F.Fragment,{children:[F.jsxs("div",{className:"flex items-center gap-3",children:[F.jsx("button",{onClick:Pe,className:"text-gray-300 hover:text-white transition",children:""}),F.jsxs("h2",{className:"text-lg font-semibold text-white",children:[V.size," Selected"]})]}),F.jsxs("div",{className:"flex gap-2",children:[V.size<n.length&&F.jsx("button",{onClick:Ae,className:"px-4 py-1.5 bg-white/10 hover:bg-white/20 text-white rounded-lg text-sm font-medium transition",children:"Select All"}),F.jsx("button",{onClick:Ee,disabled:V.size===0,className:"px-4 py-1.5 bg-red-500 hover:bg-red-600 disabled:bg-red-500/30 disabled:cursor-not-allowed text-white rounded-lg text-sm font-semibold transition flex items-center gap-2",children:" Delete"})]})]}):F.jsxs(F.Fragment,{children:[F.jsxs("h2",{className:"text-lg font-semibold text-gray-300",children:[n.length," Photos"]}),F.jsxs("div",{className:"flex gap-2",children:[F.jsxs("button",{onClick:()=>z(!0),className:"px-3 md:px-4 py-1.5 bg-white/10 hover:bg-white/20 text-white rounded-lg text-sm font-medium transition flex items-center gap-2",title:" ",children:[F.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),F.jsx("span",{className:"hidden sm:inline",children:"Select"})]}),F.jsxs("div",{className:"bg-white/10 rounded-lg p-1 flex space-x-1",children:[F.jsx("button",{onClick:()=>d("large"),className:`px-2.5 py-1.5 rounded-md text-sm font-medium transition ${c==="large"?"bg-white text-black":"text-gray-300 hover:text-white"}`,title:" ",children:F.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),F.jsx("button",{onClick:()=>d("compact"),className:`px-2.5 py-1.5 rounded-md text-sm font-medium transition ${c==="compact"?"bg-white text-black":"text-gray-300 hover:text-white"}`,title:" ",children:F.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v14a1 1 0 01-1 1H5a1 1 0 01-1-1V5z"})})})]}),F.jsxs("div",{className:"bg-white/10 rounded-lg p-1 flex space-x-1",children:[F.jsxs("button",{onClick:()=>l("captured"),className:`px-3 md:px-4 py-1.5 rounded-md text-sm font-medium transition flex items-center gap-2 ${a==="captured"?"bg-white text-black":"text-gray-300 hover:text-white"}`,title:"",children:[F.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),F.jsx("span",{className:"hidden sm:inline",children:""})]}),F.jsxs("button",{onClick:()=>l("uploaded"),className:`px-3 md:px-4 py-1.5 rounded-md text-sm font-medium transition flex items-center gap-2 ${a==="uploaded"?"bg-white text-black":"text-gray-300 hover:text-white"}`,title:"",children:[F.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),F.jsx("span",{className:"hidden sm:inline",children:""})]})]})]})]})}),F.jsx("div",{className:"space-y-12",children:Q.map(le=>F.jsxs("div",{children:[F.jsx("h3",{className:"text-gray-400 text-sm font-medium uppercase tracking-wider mb-4 ml-1 sticky top-0 bg-[#111111]/90 backdrop-blur-sm py-2 z-10",children:le}),F.jsx("div",{className:`grid ${c==="compact"?"grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"}`,children:Xe[le].map(oe=>{const xe=V.has(oe.id);return F.jsxs("div",{className:`aspect-square relative group overflow-hidden rounded-xl bg-gray-800 cursor-pointer shadow-lg hover:shadow-2xl transition-all duration-300 ${L?"hover:scale-100":"hover:scale-[1.02]"} ${xe?"ring-4 ring-blue-500":""}`,onClick:()=>L?ue(oe.id):g(oe),children:[F.jsx("img",{src:oe.url,alt:"Gallery item",className:"object-cover w-full h-full",loading:"lazy"}),F.jsx("div",{className:`absolute inset-0 transition duration-300 ${xe?"bg-blue-500/30":"bg-black/0 group-hover:bg-black/20"}`}),L&&F.jsx("div",{className:"absolute top-3 right-3 w-6 h-6 rounded-full bg-white/90 flex items-center justify-center shadow-lg z-10",children:xe&&F.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:F.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},oe.id)})})]},le))}),n.length===0&&F.jsxs("div",{className:"col-span-full py-20 flex flex-col items-center justify-center text-gray-500",children:[F.jsx("div",{className:"text-4xl mb-4",children:""}),F.jsx("p",{children:'No photos yet. Click "Upload" to start.'})]}),p&&F.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/98 backdrop-blur-md",onClick:()=>g(null),children:[F.jsx("button",{className:"fixed left-2 md:left-4 top-1/2 -translate-y-1/2 p-2 md:p-3 rounded-full bg-black/50 hover:bg-black/70 text-white z-[100] transition backdrop-blur-md shadow-2xl border border-white/10",onClick:le=>{le.stopPropagation(),pe()},title:"Previous Photo",children:F.jsx("svg",{className:"w-6 h-6 md:w-8 md:h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),F.jsx("button",{className:"fixed right-2 md:right-4 top-1/2 -translate-y-1/2 p-2 md:p-3 rounded-full bg-black/50 hover:bg-black/70 text-white z-[100] transition backdrop-blur-md shadow-2xl border border-white/10",onClick:le=>{le.stopPropagation(),re()},title:"Next Photo",children:F.jsx("svg",{className:"w-6 h-6 md:w-8 md:h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})}),F.jsxs("div",{className:"flex flex-col md:flex-row w-full h-full max-w-screen-2xl mx-auto overflow-hidden shadow-2xl relative",onClick:le=>le.stopPropagation(),children:[F.jsxs("div",{className:"absolute top-4 right-4 z-[80] flex gap-2",children:[F.jsx("button",{onClick:()=>g(null),className:"p-2.5 rounded-full backdrop-blur-md bg-black/50 text-white/80 hover:bg-black/70 transition-all shadow-lg",title:"Close Photo",children:F.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),F.jsx("button",{onClick:()=>E(!v),className:`p-2.5 rounded-full backdrop-blur-md transition-all shadow-lg ${v?"bg-blue-600 text-white":"bg-black/50 text-white/80 hover:bg-black/70"}`,title:"Photo Info",children:F.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),F.jsx("div",{className:"flex-1 relative bg-black flex items-center justify-center overflow-hidden",onTouchStart:ke,onTouchMove:qe,onTouchEnd:x,children:F.jsx(TM,{initialScale:1,minScale:.5,maxScale:4,centerOnInit:!0,children:F.jsx(bM,{wrapperClass:"!w-full !h-full",contentClass:"!w-full !h-full flex items-center justify-center",children:F.jsx("img",{src:p.url,alt:"Full size",className:"max-h-full max-w-full object-contain"})})})}),F.jsx("div",{className:`
                            w-full md:w-80 bg-[#1a1a1a]/95 md:bg-[#1a1a1a] backdrop-blur-xl md:backdrop-blur-none
                            border-t md:border-t-0 md:border-l border-white/10 flex flex-col z-70 shadow-2xl
                            transition-all duration-300 ease-in-out
                            fixed inset-x-0 bottom-0 max-h-[70vh] md:relative md:max-h-full
                            ${v?"translate-y-0 md:translate-x-0":"translate-y-full md:hidden"}
                        `,children:F.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[F.jsxs("div",{className:"flex justify-between items-start mb-6",children:[F.jsx("div",{children:F.jsx("h3",{className:"text-xl font-bold text-white uppercase tracking-wider text-sm opacity-60",children:"Photo Info"})}),F.jsx("button",{className:"p-2 text-gray-400 hover:text-white bg-white/5 rounded-full transition",onClick:()=>E(!1),title:"Close Info",children:F.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),F.jsxs("dl",{className:"space-y-6",children:[F.jsxs("div",{className:"grid grid-cols-1 gap-1",children:[F.jsx("dt",{className:"text-xs font-bold text-gray-500 uppercase",children:"Captured"}),F.jsx("dd",{className:"text-base text-gray-100",children:p.capturedAt?.seconds?new Date(p.capturedAt.seconds*1e3).toLocaleString(void 0,{dateStyle:"full",timeStyle:"short"}):"Unknown"})]}),p.model&&F.jsxs("div",{className:"grid grid-cols-1 gap-1",children:[F.jsx("dt",{className:"text-xs font-bold text-gray-500 uppercase",children:"Camera"}),F.jsxs("dd",{className:"text-sm text-gray-200 flex items-center gap-2",children:[" ",p.make," ",p.model]}),p.iso&&F.jsxs("dd",{className:"text-xs text-gray-400 mt-1",children:["ISO ",p.iso,"  f/",p.fStop,"  ",p.shutterSpeed>=1?p.shutterSpeed:`1/${Math.round(1/p.shutterSpeed)}`,"s"]})]}),p.latitude&&F.jsxs("div",{className:"pt-2",children:[F.jsx("dt",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Location"}),F.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${p.latitude},${p.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"block rounded-xl overflow-hidden border border-white/10 hover:border-white/30 transition h-32 relative group",children:[F.jsx("iframe",{width:"100%",height:"100%",frameBorder:"0",style:{border:0,pointerEvents:"none"},src:`https://www.google.com/maps/embed/v1/place?key=${encodeURIComponent("")}&q=${p.latitude},${p.longitude}&zoom=14`,allowFullScreen:!0,tabIndex:"-1"}),F.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-transparent transition"})]})]}),p.createdAt&&F.jsxs("div",{className:"pt-4 border-t border-white/10",children:[F.jsx("dt",{className:"text-xs font-bold text-gray-500 uppercase",children:"Uploaded"}),F.jsx("dd",{className:"mt-1 text-sm text-gray-300",children:new Date(p.createdAt.seconds*1e3).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})})]}),F.jsxs("div",{className:"pt-4 flex gap-2",children:[F.jsxs("button",{onClick:()=>ee(p),className:"flex-1 py-2 px-4 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition text-sm font-semibold flex items-center justify-center gap-2",children:[F.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download"]}),b&&b.uid===p.uploaderUid&&F.jsx("button",{onClick:()=>ae(p),className:"flex-1 py-2 px-4 bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white rounded-lg transition text-sm font-semibold flex items-center justify-center gap-2",children:"Delete"})]}),F.jsxs("div",{className:"pt-2",children:[F.jsx("dt",{className:"text-xs font-bold text-gray-500 uppercase",children:"Details"}),F.jsxs("dd",{className:"text-xs text-gray-400 mt-1 break-all",children:[p.filename,F.jsx("br",{}),"By ",p.uploaderName]})]})]})]})})]})]}),$.isOpen&&F.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm",children:F.jsxs("div",{className:"bg-[#1a1a1a] border border-white/20 rounded-2xl p-8 max-w-md mx-4 shadow-2xl",children:[F.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:" "}),F.jsx("p",{className:"text-gray-300 mb-8 leading-relaxed",children:$.message}),F.jsxs("div",{className:"flex gap-3 justify-end",children:[F.jsx("button",{onClick:()=>Z({isOpen:!1,message:"",onConfirm:null}),className:"px-6 py-2.5 bg-white/10 hover:bg-white/20 text-white rounded-lg font-medium transition",children:""}),F.jsx("button",{onClick:$.onConfirm,className:"px-6 py-2.5 bg-red-500 hover:bg-red-600 text-white rounded-lg font-semibold transition",children:""})]})]})})]})]})};var od=typeof self<"u"?self:global;const qu=typeof navigator<"u",IM=qu&&typeof HTMLImageElement>"u",Nf=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),ld=od.Buffer,Xh=od.BigInt,ud=!!ld,DM=n=>n;function xf(n,e=DM){if(Nf)try{return typeof require=="function"?Promise.resolve(e(require(n))):import(n).then(e)}catch{console.warn(`Couldn't load ${n}`)}}let zy=od.fetch;const OM=n=>zy=n;if(!od.fetch){const n=xf("http",(r=>r)),e=xf("https",(r=>r)),t=(r,{headers:a}={})=>new Promise((async(l,c)=>{let{port:d,hostname:p,pathname:g,protocol:v,search:E}=new URL(r);const b={method:"GET",hostname:p,path:encodeURI(g)+E,headers:a};d!==""&&(b.port=Number(d));const D=(v==="https:"?await e:await n).request(b,(L=>{if(L.statusCode===301||L.statusCode===302){let z=new URL(L.headers.location,r).toString();return t(z,{headers:a}).then(l).catch(c)}l({status:L.statusCode,arrayBuffer:()=>new Promise((z=>{let V=[];L.on("data",(K=>V.push(K))),L.on("end",(()=>z(Buffer.concat(V))))}))})}));D.on("error",c),D.end()}));OM(t)}function be(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const Pf=n=>iA(n)?void 0:n,NM=n=>n!==void 0;function iA(n){return n===void 0||(n instanceof Map?n.size===0:Object.values(n).filter(NM).length===0)}function jt(n){let e=new Error(n);throw delete e.stack,e}function Ea(n){return(n=(function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e})(n).trim())===""?void 0:n}function Eg(n){let e=(function(t){let r=0;return t.ifd0.enabled&&(r+=1024),t.exif.enabled&&(r+=2048),t.makerNote&&(r+=2048),t.userComment&&(r+=1024),t.gps.enabled&&(r+=512),t.interop.enabled&&(r+=100),t.ifd1.enabled&&(r+=1024),r+2048})(n);return n.jfif.enabled&&(e+=50),n.xmp.enabled&&(e+=2e4),n.iptc.enabled&&(e+=14e3),n.icc.enabled&&(e+=6e3),e}const Sg=n=>String.fromCharCode.apply(null,n),yS=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function rA(n){return yS?yS.decode(n):ud?Buffer.from(n).toString("utf8"):decodeURIComponent(escape(Sg(n)))}class In{static from(e,t){return e instanceof this&&e.le===t?e:new In(e,void 0,void 0,t)}constructor(e,t=0,r,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){r===void 0&&(r=e.byteLength-t);let l=new DataView(e,t,r);this._swapDataView(l)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof In){r===void 0&&(r=e.byteLength-t),(t+=e.byteOffset)+r>e.byteOffset+e.byteLength&&jt("Creating view outside of available memory in ArrayBuffer");let l=new DataView(e.buffer,t,r);this._swapDataView(l)}else if(typeof e=="number"){let l=new DataView(new ArrayBuffer(e));this._swapDataView(l)}else jt("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,r=In){return e instanceof DataView||e instanceof In?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||jt("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new r(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new In(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return rA(this.getUint8Array(e,t))}getLatin1String(e=0,t=this.byteLength){let r=this.getUint8Array(e,t);return Sg(r)}getUnicodeString(e=0,t=this.byteLength){const r=[];for(let a=0;a<t&&e+a<this.byteLength;a+=2)r.push(this.getUint16(e+a));return Sg(r)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,r){switch(t){case 1:return this.getUint8(e,r);case 2:return this.getUint16(e,r);case 4:return this.getUint32(e,r);case 8:return this.getUint64&&this.getUint64(e,r)}}getUint(e,t,r){switch(t){case 8:return this.getUint8(e,r);case 16:return this.getUint16(e,r);case 32:return this.getUint32(e,r);case 64:return this.getUint64&&this.getUint64(e,r)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function bg(n,e){jt(`${n} '${e}' was not loaded, try using full build of exifr.`)}class By extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||bg(this.kind,e),t&&(e in t||(function(r,a){jt(`Unknown ${r} '${a}'.`)})(this.kind,e),t[e].enabled||bg(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var nr=new By("file parser"),Ut=new By("segment parser"),rr=new By("file reader");function xM(n,e){return typeof n=="string"?vS(n,e):qu&&!IM&&n instanceof HTMLImageElement?vS(n.src,e):n instanceof Uint8Array||n instanceof ArrayBuffer||n instanceof DataView?new In(n):qu&&n instanceof Blob?wg(n,e,"blob",Ma):void jt("Invalid input argument")}function vS(n,e){return(t=n).startsWith("data:")||t.length>1e4?Ag(n,e,"base64"):Nf&&n.includes("://")?wg(n,e,"url",ka):Nf?Ag(n,e,"fs"):qu?wg(n,e,"url",ka):void jt("Invalid input argument");var t}async function wg(n,e,t,r){return rr.has(t)?Ag(n,e,t):r?(async function(a,l){let c=await l(a);return new In(c)})(n,r):void jt(`Parser ${t} is not loaded`)}async function Ag(n,e,t){let r=new(rr.get(t))(n,e);return await r.read(),r}const ka=n=>zy(n).then((e=>e.arrayBuffer())),Ma=n=>new Promise(((e,t)=>{let r=new FileReader;r.onloadend=()=>e(r.result||new ArrayBuffer),r.onerror=t,r.readAsArrayBuffer(n)}));class PM extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function Rt(n,e,t){let r=new PM;for(let[a,l]of t)r.set(a,l);if(Array.isArray(e))for(let a of e)n.set(a,r);else n.set(e,r);return r}function Va(n,e,t){let r,a=n.get(e);for(r of t)a.set(r[0],r[1])}const Zt=new Map,bi=new Map,Os=new Map,Ts=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],ol=["jfif","xmp","icc","iptc","ihdr"],La=["tiff",...ol],vt=["ifd0","ifd1","exif","gps","interop"],Es=[...La,...vt],Ss=["makerNote","userComment"],ll=["translateKeys","translateValues","reviveValues","multiSegment"],bs=[...ll,"sanitize","mergeOutput","silentErrors"];class sA{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class _u extends sA{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,r,a){if(super(),be(this,"enabled",!1),be(this,"skip",new Set),be(this,"pick",new Set),be(this,"deps",new Set),be(this,"translateKeys",!1),be(this,"translateValues",!1),be(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=vt.includes(e),this.canBeFiltered&&(this.dict=Zt.get(e)),r!==void 0)if(Array.isArray(r))this.parse=this.enabled=!0,this.canBeFiltered&&r.length>0&&this.translateTagSet(r,this.pick);else if(typeof r=="object"){if(this.enabled=!0,this.parse=r.parse!==!1,this.canBeFiltered){let{pick:l,skip:c}=r;l&&l.length>0&&this.translateTagSet(l,this.pick),c&&c.length>0&&this.translateTagSet(c,this.skip)}this.applyInheritables(r)}else r===!0||r===!1?this.parse=this.enabled=r:jt(`Invalid options argument: ${r}`)}applyInheritables(e){let t,r;for(t of ll)r=e[t],r!==void 0&&(this[t]=r)}translateTagSet(e,t){if(this.dict){let r,a,{tagKeys:l,tagValues:c}=this.dict;for(r of e)typeof r=="string"?(a=c.indexOf(r),a===-1&&(a=l.indexOf(Number(r))),a!==-1&&t.add(Number(l[a]))):t.add(r)}else for(let r of e)t.add(r)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,kf(this.pick,this.deps)):this.enabled&&this.pick.size>0&&kf(this.pick,this.deps)}}var _n={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},_S=new Map;class Ga extends sA{static useCached(e){let t=_S.get(e);return t!==void 0||(t=new this(e),_S.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):jt(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=qu?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of Ts)this[e]=_n[e];for(e of bs)this[e]=_n[e];for(e of Ss)this[e]=_n[e];for(e of Es)this[e]=new _u(e,_n[e],void 0,this)}setupFromTrue(){let e;for(e of Ts)this[e]=_n[e];for(e of bs)this[e]=_n[e];for(e of Ss)this[e]=!0;for(e of Es)this[e]=new _u(e,!0,void 0,this)}setupFromArray(e){let t;for(t of Ts)this[t]=_n[t];for(t of bs)this[t]=_n[t];for(t of Ss)this[t]=_n[t];for(t of Es)this[t]=new _u(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,vt)}setupFromObject(e){let t;for(t of(vt.ifd0=vt.ifd0||vt.image,vt.ifd1=vt.ifd1||vt.thumbnail,Object.assign(this,e),Ts))this[t]=Vp(e[t],_n[t]);for(t of bs)this[t]=Vp(e[t],_n[t]);for(t of Ss)this[t]=Vp(e[t],_n[t]);for(t of La)this[t]=new _u(t,_n[t],e[t],this);for(t of vt)this[t]=new _u(t,_n[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,vt,Es),e.tiff===!0?this.batchEnableWithBool(vt,!0):e.tiff===!1?this.batchEnableWithUserValue(vt,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,vt):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,vt)}batchEnableWithBool(e,t){for(let r of e)this[r].enabled=t}batchEnableWithUserValue(e,t){for(let r of e){let a=t[r];this[r].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(e,t,r,a=r){if(e&&e.length){for(let c of a)this[c].enabled=!1;let l=TS(e,r);for(let[c,d]of l)kf(this[c].pick,d),this[c].enabled=!0}else if(t&&t.length){let l=TS(t,r);for(let[c,d]of l)kf(this[c].skip,d)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:r,iptc:a,icc:l}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),r.enabled||e.skip.add(700),a.enabled||e.skip.add(33723),l.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:r,interop:a}=this;a.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),r.needed&&e.deps.add(34853),this.tiff.enabled=vt.some((l=>this[l].enabled===!0))||this.makerNote||this.userComment;for(let l of vt)this[l].finalizeFilters()}get onlyTiff(){return!ol.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of La)this[e].enabled&&!Ut.has(e)&&bg("segment parser",e)}}function TS(n,e){let t,r,a,l,c=[];for(a of e){for(l of(t=Zt.get(a),r=[],t))(n.includes(l[0])||n.includes(l[1]))&&r.push(l[0]);r.length&&c.push([a,r])}return c}function Vp(n,e){return n!==void 0?n:e!==void 0?e:void 0}function kf(n,e){for(let t of e)n.add(t)}be(Ga,"default",_n);class js{constructor(e){be(this,"parsers",{}),be(this,"output",{}),be(this,"errors",[]),be(this,"pushToErrors",(t=>this.errors.push(t))),this.options=Ga.useCached(e)}async read(e){this.file=await xM(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[r,a]of nr)if(a.canHandle(e,t))return this.fileParser=new a(this.options,this.file,this.parsers),e[r]=!0;this.file.close&&this.file.close(),jt("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),Pf(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map((async r=>{let a=await r.parse();r.assignToOutput(e,a)}));this.options.silentErrors&&(t=t.map((r=>r.catch(this.pushToErrors)))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,r=Ut.get("tiff",e);var a;if(t.tiff?a={start:0,type:"tiff"}:t.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let l=await this.fileParser.ensureSegmentChunk(a),c=this.parsers.tiff=new r(l,e,t),d=await c.extractThumbnail();return t.close&&t.close(),d}}async function cd(n,e){let t=new js(e);return await t.read(n),t.parse()}var kM=Object.freeze({__proto__:null,parse:cd,Exifr:js,fileParsers:nr,segmentParsers:Ut,fileReaders:rr,tagKeys:Zt,tagValues:bi,tagRevivers:Os,createDictionary:Rt,extendDictionary:Va,fetchUrlAsArrayBuffer:ka,readBlobAsArrayBuffer:Ma,chunkedProps:Ts,otherSegments:ol,segments:La,tiffBlocks:vt,segmentsAndBlocks:Es,tiffExtractables:Ss,inheritables:ll,allFormatters:bs,Options:Ga});class hd{constructor(e,t,r){be(this,"errors",[]),be(this,"ensureSegmentChunk",(async a=>{let l=a.start,c=a.size||65536;if(this.file.chunked)if(this.file.available(l,c))a.chunk=this.file.subarray(l,c);else try{a.chunk=await this.file.readChunk(l,c)}catch(d){jt(`Couldn't read segment: ${JSON.stringify(a)}. ${d.message}`)}else this.file.byteLength>l+c?a.chunk=this.file.subarray(l,c):a.size===void 0?a.chunk=this.file.subarray(l):jt("Segment unreachable: "+JSON.stringify(a));return a.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=r}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let r=new(Ut.get(e))(t,this.options,this.file);return this.parsers[e]=r}createParsers(e){for(let t of e){let{type:r,chunk:a}=t,l=this.options[r];if(l&&l.enabled){let c=this.parsers[r];c&&c.append||c||this.createParser(r,a)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}class vi{static findPosition(e,t){let r=e.getUint16(t+2)+2,a=typeof this.headerLength=="function"?this.headerLength(e,t,r):this.headerLength,l=t+a,c=r-a;return{offset:t,length:r,headerLength:a,start:l,size:c,end:l+c}}static parse(e,t={}){return new this(e,new Ga({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof In?e:new In(e)}constructor(e,t={},r){be(this,"errors",[]),be(this,"raw",new Map),be(this,"handleError",(a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)})),this.chunk=this.normalizeInput(e),this.file=r,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let r=Os.get(t),a=bi.get(t),l=Zt.get(t),c=this.options[t],d=c.reviveValues&&!!r,p=c.translateValues&&!!a,g=c.translateKeys&&!!l,v={};for(let[E,b]of e)d&&r.has(E)?b=r.get(E)(b):p&&a.has(E)&&(b=this.translateValue(b,a.get(E))),g&&l.has(E)&&(E=l.get(E)||E),v[E]=b;return v}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,r){if(this.globalOptions.mergeOutput)return Object.assign(e,r);e[t]?Object.assign(e[t],r):e[t]=r}}be(vi,"headerLength",4),be(vi,"type",void 0),be(vi,"multiSegment",!1),be(vi,"canHandle",(()=>!1));function MM(n){return n===192||n===194||n===196||n===219||n===221||n===218||n===254}function VM(n){return n>=224&&n<=239}function LM(n,e,t){for(let[r,a]of Ut)if(a.canHandle(n,e,t))return r}class ES extends hd{constructor(...e){super(...e),be(this,"appSegments",[]),be(this,"jpegSegments",[]),be(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Ut.keyList())):(e=e===void 0?Ut.keyList().filter((t=>this.options[t].enabled)):e.filter((t=>this.options[t].enabled&&Ut.has(t))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:r,findAll:a,wanted:l,remaining:c}=this;if(!a&&this.file.chunked&&(a=Array.from(l).some((d=>{let p=Ut.get(d),g=this.options[d];return p.multiSegment&&g.multiSegment})),a&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,r.byteLength),!this.options.onlyTiff&&r.chunked){let d=!1;for(;c.size>0&&!d&&(r.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:p}=r,g=this.appSegments.some((v=>!this.file.available(v.offset||v.start,v.length||v.size)));if(d=e>p&&!g?!await r.readNextChunk(e):!await r.readNextChunk(p),(e=this.findAppSegmentsInRange(e,r.byteLength))===void 0)return}}}findAppSegmentsInRange(e,t){t-=2;let r,a,l,c,d,p,{file:g,findAll:v,wanted:E,remaining:b,options:D}=this;for(;e<t;e++)if(g.getUint8(e)===255){if(r=g.getUint8(e+1),VM(r)){if(a=g.getUint16(e+2),l=LM(g,e,a),l&&E.has(l)&&(c=Ut.get(l),d=c.findPosition(g,e),p=D[l],d.type=l,this.appSegments.push(d),!v&&(c.multiSegment&&p.multiSegment?(this.unfinishedMultiSegment=d.chunkNumber<d.chunkCount,this.unfinishedMultiSegment||b.delete(l)):b.delete(l),b.size===0)))break;D.recordUnknownSegments&&(d=vi.findPosition(g,e),d.marker=r,this.unknownSegments.push(d)),e+=a+1}else if(MM(r)){if(a=g.getUint16(e+2),r===218&&D.stopAfterSos!==!1)return;D.recordJpegSegments&&this.jpegSegments.push({offset:e,length:a,marker:r}),e+=a+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((t=>t.multiSegment)))return;let e=(function(t,r){let a,l,c,d=new Map;for(let p=0;p<t.length;p++)a=t[p],l=a[r],d.has(l)?c=d.get(l):d.set(l,c=[]),c.push(a);return Array.from(d)})(this.appSegments,"type");this.mergedAppSegments=e.map((([t,r])=>{let a=Ut.get(t,this.options);return a.handleMultiSegments?{type:t,chunk:a.handleMultiSegments(r)}:r[0]}))}getSegment(e){return this.appSegments.find((t=>t.type===e))}async getOrFindSegment(e){let t=this.getSegment(e);return t===void 0&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}be(ES,"type","jpeg"),nr.set("jpeg",ES);const UM=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class zM extends vi{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,r=new Map){let{pick:a,skip:l}=this.options[t];a=new Set(a);let c=a.size>0,d=l.size===0,p=this.chunk.getUint16(e);e+=2;for(let g=0;g<p;g++){let v=this.chunk.getUint16(e);if(c){if(a.has(v)&&(r.set(v,this.parseTag(e,v,t)),a.delete(v),a.size===0))break}else!d&&l.has(v)||r.set(v,this.parseTag(e,v,t));e+=12}return r}parseTag(e,t,r){let{chunk:a}=this,l=a.getUint16(e+2),c=a.getUint32(e+4),d=UM[l];if(d*c<=4?e+=8:e=a.getUint32(e+8),(l<1||l>13)&&jt(`Invalid TIFF value type. block: ${r.toUpperCase()}, tag: ${t.toString(16)}, type: ${l}, offset ${e}`),e>a.byteLength&&jt(`Invalid TIFF value offset. block: ${r.toUpperCase()}, tag: ${t.toString(16)}, type: ${l}, offset ${e} is outside of chunk size ${a.byteLength}`),l===1)return a.getUint8Array(e,c);if(l===2)return Ea(a.getString(e,c));if(l===7)return a.getUint8Array(e,c);if(c===1)return this.parseTagValue(l,e);{let p=new((function(v){switch(v){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(l))(c),g=d;for(let v=0;v<c;v++)p[v]=this.parseTagValue(l,e),e+=g;return p}}parseTagValue(e,t){let{chunk:r}=this;switch(e){case 1:return r.getUint8(t);case 3:return r.getUint16(t);case 4:return r.getUint32(t);case 5:return r.getUint32(t)/r.getUint32(t+4);case 6:return r.getInt8(t);case 8:return r.getInt16(t);case 9:return r.getInt32(t);case 10:return r.getInt32(t)/r.getInt32(t+4);case 11:return r.getFloat(t);case 12:return r.getDouble(t);case 13:return r.getUint32(t);default:jt(`Invalid tiff type ${e}`)}}}class Lp extends zM{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1165519206&&e.getUint16(t+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return t.catch!==void 0&&(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let r=new Map;return this[t]=r,this.parseTags(e,t,r),r}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&jt("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&jt(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,Eg(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,Eg(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let r=e.get(t);r&&r.length===1&&e.set(t,r[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",SS(...e.get(2),e.get(1))),e.set("longitude",SS(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,r,a={};for(t of vt)if(e=this[t],!iA(e))if(r=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(a,r)}else a[t]=r;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[r,a]of Object.entries(t))this.assignObjectToOutput(e,r,a)}}function SS(n,e,t,r){var a=n+e/60+t/3600;return r!=="S"&&r!=="W"||(a*=-1),a}be(Lp,"type","tiff"),be(Lp,"headerLength",10),Ut.set("tiff",Lp);var BM=Object.freeze({__proto__:null,default:kM,Exifr:js,fileParsers:nr,segmentParsers:Ut,fileReaders:rr,tagKeys:Zt,tagValues:bi,tagRevivers:Os,createDictionary:Rt,extendDictionary:Va,fetchUrlAsArrayBuffer:ka,readBlobAsArrayBuffer:Ma,chunkedProps:Ts,otherSegments:ol,segments:La,tiffBlocks:vt,segmentsAndBlocks:Es,tiffExtractables:Ss,inheritables:ll,allFormatters:bs,Options:Ga,parse:cd});const jy={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},Fy=Object.assign({},jy,{firstChunkSize:4e4,gps:[1,2,3,4]});async function aA(n){let e=new js(Fy);await e.read(n);let t=await e.parse();if(t&&t.gps){let{latitude:r,longitude:a}=t.gps;return{latitude:r,longitude:a}}}const Hy=Object.assign({},jy,{tiff:!1,ifd1:!0,mergeOutput:!1});async function oA(n){let e=new js(Hy);await e.read(n);let t=await e.extractThumbnail();return t&&ud?ld.from(t):t}async function lA(n){let e=await this.thumbnail(n);if(e!==void 0){let t=new Blob([e]);return URL.createObjectURL(t)}}const qy=Object.assign({},jy,{firstChunkSize:4e4,ifd0:[274]});async function Gy(n){let e=new js(qy);await e.read(n);let t=await e.parse();if(t&&t.ifd0)return t.ifd0[274]}const Yy=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Sa=!0,ba=!0;if(typeof navigator=="object"){let n=navigator.userAgent;if(n.includes("iPad")||n.includes("iPhone")){let e=n.match(/OS (\d+)_(\d+)/);if(e){let[,t,r]=e;Sa=Number(t)+.1*Number(r)<13.4,ba=!1}}else if(n.includes("OS X 10")){let[,e]=n.match(/OS X 10[_.](\d+)/);Sa=ba=Number(e)<15}if(n.includes("Chrome/")){let[,e]=n.match(/Chrome\/(\d+)/);Sa=ba=Number(e)<81}else if(n.includes("Firefox/")){let[,e]=n.match(/Firefox\/(\d+)/);Sa=ba=Number(e)<77}}async function uA(n){let e=await Gy(n);return Object.assign({canvas:Sa,css:ba},Yy[e])}class jM extends In{constructor(...e){super(...e),be(this,"ranges",new FM),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,r){if(e===0&&this.byteLength===0&&r){let a=new DataView(r.buffer||r,r.byteOffset,r.byteLength);this._swapDataView(a)}else{let a=e+t;if(a>this.byteLength){let{dataView:l}=this._extend(a);this._swapDataView(l)}}}_extend(e){let t;t=ud?ld.allocUnsafe(e):new Uint8Array(e);let r=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:r}}subarray(e,t,r=!1){return t=t||this._lengthToEnd(e),r&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,r=!1){r&&this._tryExtend(t,e.byteLength,e);let a=super.set(e,t);return this.ranges.add(t,a.byteLength),a}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class FM{constructor(){be(this,"list",[])}get length(){return this.list.length}add(e,t,r=0){let a=e+t,l=this.list.filter((c=>bS(e,c.offset,a)||bS(e,c.end,a)));if(l.length>0){e=Math.min(e,...l.map((d=>d.offset))),a=Math.max(a,...l.map((d=>d.end))),t=a-e;let c=l.shift();c.offset=e,c.length=t,c.end=a,this.list=this.list.filter((d=>!l.includes(d)))}else this.list.push({offset:e,length:t,end:a})}available(e,t){let r=e+t;return this.list.some((a=>a.offset<=e&&r<=a.end))}}function bS(n,e,t){return n<=e&&e<=t}class fd extends jM{constructor(e,t){super(0),be(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,r=await this.readChunk(e,t);return!!r&&r.byteLength===t}async readChunk(e,t){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)}safeWrapAddress(e,t){return this.size!==void 0&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}rr.set("blob",class extends fd{async readWhole(){this.chunked=!1;let n=await Ma(this.input);this._swapArrayBuffer(n)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(n,e){let t=e?n+e:void 0,r=this.input.slice(n,t),a=await Ma(r);return this.set(a,n,!0)}});var HM=Object.freeze({__proto__:null,default:BM,Exifr:js,fileParsers:nr,segmentParsers:Ut,fileReaders:rr,tagKeys:Zt,tagValues:bi,tagRevivers:Os,createDictionary:Rt,extendDictionary:Va,fetchUrlAsArrayBuffer:ka,readBlobAsArrayBuffer:Ma,chunkedProps:Ts,otherSegments:ol,segments:La,tiffBlocks:vt,segmentsAndBlocks:Es,tiffExtractables:Ss,inheritables:ll,allFormatters:bs,Options:Ga,parse:cd,gpsOnlyOptions:Fy,gps:aA,thumbnailOnlyOptions:Hy,thumbnail:oA,thumbnailUrl:lA,orientationOnlyOptions:qy,orientation:Gy,rotations:Yy,get rotateCanvas(){return Sa},get rotateCss(){return ba},rotation:uA});rr.set("url",class extends fd{async readWhole(){this.chunked=!1;let n=await ka(this.input);n instanceof ArrayBuffer?this._swapArrayBuffer(n):n instanceof Uint8Array&&this._swapBuffer(n)}async _readChunk(n,e){let t=e?n+e-1:void 0,r=this.options.httpHeaders||{};(n||t)&&(r.range=`bytes=${[n,t].join("-")}`);let a=await zy(this.input,{headers:r}),l=await a.arrayBuffer(),c=l.byteLength;if(a.status!==416)return c!==e&&(this.size=n+c),this.set(l,n,!0)}});In.prototype.getUint64=function(n){let e=this.getUint32(n),t=this.getUint32(n+4);return e<1048575?e<<32|t:typeof Xh!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Xh(e)<<Xh(32)|Xh(t)):void jt("Trying to read 64b value but JS can only handle 53b numbers.")};class qM extends hd{parseBoxes(e=0){let t=[];for(;e<this.file.byteLength-4;){let r=this.parseBoxHead(e);if(t.push(r),r.length===0)break;e+=r.length}return t}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,t){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find((r=>r.kind===t))}parseBoxHead(e){let t=this.file.getUint32(e),r=this.file.getString(e+4,4),a=e+8;return t===1&&(t=this.file.getUint64(e+8),a+=8),{offset:e,length:t,kind:r,start:a}}parseBoxFullHead(e){if(e.version!==void 0)return;let t=this.file.getUint32(e.start);e.version=t>>24,e.start+=4}}class cA extends qM{static canHandle(e,t){if(t!==0)return!1;let r=e.getUint16(2);if(r>50)return!1;let a=16,l=[];for(;a<r;)l.push(e.getString(a,4)),a+=4;return l.includes(this.type)}async parse(){let e=this.file.getUint32(0),t=this.parseBoxHead(e);for(;t.kind!=="meta";)e+=t.length,await this.file.ensureChunk(e,16),t=this.parseBoxHead(e);await this.file.ensureChunk(t.offset,t.length),this.parseBoxFullHead(t),this.parseSubBoxes(t),this.options.icc.enabled&&await this.findIcc(t),this.options.tiff.enabled&&await this.findExif(t)}async registerSegment(e,t,r){await this.file.ensureChunk(t,r);let a=this.file.subarray(t,r);this.createParser(e,a)}async findIcc(e){let t=this.findBox(e,"iprp");if(t===void 0)return;let r=this.findBox(t,"ipco");if(r===void 0)return;let a=this.findBox(r,"colr");a!==void 0&&await this.registerSegment("icc",a.offset+12,a.length)}async findExif(e){let t=this.findBox(e,"iinf");if(t===void 0)return;let r=this.findBox(e,"iloc");if(r===void 0)return;let a=this.findExifLocIdInIinf(t),l=this.findExtentInIloc(r,a);if(l===void 0)return;let[c,d]=l;await this.file.ensureChunk(c,d);let p=4+this.file.getUint32(c);c+=p,d-=p,await this.registerSegment("tiff",c,d)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let t,r,a,l,c=e.start,d=this.file.getUint16(c);for(c+=2;d--;){if(t=this.parseBoxHead(c),this.parseBoxFullHead(t),r=t.start,t.version>=2&&(a=t.version===3?4:2,l=this.file.getString(r+a+2,4),l==="Exif"))return this.file.getUintBytes(r,a);c+=t.length}}get8bits(e){let t=this.file.getUint8(e);return[t>>4,15&t]}findExtentInIloc(e,t){this.parseBoxFullHead(e);let r=e.start,[a,l]=this.get8bits(r++),[c,d]=this.get8bits(r++),p=e.version===2?4:2,g=e.version===1||e.version===2?2:0,v=d+a+l,E=e.version===2?4:2,b=this.file.getUintBytes(r,E);for(r+=E;b--;){let D=this.file.getUintBytes(r,p);r+=p+g+2+c;let L=this.file.getUint16(r);if(r+=2,D===t)return L>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(r+d,a),this.file.getUintBytes(r+d+a,l)];r+=L*v}}}class hA extends cA{}be(hA,"type","heic");class wS extends cA{}be(wS,"type","avif"),nr.set("heic",hA),nr.set("avif",wS),Rt(Zt,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),Rt(Zt,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),Rt(Zt,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),Rt(bi,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let xu=Rt(bi,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const AS={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};xu.set(37392,AS),xu.set(41488,AS);const Up={0:"Normal",1:"Low",2:"High"};function CS(n){return typeof n=="object"&&n.length!==void 0?n[0]:n}function RS(n){let e=Array.from(n).slice(1);return e[1]>15&&(e=e.map((t=>String.fromCharCode(t)))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function zp(n){if(typeof n=="string"){var[e,t,r,a,l,c]=n.trim().split(/[-: ]/g).map(Number),d=new Date(e,t-1,r);return Number.isNaN(a)||Number.isNaN(l)||Number.isNaN(c)||(d.setHours(a),d.setMinutes(l),d.setSeconds(c)),Number.isNaN(+d)?n:d}}function Tu(n){if(typeof n=="string")return n;let e=[];if(n[1]===0&&n[n.length-1]===0)for(let t=0;t<n.length;t+=2)e.push(IS(n[t+1],n[t]));else for(let t=0;t<n.length;t+=2)e.push(IS(n[t],n[t+1]));return Ea(String.fromCodePoint(...e))}function IS(n,e){return n<<8|e}xu.set(41992,Up),xu.set(41993,Up),xu.set(41994,Up),Rt(Os,["ifd0","ifd1"],[[50827,function(n){return typeof n!="string"?rA(n):n}],[306,zp],[40091,Tu],[40092,Tu],[40093,Tu],[40094,Tu],[40095,Tu]]),Rt(Os,"exif",[[40960,RS],[36864,RS],[36867,zp],[36868,zp],[40962,CS],[40963,CS]]),Rt(Os,"gps",[[0,n=>Array.from(n).join(".")],[7,n=>Array.from(n).join(":")]]);class Bp extends vi{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1752462448&&e.getString(t+4,20)==="http://ns.adobe.com/"}static headerLength(e,t){return e.getString(t+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,t){let r=super.findPosition(e,t);return r.multiSegment=r.extended=r.headerLength===79,r.multiSegment?(r.chunkCount=e.getUint8(t+72),r.chunkNumber=e.getUint8(t+76),e.getUint8(t+77)!==0&&r.chunkNumber++):(r.chunkCount=1/0,r.chunkNumber=-1),r}static handleMultiSegments(e){return e.map((t=>t.chunk.getString())).join("")}normalizeInput(e){return typeof e=="string"?e:In.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=(function(l){let c={},d={};for(let p of pA)c[p]=[],d[p]=0;return l.replace(KM,((p,g,v)=>{if(g==="<"){let E=++d[v];return c[v].push(E),`${p}#${E}`}return`${p}#${c[v].pop()}`}))})(e);let t=Go.findAll(e,"rdf","Description");t.length===0&&t.push(new Go("rdf","Description",void 0,e));let r,a={};for(let l of t)for(let c of l.properties)r=XM(c.ns,a),fA(c,r);return(function(l){let c;for(let d in l)c=l[d]=Pf(l[d]),c===void 0&&delete l[d];return Pf(l)})(a)}assignToOutput(e,t){if(this.localOptions.parse)for(let[r,a]of Object.entries(t))switch(r){case"tiff":this.assignObjectToOutput(e,"ifd0",a);break;case"exif":this.assignObjectToOutput(e,"exif",a);break;case"xmlns":break;default:this.assignObjectToOutput(e,r,a)}else e.xmp=t}}be(Bp,"type","xmp"),be(Bp,"multiSegment",!0),Ut.set("xmp",Bp);class Mf{static findAll(e){return dA(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(Mf.unpackMatch)}static unpackMatch(e){let t=e[1],r=e[2],a=e[3].slice(1,-1);return a=mA(a),new Mf(t,r,a)}constructor(e,t,r){this.ns=e,this.name=t,this.value=r}serialize(){return this.value}}class Go{static findAll(e,t,r){if(t!==void 0||r!==void 0){t=t||"[\\w\\d-]+",r=r||"[\\w\\d-]+";var a=new RegExp(`<(${t}):(${r})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else a=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return dA(e,a).map(Go.unpackMatch)}static unpackMatch(e){let t=e[1],r=e[2],a=e[4],l=e[8];return new Go(t,r,a,l)}constructor(e,t,r,a){this.ns=e,this.name=t,this.attrString=r,this.innerXml=a,this.attrs=Mf.findAll(r),this.children=Go.findAll(a),this.value=this.children.length===0?mA(a):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:t}=this;return e==="rdf"&&(t==="Seq"||t==="Bag"||t==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return YM(this.children.map(GM));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let t of this.properties)fA(t,e);return this.value!==void 0&&(e.value=this.value),Pf(e)}}function fA(n,e){let t=n.serialize();t!==void 0&&(e[n.name]=t)}var GM=n=>n.serialize(),YM=n=>n.length===1?n[0]:n,XM=(n,e)=>e[n]?e[n]:e[n]={};function dA(n,e){let t,r=[];if(!n)return r;for(;(t=e.exec(n))!==null;)r.push(t);return r}function mA(n){if((function(r){return r==null||r==="null"||r==="undefined"||r===""||r.trim()===""})(n))return;let e=Number(n);if(!Number.isNaN(e))return e;let t=n.toLowerCase();return t==="true"||t!=="false"&&n.trim()}const pA=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],KM=new RegExp(`(<|\\/)(${pA.join("|")})`,"g");var QM=Object.freeze({__proto__:null,default:HM,Exifr:js,fileParsers:nr,segmentParsers:Ut,fileReaders:rr,tagKeys:Zt,tagValues:bi,tagRevivers:Os,createDictionary:Rt,extendDictionary:Va,fetchUrlAsArrayBuffer:ka,readBlobAsArrayBuffer:Ma,chunkedProps:Ts,otherSegments:ol,segments:La,tiffBlocks:vt,segmentsAndBlocks:Es,tiffExtractables:Ss,inheritables:ll,allFormatters:bs,Options:Ga,parse:cd,gpsOnlyOptions:Fy,gps:aA,thumbnailOnlyOptions:Hy,thumbnail:oA,thumbnailUrl:lA,orientationOnlyOptions:qy,orientation:Gy,rotations:Yy,get rotateCanvas(){return Sa},get rotateCss(){return ba},rotation:uA});let DS=xf("fs",(n=>n.promises));rr.set("fs",class extends fd{async readWhole(){this.chunked=!1,this.fs=await DS;let n=await this.fs.readFile(this.input);this._swapBuffer(n)}async readChunked(){this.chunked=!0,this.fs=await DS,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(n,e){this.fh===void 0&&await this.open(),n+e>this.size&&(e=this.size-n);var t=this.subarray(n,e,!0);return await this.fh.read(t.dataView,0,e,n),t}async close(){if(this.fh){let n=this.fh;this.fh=void 0,await n.close()}}});rr.set("base64",class extends fd{constructor(...n){super(...n),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(n,e){let t,r,a=this.input;n===void 0?(n=0,t=0,r=0):(t=4*Math.floor(n/3),r=n-t/4*3),e===void 0&&(e=this.size);let l=n+e,c=t+4*Math.ceil(l/3);a=a.slice(t,c);let d=Math.min(e,this.size-n);if(ud){let p=ld.from(a,"base64").slice(r,r+d);return this.set(p,n,!0)}{let p=this.subarray(n,d,!0),g=atob(a),v=p.toUint8();for(let E=0;E<d;E++)v[E]=g.charCodeAt(r+E);return p}}});class OS extends hd{static canHandle(e,t){return t===18761||t===19789}extendOptions(e){let{ifd0:t,xmp:r,iptc:a,icc:l}=e;r.enabled&&t.deps.add(700),a.enabled&&t.deps.add(33723),l.enabled&&t.deps.add(34675),t.finalizeFilters()}async parse(){let{tiff:e,xmp:t,iptc:r,icc:a}=this.options;if(e.enabled||t.enabled||r.enabled||a.enabled){let l=Math.max(Eg(this.options),this.options.chunkSize);await this.file.ensureChunk(0,l),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let t=this.parsers.tiff[e];this.injectSegment(e,t)}}}be(OS,"type","tiff"),nr.set("tiff",OS);let $M=xf("zlib");const WM=["ihdr","iccp","text","itxt","exif"];class NS extends hd{constructor(...e){super(...e),be(this,"catchError",(t=>this.errors.push(t))),be(this,"metaChunks",[]),be(this,"unknownChunks",[])}static canHandle(e,t){return t===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,t){let{file:r}=this;for(;e<t;){let a=r.getUint32(e),l=r.getUint32(e+4),c=r.getString(e+4,4).toLowerCase(),d=a+4+4+4,p={type:c,offset:e,length:d,start:e+4+4,size:a,marker:l};WM.includes(c)?this.metaChunks.push(p):this.unknownChunks.push(p),e+=d}}parseTextChunks(){let e=this.metaChunks.filter((t=>t.type==="text"));for(let t of e){let[r,a]=this.file.getString(t.start,t.size).split("\0");this.injectKeyValToIhdr(r,a)}}injectKeyValToIhdr(e,t){let r=this.parsers.ihdr;r&&r.raw.set(e,t)}findIhdr(){let e=this.metaChunks.find((t=>t.type==="ihdr"));e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((t=>t.type==="exif"));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((t=>t.type==="itxt"));for(let t of e)t.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",t.chunk)}async findIcc(){let e=this.metaChunks.find((d=>d.type==="iccp"));if(!e)return;let{chunk:t}=e,r=t.getUint8Array(0,81),a=0;for(;a<80&&r[a]!==0;)a++;let l=a+2,c=t.getString(0,a);if(this.injectKeyValToIhdr("ProfileName",c),Nf){let d=await $M,p=t.getUint8Array(l);p=d.inflateSync(p),this.injectSegment("icc",p)}}}be(NS,"type","png"),nr.set("png",NS),Rt(Zt,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),Va(Zt,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let xS=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];Va(Zt,"ifd0",xS),Va(Zt,"exif",xS),Rt(bi,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class jp extends vi{static canHandle(e,t){return e.getUint8(t+1)===224&&e.getUint32(t+4)===1246120262&&e.getUint8(t+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}be(jp,"type","jfif"),be(jp,"headerLength",9),Ut.set("jfif",jp),Rt(Zt,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class PS extends vi{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}be(PS,"type","ihdr"),Ut.set("ihdr",PS),Rt(Zt,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),Rt(bi,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class uf extends vi{static canHandle(e,t){return e.getUint8(t+1)===226&&e.getUint32(t+4)===1229144927}static findPosition(e,t){let r=super.findPosition(e,t);return r.chunkNumber=e.getUint8(t+16),r.chunkCount=e.getUint8(t+17),r.multiSegment=r.chunkCount>1,r}static handleMultiSegments(e){return(function(t){let r=(function(a){let l=a[0].constructor,c=0;for(let g of a)c+=g.length;let d=new l(c),p=0;for(let g of a)d.set(g,p),p+=g.length;return d})(t.map((a=>a.chunk.toUint8())));return new In(r)})(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&jt("ICC header is too short");for(let[t,r]of Object.entries(ZM)){t=parseInt(t,10);let a=r(this.chunk,t);a!=="\0\0\0\0"&&e.set(t,a)}}parseTags(){let e,t,r,a,l,{raw:c}=this,d=this.chunk.getUint32(128),p=132,g=this.chunk.byteLength;for(;d--;){if(e=this.chunk.getString(p,4),t=this.chunk.getUint32(p+4),r=this.chunk.getUint32(p+8),a=this.chunk.getString(t,4),t+r>g)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");l=this.parseTag(a,t,r),l!==void 0&&l!=="\0\0\0\0"&&c.set(e,l),p+=12}}parseTag(e,t,r){switch(e){case"desc":return this.parseDesc(t);case"mluc":return this.parseMluc(t);case"text":return this.parseText(t,r);case"sig ":return this.parseSig(t)}if(!(t+r>this.chunk.byteLength))return this.chunk.getUint8Array(t,r)}parseDesc(e){let t=this.chunk.getUint32(e+8)-1;return Ea(this.chunk.getString(e+12,t))}parseText(e,t){return Ea(this.chunk.getString(e+8,t-8))}parseSig(e){return Ea(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:t}=this,r=t.getUint32(e+8),a=t.getUint32(e+12),l=e+16,c=[];for(let d=0;d<r;d++){let p=t.getString(l+0,2),g=t.getString(l+2,2),v=t.getUint32(l+4),E=t.getUint32(l+8)+e,b=Ea(t.getUnicodeString(E,v));c.push({lang:p,country:g,text:b}),l+=a}return r===1?c[0].text:c}translateValue(e,t){return typeof e=="string"?t[e]||t[e.toLowerCase()]||e:t[e]||e}}be(uf,"type","icc"),be(uf,"multiSegment",!0),be(uf,"headerLength",18);const ZM={4:wr,8:function(n,e){return[n.getUint8(e),n.getUint8(e+1)>>4,n.getUint8(e+1)%16].map((t=>t.toString(10))).join(".")},12:wr,16:wr,20:wr,24:function(n,e){const t=n.getUint16(e),r=n.getUint16(e+2)-1,a=n.getUint16(e+4),l=n.getUint16(e+6),c=n.getUint16(e+8),d=n.getUint16(e+10);return new Date(Date.UTC(t,r,a,l,c,d))},36:wr,40:wr,48:wr,52:wr,64:(n,e)=>n.getUint32(e),80:wr};function wr(n,e){return Ea(n.getString(e,4))}Ut.set("icc",uf),Rt(Zt,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Kh={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},kS={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};Rt(bi,"icc",[[4,Kh],[12,kS],[40,Object.assign({},Kh,kS)],[48,Kh],[80,Kh],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Qh extends vi{static canHandle(e,t,r){return e.getUint8(t+1)===237&&e.getString(t+4,9)==="Photoshop"&&this.containsIptc8bim(e,t,r)!==void 0}static headerLength(e,t,r){let a,l=this.containsIptc8bim(e,t,r);if(l!==void 0)return a=e.getUint8(t+l+7),a%2!=0&&(a+=1),a===0&&(a=4),l+8+a}static containsIptc8bim(e,t,r){for(let a=0;a<r;a++)if(this.isIptcSegmentHead(e,t+a))return a}static isIptcSegmentHead(e,t){return e.getUint8(t)===56&&e.getUint32(t)===943868237&&e.getUint16(t+4)===1028}parse(){let{raw:e}=this,t=this.chunk.byteLength-1,r=!1;for(let a=0;a<t;a++)if(this.chunk.getUint8(a)===28&&this.chunk.getUint8(a+1)===2){r=!0;let l=this.chunk.getUint16(a+3),c=this.chunk.getUint8(a+2),d=this.chunk.getLatin1String(a+5,l);e.set(c,this.pluralizeValue(e.get(c),d)),a+=4+l}else if(r)break;return this.translate(),this.output}pluralizeValue(e,t){return e!==void 0?e instanceof Array?(e.push(t),e):[e,t]:t}}be(Qh,"type","iptc"),be(Qh,"translateValues",!1),be(Qh,"reviveValues",!1),Ut.set("iptc",Qh),Rt(Zt,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),Rt(bi,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);const JM=()=>{const[n,e]=G.useState(null),[t,r]=G.useState(!1),[a,l]=G.useState("");G.useEffect(()=>{const p=Py(g=>e(g));return()=>p()},[]);const c=async()=>{try{await Fw()}catch(p){console.error(p)}},d=async p=>{const g=Array.from(p.target.files);if(g.length!==0){r(!0),l(`Uploading ${g.length} items...`);try{for(let v=0;v<g.length;v++){const E=g[v];l(`Uploading ${v+1} / ${g.length}: ${E.name} (Extracting Metadata)...`);let b=null,D={};try{const V=await E.arrayBuffer(),K=await QM.parse(V,{gps:!0,tiff:!0,jfif:!0,icc:!0,iptc:!0,xmp:!0,translateValues:!0,reviveValues:!0});if(console.log(`EXIF Output for ${E.name}:`,K),K){b=K.DateTimeOriginal;const $=K.latitude??(K.GPSLatitudeRef==="S"?-K.GPSLatitude:K.GPSLatitude),Z=K.longitude??(K.GPSLongitudeRef==="W"?-K.GPSLongitude:K.GPSLongitude);D={make:K.Make,model:K.Model,iso:K.ISO,fStop:K.FNumber,shutterSpeed:K.ExposureTime,latitude:$,longitude:Z},$&&Z?console.log(`GPS FOUND for ${E.name}: ${$}, ${Z}`):console.warn(`GPS MISSING for ${E.name}. Keys present:`,Object.keys(K).filter(ce=>ce.toLowerCase().includes("gps"))),Object.keys(D).forEach(ce=>{const me=D[ce];(me==null||typeof me=="number"&&isNaN(me))&&delete D[ce]})}}catch(V){console.warn(`Could not extract EXIF for ${E.name}`,V)}l(`Uploading ${v+1} / ${g.length}: ${E.name} (Sending to Storage)...`);const{url:L,path:z}=await CM(E);l(`Uploading ${v+1} / ${g.length}: ${E.name} (Saving to Database)...`),await wM({url:L,storagePath:z,uploaderUid:n.uid,uploaderName:n.displayName,filename:E.name,capturedAt:b||new Date,...D})}l("Upload complete!"),p.target.value=null}catch(v){console.error(v),l("Upload failed.")}finally{r(!1)}}};return n?F.jsxs("div",{className:"max-w-xl mx-auto",children:[F.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Upload Photos"}),F.jsx("div",{className:"border-2 border-dashed border-white/20 rounded-xl p-10 text-center hover:bg-white/5 transition flex flex-col items-center justify-center min-h-[200px]",children:t?F.jsx("div",{className:"animate-pulse",children:a}):F.jsxs(F.Fragment,{children:[F.jsx("p",{className:"mb-4 text-gray-300",children:"Choose images from your device"}),F.jsxs("label",{className:"cursor-pointer px-6 py-2 bg-white text-black rounded-lg font-medium hover:bg-gray-200 transition",children:["Select Files",F.jsx("input",{type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:d,disabled:t})]})]})}),a&&!t&&F.jsx("p",{className:"mt-4 text-center text-green-400",children:a})]}):F.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[50vh]",children:[F.jsx("p",{className:"mb-4 text-gray-400",children:"Please sign in to upload photos."}),F.jsx("button",{onClick:c,className:"px-6 py-3 bg-blue-600 hover:bg-blue-500 rounded-full font-semibold transition",children:"Sign in with Google"})]})};function e6(){return F.jsx(bR,{basename:"/happy_archive/",children:F.jsx(ck,{children:F.jsxs(J2,{children:[F.jsx(Hp,{path:"/",element:F.jsx(RM,{})}),F.jsx(Hp,{path:"/upload",element:F.jsx(JM,{})})]})})})}n2.createRoot(document.getElementById("root")).render(F.jsx(G.StrictMode,{children:F.jsx(e6,{})}));
