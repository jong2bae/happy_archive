# 개인 사진 갤러리 구현 계획

이 문서는 프로젝트의 **초기 요구사항 및 설계**와 **현재 진행 상황**을 통합하여 관리합니다.

## 1. 초기 요구사항 및 설계 (Original Design)

### 핵심 요구사항
1.  **업로드 권한**: 허가된 사용자(가족)만 휴대폰으로 접속하여 사진 업로드.
2.  **조회 권한**: 링크를 공유받은 사람은 누구나 갤러리 감상 가능 (로그인 불필요).
3.  **디스플레이**:
    - 기본: 갤러리 형태.
    - 기능: **랜덤 재생** (디지털 액자처럼), **날짜별 정렬** (최신순/과거순).

### 아키텍처 및 데이터 설계
- **프론트엔드**: React + Vite (모바일 최적화).
- **인증 (Auth)**: Firebase Google 로그인.
    - *설정*: 특정 이메일(가족)만 업로드 버튼이 보이도록 처리하거나, 로그인한 사람은 모두 업로드 가능하게 설정.
- **데이터베이스 (Firestore)**:
    - 사진 정보: `이미지URL`, `업로드일시`, `촬영일시(EXIF)`, `업로더ID`.
    - 보안 규칙: *읽기는 모두 허용, 쓰기는 인증된 사용자만 허용*.
- **저장소**: Firebase Storage (추후 NAS 교체 가능하도록 인터페이스 분리).

### 화면 구성
1.  **메인 갤러리 (Home)**
    - 방문자 누구나 접속 가능.
    - 사진들이 격자(Grid)로 나열됨.
    - 상단 필터: [최신순 | 랜덤 보기].
2.  **업로드 페이지 (/upload)**
    - 로그인 버튼 (구글).
    - 로그인 성공 시에만 사진 선택 및 업로드 기능 활성화.
    - 사진 업로드 시 촬영 날짜 자동 추출 시도.
3.  **사진 상세 뷰**
    - 사진 클릭 시 확대.

### 개발 단계 (초기 계획)
1.  **프로젝트 초기화**: React, TailwindCSS 설치.
2.  **서비스 구현**: `AuthService`, `StorageService`, `DbService`.
3.  **UI 개발**: 공통 레이아웃, 갤러리 컴포넌트, 업로드 컴포넌트.
4.  **Firebase 연동**: 프로젝트 생성 및 키 적용.
5.  **배포**: GitHub Pages.

---

## 2. 프로젝트 현황 및 구현 상태 (Current Status)

| 기능 항목 | 계획 (Plan) | 구현 상태 (Status) | 완료 여부 |
| :--- | :--- | :--- | :--- |
| **기본 구조** | React + Vite, TailwindCSS | 구현 완료 (`src/` 구조 및 설정 확인됨) | ✅ 완료 |
| **인증** | Firebase Google 로그인 | 구현 완료 (`auth.js`, `Upload.jsx`) | ✅ 완료 |
| **사진 업로드** | 다중 업로드, Firebase Storage | 구현 완료 (`storage.js`, `Upload.jsx`) | ✅ 완료 |
| **데이터 저장** | Firestore 메타데이터 저장 | 구현 완료 (`db.js`) | ✅ 완료 |
| **갤러리 뷰** | 그리드 뷰, 랜덤 셔플 | 구현 완료 (`Gallery.jsx`) | ✅ 완료 |
| **사진 상세** | 라이트박스 (확대 보기) | 구현 완료 (`Gallery.jsx` 모달) | ✅ 완료 |
| **EXIF 추출** | 촬영 날짜 자동 추출 | **구현 완료** (Upload.jsx에서 `exifr` 사용) | ✅ 완료 |
| **정렬** | 촬영일 기준 정렬 | **구현 완료** (Gallery.jsx, `capturedAt` 우선 정렬) | ✅ 완료 |
| **배포** | GitHub Pages 배포 | **설정 완료** (package.json, vite.config.js) | ✅ 완료 |

## 3. 향후 계획 (Next Steps)

### 완료된 최근 작업
- [x] **EXIF 정보 추출**: `exifr` 라이브러리를 사용하여 사진 업로드 시 `DateTimeOriginal`을 추출, `capturedAt` 필드에 저장하도록 구현했습니다.
- [x] **갤러리 정렬**: 갤러리 로딩 시 `capturedAt`(촬영일)을 기준으로 내림차순 정렬하고, EXIF 데이터가 없는 경우 `createdAt`(업로드일)을 사용하도록 로직을 개선했습니다.
- [x] **배포 설정**: `gh-pages` 패키지 설치 및 `vite.config.js`의 `base` 경로 설정, `package.json`의 `deploy` 스크립트를 추가했습니다.

### 남은 작업 (Polishing)
- **UI 개선**: 로딩 인디케이터 스타일 개선, 사진 날짜 표시 디자인 다듬기.
- **오류 처리**: 업로드 실패 시 사용자 피드백 강화.
- **보안 규칙 검토**: Firestore 보안 규칙이 '읽기 허용/쓰기 인증필요'로 잘 설정되어 있는지 Firebase 콘솔 확인.
